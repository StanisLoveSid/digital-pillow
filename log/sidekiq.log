# Logfile created on 2018-07-25 18:40:40 +0000 by logger.rb/53141
2018-07-25T18:41:02.982Z 14838 TID-gmueyzy28 INFO: Running in ruby 2.3.0p0 (2015-12-25 revision 53290) [x86_64-linux]
2018-07-25T18:41:02.982Z 14838 TID-gmueyzy28 INFO: See LICENSE and the LGPL-3.0 for licensing details.
2018-07-25T18:41:02.982Z 14838 TID-gmueyzy28 INFO: Upgrade to Sidekiq Pro for more features and support: http://sidekiq.org
2018-07-25T18:41:02.983Z 14838 TID-gmueyzy28 INFO: Booting Sidekiq 5.0.4 with redis options {:id=>"Sidekiq-server-PID-14838", :url=>nil}
2018-07-25T19:07:13.728Z 14838 TID-gmufliak8 SendMailsJob JID-3d78d3c81c6b554c4c3d7bbc INFO: start
2018-07-25T19:07:14.863Z 14838 TID-gmufliak8 SendMailsJob JID-3d78d3c81c6b554c4c3d7bbc INFO: fail: 1.135 sec
2018-07-25T19:07:14.863Z 14838 TID-gmufliak8 WARN: {"context":"Job raised exception","job":{"class":"ActiveJob::QueueAdapters::SidekiqAdapter::JobWrapper","wrapped":"SendMailsJob","queue":"default","args":[{"job_class":"SendMailsJob","job_id":"69e14b5f-559a-4ffc-bde6-40babb6d779a","queue_name":"default","priority":null,"arguments":[{"_aj_globalid":"gid://book-store/Book/7"}],"locale":"en"}],"retry":true,"jid":"3d78d3c81c6b554c4c3d7bbc","created_at":1532545633.6385205,"enqueued_at":1532545633.6395023,"error_message":"undefined method `url' for nil:NilClass\nDid you mean?  URI","error_class":"NoMethodError","failed_at":1532545634.8540719,"retry_count":0},"jobstr":"{\"class\":\"ActiveJob::QueueAdapters::SidekiqAdapter::JobWrapper\",\"wrapped\":\"SendMailsJob\",\"queue\":\"default\",\"args\":[{\"job_class\":\"SendMailsJob\",\"job_id\":\"69e14b5f-559a-4ffc-bde6-40babb6d779a\",\"queue_name\":\"default\",\"priority\":null,\"arguments\":[{\"_aj_globalid\":\"gid://book-store/Book/7\"}],\"locale\":\"en\"}],\"retry\":true,\"jid\":\"3d78d3c81c6b554c4c3d7bbc\",\"created_at\":1532545633.6385205,\"enqueued_at\":1532545633.6395023}"}
2018-07-25T19:07:14.864Z 14838 TID-gmufliak8 WARN: NoMethodError: undefined method `url' for nil:NilClass
Did you mean?  URI
2018-07-25T19:07:14.864Z 14838 TID-gmufliak8 WARN: /home/deploy/www/app/mailers/book_mailer.rb:8:in `send_book'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionpack-5.0.1/lib/abstract_controller/base.rb:188:in `process_action'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionpack-5.0.1/lib/abstract_controller/callbacks.rb:20:in `block in process_action'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:97:in `__run_callbacks__'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:90:in `run_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionpack-5.0.1/lib/abstract_controller/callbacks.rb:19:in `process_action'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionpack-5.0.1/lib/abstract_controller/base.rb:126:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/rescuable.rb:23:in `block in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/rescuable.rb:15:in `handle_exceptions'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/rescuable.rb:22:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionview-5.0.1/lib/action_view/rendering.rb:30:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/base.rb:595:in `block in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications.rb:164:in `block in instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications/instrumenter.rb:21:in `instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications.rb:164:in `instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/base.rb:594:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/message_delivery.rb:105:in `block in processed_mailer'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/message_delivery.rb:104:in `tap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/message_delivery.rb:104:in `processed_mailer'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/message_delivery.rb:27:in `__getobj__'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/2.3.0/delegate.rb:80:in `method_missing'
/home/deploy/www/app/jobs/send_mails_job.rb:6:in `perform'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:34:in `block in perform_now'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:126:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/i18n-0.8.0/lib/i18n.rb:257:in `with_locale'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/translation.rb:7:in `block (2 levels) in <module:Translation>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `instance_exec'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `block in make_lambda'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:285:in `block in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:447:in `block in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:24:in `block (4 levels) in <module:Logging>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications.rb:164:in `block in instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications/instrumenter.rb:21:in `instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications.rb:164:in `instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:23:in `block (3 levels) in <module:Logging>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:44:in `block in tag_logger'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/tagged_logging.rb:69:in `block in tagged'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/tagged_logging.rb:26:in `tagged'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/tagged_logging.rb:69:in `tagged'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:44:in `tag_logger'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:20:in `block (2 levels) in <module:Logging>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `instance_exec'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `block in make_lambda'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:285:in `block in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:447:in `block in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:101:in `__run_callbacks__'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:750:in `_run_perform_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:90:in `run_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:33:in `perform_now'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:22:in `block in execute'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:126:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/railtie.rb:26:in `block (4 levels) in <class:Railtie>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:85:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:68:in `block in wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:81:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:67:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/railtie.rb:25:in `block (3 levels) in <class:Railtie>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `instance_exec'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `block in make_lambda'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:285:in `block in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:447:in `block in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:101:in `__run_callbacks__'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:750:in `_run_execute_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:90:in `run_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:20:in `execute'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/queue_adapters/sidekiq_adapter.rb:40:in `perform'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:199:in `execute_job'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:170:in `block (2 levels) in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/middleware/chain.rb:128:in `block in invoke'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/middleware/chain.rb:133:in `invoke'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:169:in `block in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:141:in `block (6 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/job_retry.rb:97:in `local'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:140:in `block (5 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/rails.rb:42:in `block in call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:85:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:68:in `block in wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:85:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:67:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/rails.rb:41:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:136:in `block (4 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:215:in `stats'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:131:in `block (3 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/job_logger.rb:7:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:130:in `block (2 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/job_retry.rb:72:in `global'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:129:in `block in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/logging.rb:44:in `with_context'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/logging.rb:38:in `with_job_hash_context'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:128:in `dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:168:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:85:in `process_one'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:73:in `run'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/util.rb:16:in `watchdog'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/util.rb:25:in `block in safe_thread'
2018-07-25T19:07:49.517Z 14838 TID-gmufliiws SendMailsJob JID-3d78d3c81c6b554c4c3d7bbc INFO: start
2018-07-25T19:07:49.595Z 14838 TID-gmufliiws SendMailsJob JID-3d78d3c81c6b554c4c3d7bbc INFO: fail: 0.078 sec
2018-07-25T19:07:49.595Z 14838 TID-gmufliiws WARN: {"context":"Job raised exception","job":{"class":"ActiveJob::QueueAdapters::SidekiqAdapter::JobWrapper","wrapped":"SendMailsJob","queue":"default","args":[{"job_class":"SendMailsJob","job_id":"69e14b5f-559a-4ffc-bde6-40babb6d779a","queue_name":"default","priority":null,"arguments":[{"_aj_globalid":"gid://book-store/Book/7"}],"locale":"en"}],"retry":true,"jid":"3d78d3c81c6b554c4c3d7bbc","created_at":1532545633.6385205,"enqueued_at":1532545669.5078938,"error_message":"undefined method `url' for nil:NilClass\nDid you mean?  URI","error_class":"NoMethodError","failed_at":1532545634.8540719,"retry_count":1,"retried_at":1532545669.5867941},"jobstr":"{\"class\":\"ActiveJob::QueueAdapters::SidekiqAdapter::JobWrapper\",\"wrapped\":\"SendMailsJob\",\"queue\":\"default\",\"args\":[{\"job_class\":\"SendMailsJob\",\"job_id\":\"69e14b5f-559a-4ffc-bde6-40babb6d779a\",\"queue_name\":\"default\",\"priority\":null,\"arguments\":[{\"_aj_globalid\":\"gid://book-store/Book/7\"}],\"locale\":\"en\"}],\"retry\":true,\"jid\":\"3d78d3c81c6b554c4c3d7bbc\",\"created_at\":1532545633.6385205,\"enqueued_at\":1532545669.5078938,\"error_message\":\"undefined method `url' for nil:NilClass\\nDid you mean?  URI\",\"error_class\":\"NoMethodError\",\"failed_at\":1532545634.8540719,\"retry_count\":0}"}
2018-07-25T19:07:49.596Z 14838 TID-gmufliiws WARN: NoMethodError: undefined method `url' for nil:NilClass
Did you mean?  URI
2018-07-25T19:07:49.596Z 14838 TID-gmufliiws WARN: /home/deploy/www/app/mailers/book_mailer.rb:8:in `send_book'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionpack-5.0.1/lib/abstract_controller/base.rb:188:in `process_action'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionpack-5.0.1/lib/abstract_controller/callbacks.rb:20:in `block in process_action'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:97:in `__run_callbacks__'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:90:in `run_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionpack-5.0.1/lib/abstract_controller/callbacks.rb:19:in `process_action'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionpack-5.0.1/lib/abstract_controller/base.rb:126:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/rescuable.rb:23:in `block in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/rescuable.rb:15:in `handle_exceptions'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/rescuable.rb:22:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionview-5.0.1/lib/action_view/rendering.rb:30:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/base.rb:595:in `block in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications.rb:164:in `block in instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications/instrumenter.rb:21:in `instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications.rb:164:in `instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/base.rb:594:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/message_delivery.rb:105:in `block in processed_mailer'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/message_delivery.rb:104:in `tap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/message_delivery.rb:104:in `processed_mailer'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/message_delivery.rb:27:in `__getobj__'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/2.3.0/delegate.rb:80:in `method_missing'
/home/deploy/www/app/jobs/send_mails_job.rb:6:in `perform'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:34:in `block in perform_now'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:126:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/i18n-0.8.0/lib/i18n.rb:257:in `with_locale'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/translation.rb:7:in `block (2 levels) in <module:Translation>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `instance_exec'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `block in make_lambda'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:285:in `block in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:447:in `block in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:24:in `block (4 levels) in <module:Logging>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications.rb:164:in `block in instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications/instrumenter.rb:21:in `instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications.rb:164:in `instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:23:in `block (3 levels) in <module:Logging>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:44:in `block in tag_logger'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/tagged_logging.rb:69:in `block in tagged'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/tagged_logging.rb:26:in `tagged'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/tagged_logging.rb:69:in `tagged'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:44:in `tag_logger'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:20:in `block (2 levels) in <module:Logging>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `instance_exec'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `block in make_lambda'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:285:in `block in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:447:in `block in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:101:in `__run_callbacks__'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:750:in `_run_perform_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:90:in `run_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:33:in `perform_now'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:22:in `block in execute'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:126:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/railtie.rb:26:in `block (4 levels) in <class:Railtie>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:85:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:68:in `block in wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:81:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:67:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/railtie.rb:25:in `block (3 levels) in <class:Railtie>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `instance_exec'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `block in make_lambda'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:285:in `block in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:447:in `block in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:101:in `__run_callbacks__'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:750:in `_run_execute_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:90:in `run_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:20:in `execute'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/queue_adapters/sidekiq_adapter.rb:40:in `perform'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:199:in `execute_job'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:170:in `block (2 levels) in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/middleware/chain.rb:128:in `block in invoke'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/middleware/chain.rb:133:in `invoke'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:169:in `block in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:141:in `block (6 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/job_retry.rb:97:in `local'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:140:in `block (5 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/rails.rb:42:in `block in call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:85:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:68:in `block in wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:85:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:67:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/rails.rb:41:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:136:in `block (4 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:215:in `stats'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:131:in `block (3 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/job_logger.rb:7:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:130:in `block (2 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/job_retry.rb:72:in `global'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:129:in `block in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/logging.rb:44:in `with_context'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/logging.rb:38:in `with_job_hash_context'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:128:in `dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:168:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:85:in `process_one'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:73:in `run'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/util.rb:16:in `watchdog'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/util.rb:25:in `block in safe_thread'
2018-07-25T19:08:25.706Z 14838 TID-gmuflibos SendMailsJob JID-3d78d3c81c6b554c4c3d7bbc INFO: start
2018-07-25T19:08:25.756Z 14838 TID-gmuflibos SendMailsJob JID-3d78d3c81c6b554c4c3d7bbc INFO: fail: 0.05 sec
2018-07-25T19:08:25.756Z 14838 TID-gmuflibos WARN: {"context":"Job raised exception","job":{"class":"ActiveJob::QueueAdapters::SidekiqAdapter::JobWrapper","wrapped":"SendMailsJob","queue":"default","args":[{"job_class":"SendMailsJob","job_id":"69e14b5f-559a-4ffc-bde6-40babb6d779a","queue_name":"default","priority":null,"arguments":[{"_aj_globalid":"gid://book-store/Book/7"}],"locale":"en"}],"retry":true,"jid":"3d78d3c81c6b554c4c3d7bbc","created_at":1532545633.6385205,"enqueued_at":1532545705.698197,"error_message":"undefined method `url' for nil:NilClass\nDid you mean?  URI","error_class":"NoMethodError","failed_at":1532545634.8540719,"retry_count":2,"retried_at":1532545705.7556705},"jobstr":"{\"class\":\"ActiveJob::QueueAdapters::SidekiqAdapter::JobWrapper\",\"wrapped\":\"SendMailsJob\",\"queue\":\"default\",\"args\":[{\"job_class\":\"SendMailsJob\",\"job_id\":\"69e14b5f-559a-4ffc-bde6-40babb6d779a\",\"queue_name\":\"default\",\"priority\":null,\"arguments\":[{\"_aj_globalid\":\"gid://book-store/Book/7\"}],\"locale\":\"en\"}],\"retry\":true,\"jid\":\"3d78d3c81c6b554c4c3d7bbc\",\"created_at\":1532545633.6385205,\"enqueued_at\":1532545705.698197,\"error_message\":\"undefined method `url' for nil:NilClass\\nDid you mean?  URI\",\"error_class\":\"NoMethodError\",\"failed_at\":1532545634.8540719,\"retry_count\":1,\"retried_at\":1532545669.5867941}"}
2018-07-25T19:08:25.756Z 14838 TID-gmuflibos WARN: NoMethodError: undefined method `url' for nil:NilClass
Did you mean?  URI
2018-07-25T19:08:25.757Z 14838 TID-gmuflibos WARN: /home/deploy/www/app/mailers/book_mailer.rb:8:in `send_book'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionpack-5.0.1/lib/abstract_controller/base.rb:188:in `process_action'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionpack-5.0.1/lib/abstract_controller/callbacks.rb:20:in `block in process_action'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:97:in `__run_callbacks__'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:90:in `run_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionpack-5.0.1/lib/abstract_controller/callbacks.rb:19:in `process_action'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionpack-5.0.1/lib/abstract_controller/base.rb:126:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/rescuable.rb:23:in `block in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/rescuable.rb:15:in `handle_exceptions'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/rescuable.rb:22:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionview-5.0.1/lib/action_view/rendering.rb:30:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/base.rb:595:in `block in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications.rb:164:in `block in instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications/instrumenter.rb:21:in `instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications.rb:164:in `instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/base.rb:594:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/message_delivery.rb:105:in `block in processed_mailer'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/message_delivery.rb:104:in `tap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/message_delivery.rb:104:in `processed_mailer'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/message_delivery.rb:27:in `__getobj__'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/2.3.0/delegate.rb:80:in `method_missing'
/home/deploy/www/app/jobs/send_mails_job.rb:6:in `perform'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:34:in `block in perform_now'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:126:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/i18n-0.8.0/lib/i18n.rb:257:in `with_locale'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/translation.rb:7:in `block (2 levels) in <module:Translation>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `instance_exec'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `block in make_lambda'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:285:in `block in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:447:in `block in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:24:in `block (4 levels) in <module:Logging>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications.rb:164:in `block in instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications/instrumenter.rb:21:in `instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications.rb:164:in `instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:23:in `block (3 levels) in <module:Logging>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:44:in `block in tag_logger'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/tagged_logging.rb:69:in `block in tagged'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/tagged_logging.rb:26:in `tagged'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/tagged_logging.rb:69:in `tagged'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:44:in `tag_logger'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:20:in `block (2 levels) in <module:Logging>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `instance_exec'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `block in make_lambda'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:285:in `block in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:447:in `block in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:101:in `__run_callbacks__'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:750:in `_run_perform_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:90:in `run_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:33:in `perform_now'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:22:in `block in execute'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:126:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/railtie.rb:26:in `block (4 levels) in <class:Railtie>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:85:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:68:in `block in wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:81:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:67:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/railtie.rb:25:in `block (3 levels) in <class:Railtie>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `instance_exec'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `block in make_lambda'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:285:in `block in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:447:in `block in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:101:in `__run_callbacks__'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:750:in `_run_execute_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:90:in `run_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:20:in `execute'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/queue_adapters/sidekiq_adapter.rb:40:in `perform'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:199:in `execute_job'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:170:in `block (2 levels) in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/middleware/chain.rb:128:in `block in invoke'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/middleware/chain.rb:133:in `invoke'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:169:in `block in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:141:in `block (6 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/job_retry.rb:97:in `local'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:140:in `block (5 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/rails.rb:42:in `block in call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:85:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:68:in `block in wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:85:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:67:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/rails.rb:41:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:136:in `block (4 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:215:in `stats'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:131:in `block (3 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/job_logger.rb:7:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:130:in `block (2 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/job_retry.rb:72:in `global'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:129:in `block in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/logging.rb:44:in `with_context'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/logging.rb:38:in `with_job_hash_context'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:128:in `dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:168:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:85:in `process_one'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:73:in `run'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/util.rb:16:in `watchdog'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/util.rb:25:in `block in safe_thread'
2018-07-25T19:09:22.168Z 14838 TID-gmuflic10 SendMailsJob JID-3d78d3c81c6b554c4c3d7bbc INFO: start
2018-07-25T19:09:22.204Z 14838 TID-gmuflic10 SendMailsJob JID-3d78d3c81c6b554c4c3d7bbc INFO: fail: 0.036 sec
2018-07-25T19:09:22.205Z 14838 TID-gmuflic10 WARN: {"context":"Job raised exception","job":{"class":"ActiveJob::QueueAdapters::SidekiqAdapter::JobWrapper","wrapped":"SendMailsJob","queue":"default","args":[{"job_class":"SendMailsJob","job_id":"69e14b5f-559a-4ffc-bde6-40babb6d779a","queue_name":"default","priority":null,"arguments":[{"_aj_globalid":"gid://book-store/Book/7"}],"locale":"en"}],"retry":true,"jid":"3d78d3c81c6b554c4c3d7bbc","created_at":1532545633.6385205,"enqueued_at":1532545762.1670063,"error_message":"undefined method `url' for nil:NilClass\nDid you mean?  URI","error_class":"NoMethodError","failed_at":1532545634.8540719,"retry_count":3,"retried_at":1532545762.2024353},"jobstr":"{\"class\":\"ActiveJob::QueueAdapters::SidekiqAdapter::JobWrapper\",\"wrapped\":\"SendMailsJob\",\"queue\":\"default\",\"args\":[{\"job_class\":\"SendMailsJob\",\"job_id\":\"69e14b5f-559a-4ffc-bde6-40babb6d779a\",\"queue_name\":\"default\",\"priority\":null,\"arguments\":[{\"_aj_globalid\":\"gid://book-store/Book/7\"}],\"locale\":\"en\"}],\"retry\":true,\"jid\":\"3d78d3c81c6b554c4c3d7bbc\",\"created_at\":1532545633.6385205,\"enqueued_at\":1532545762.1670063,\"error_message\":\"undefined method `url' for nil:NilClass\\nDid you mean?  URI\",\"error_class\":\"NoMethodError\",\"failed_at\":1532545634.8540719,\"retry_count\":2,\"retried_at\":1532545705.7556705}"}
2018-07-25T19:09:22.206Z 14838 TID-gmuflic10 WARN: NoMethodError: undefined method `url' for nil:NilClass
Did you mean?  URI
2018-07-25T19:09:22.206Z 14838 TID-gmuflic10 WARN: /home/deploy/www/app/mailers/book_mailer.rb:8:in `send_book'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionpack-5.0.1/lib/abstract_controller/base.rb:188:in `process_action'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionpack-5.0.1/lib/abstract_controller/callbacks.rb:20:in `block in process_action'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:97:in `__run_callbacks__'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:90:in `run_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionpack-5.0.1/lib/abstract_controller/callbacks.rb:19:in `process_action'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionpack-5.0.1/lib/abstract_controller/base.rb:126:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/rescuable.rb:23:in `block in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/rescuable.rb:15:in `handle_exceptions'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/rescuable.rb:22:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionview-5.0.1/lib/action_view/rendering.rb:30:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/base.rb:595:in `block in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications.rb:164:in `block in instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications/instrumenter.rb:21:in `instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications.rb:164:in `instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/base.rb:594:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/message_delivery.rb:105:in `block in processed_mailer'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/message_delivery.rb:104:in `tap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/message_delivery.rb:104:in `processed_mailer'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/message_delivery.rb:27:in `__getobj__'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/2.3.0/delegate.rb:80:in `method_missing'
/home/deploy/www/app/jobs/send_mails_job.rb:6:in `perform'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:34:in `block in perform_now'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:126:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/i18n-0.8.0/lib/i18n.rb:257:in `with_locale'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/translation.rb:7:in `block (2 levels) in <module:Translation>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `instance_exec'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `block in make_lambda'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:285:in `block in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:447:in `block in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:24:in `block (4 levels) in <module:Logging>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications.rb:164:in `block in instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications/instrumenter.rb:21:in `instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications.rb:164:in `instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:23:in `block (3 levels) in <module:Logging>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:44:in `block in tag_logger'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/tagged_logging.rb:69:in `block in tagged'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/tagged_logging.rb:26:in `tagged'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/tagged_logging.rb:69:in `tagged'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:44:in `tag_logger'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:20:in `block (2 levels) in <module:Logging>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `instance_exec'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `block in make_lambda'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:285:in `block in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:447:in `block in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:101:in `__run_callbacks__'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:750:in `_run_perform_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:90:in `run_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:33:in `perform_now'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:22:in `block in execute'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:126:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/railtie.rb:26:in `block (4 levels) in <class:Railtie>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:85:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:68:in `block in wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:81:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:67:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/railtie.rb:25:in `block (3 levels) in <class:Railtie>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `instance_exec'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `block in make_lambda'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:285:in `block in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:447:in `block in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:101:in `__run_callbacks__'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:750:in `_run_execute_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:90:in `run_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:20:in `execute'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/queue_adapters/sidekiq_adapter.rb:40:in `perform'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:199:in `execute_job'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:170:in `block (2 levels) in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/middleware/chain.rb:128:in `block in invoke'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/middleware/chain.rb:133:in `invoke'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:169:in `block in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:141:in `block (6 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/job_retry.rb:97:in `local'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:140:in `block (5 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/rails.rb:42:in `block in call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:85:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:68:in `block in wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:85:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:67:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/rails.rb:41:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:136:in `block (4 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:215:in `stats'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:131:in `block (3 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/job_logger.rb:7:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:130:in `block (2 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/job_retry.rb:72:in `global'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:129:in `block in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/logging.rb:44:in `with_context'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/logging.rb:38:in `with_job_hash_context'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:128:in `dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:168:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:85:in `process_one'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:73:in `run'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/util.rb:16:in `watchdog'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/util.rb:25:in `block in safe_thread'
2018-07-25T19:12:10.361Z 14838 TID-gmufocl3w SendMailsJob JID-3d78d3c81c6b554c4c3d7bbc INFO: start
2018-07-25T19:12:10.417Z 14838 TID-gmufocl3w SendMailsJob JID-3d78d3c81c6b554c4c3d7bbc INFO: fail: 0.056 sec
2018-07-25T19:12:10.417Z 14838 TID-gmufocl3w WARN: {"context":"Job raised exception","job":{"class":"ActiveJob::QueueAdapters::SidekiqAdapter::JobWrapper","wrapped":"SendMailsJob","queue":"default","args":[{"job_class":"SendMailsJob","job_id":"69e14b5f-559a-4ffc-bde6-40babb6d779a","queue_name":"default","priority":null,"arguments":[{"_aj_globalid":"gid://book-store/Book/7"}],"locale":"en"}],"retry":true,"jid":"3d78d3c81c6b554c4c3d7bbc","created_at":1532545633.6385205,"enqueued_at":1532545930.3595548,"error_message":"undefined method `url' for nil:NilClass\nDid you mean?  URI","error_class":"NoMethodError","failed_at":1532545634.8540719,"retry_count":4,"retried_at":1532545930.4097102},"jobstr":"{\"class\":\"ActiveJob::QueueAdapters::SidekiqAdapter::JobWrapper\",\"wrapped\":\"SendMailsJob\",\"queue\":\"default\",\"args\":[{\"job_class\":\"SendMailsJob\",\"job_id\":\"69e14b5f-559a-4ffc-bde6-40babb6d779a\",\"queue_name\":\"default\",\"priority\":null,\"arguments\":[{\"_aj_globalid\":\"gid://book-store/Book/7\"}],\"locale\":\"en\"}],\"retry\":true,\"jid\":\"3d78d3c81c6b554c4c3d7bbc\",\"created_at\":1532545633.6385205,\"enqueued_at\":1532545930.3595548,\"error_message\":\"undefined method `url' for nil:NilClass\\nDid you mean?  URI\",\"error_class\":\"NoMethodError\",\"failed_at\":1532545634.8540719,\"retry_count\":3,\"retried_at\":1532545762.2024353}"}
2018-07-25T19:12:10.417Z 14838 TID-gmufocl3w WARN: NoMethodError: undefined method `url' for nil:NilClass
Did you mean?  URI
2018-07-25T19:12:10.418Z 14838 TID-gmufocl3w WARN: /home/deploy/www/app/mailers/book_mailer.rb:8:in `send_book'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionpack-5.0.1/lib/abstract_controller/base.rb:188:in `process_action'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionpack-5.0.1/lib/abstract_controller/callbacks.rb:20:in `block in process_action'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:97:in `__run_callbacks__'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:90:in `run_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionpack-5.0.1/lib/abstract_controller/callbacks.rb:19:in `process_action'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionpack-5.0.1/lib/abstract_controller/base.rb:126:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/rescuable.rb:23:in `block in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/rescuable.rb:15:in `handle_exceptions'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/rescuable.rb:22:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionview-5.0.1/lib/action_view/rendering.rb:30:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/base.rb:595:in `block in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications.rb:164:in `block in instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications/instrumenter.rb:21:in `instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications.rb:164:in `instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/base.rb:594:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/message_delivery.rb:105:in `block in processed_mailer'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/message_delivery.rb:104:in `tap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/message_delivery.rb:104:in `processed_mailer'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/message_delivery.rb:27:in `__getobj__'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/2.3.0/delegate.rb:80:in `method_missing'
/home/deploy/www/app/jobs/send_mails_job.rb:6:in `perform'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:34:in `block in perform_now'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:126:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/i18n-0.8.0/lib/i18n.rb:257:in `with_locale'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/translation.rb:7:in `block (2 levels) in <module:Translation>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `instance_exec'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `block in make_lambda'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:285:in `block in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:447:in `block in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:24:in `block (4 levels) in <module:Logging>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications.rb:164:in `block in instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications/instrumenter.rb:21:in `instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications.rb:164:in `instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:23:in `block (3 levels) in <module:Logging>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:44:in `block in tag_logger'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/tagged_logging.rb:69:in `block in tagged'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/tagged_logging.rb:26:in `tagged'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/tagged_logging.rb:69:in `tagged'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:44:in `tag_logger'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:20:in `block (2 levels) in <module:Logging>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `instance_exec'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `block in make_lambda'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:285:in `block in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:447:in `block in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:101:in `__run_callbacks__'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:750:in `_run_perform_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:90:in `run_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:33:in `perform_now'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:22:in `block in execute'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:126:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/railtie.rb:26:in `block (4 levels) in <class:Railtie>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:85:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:68:in `block in wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:81:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:67:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/railtie.rb:25:in `block (3 levels) in <class:Railtie>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `instance_exec'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `block in make_lambda'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:285:in `block in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:447:in `block in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:101:in `__run_callbacks__'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:750:in `_run_execute_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:90:in `run_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:20:in `execute'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/queue_adapters/sidekiq_adapter.rb:40:in `perform'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:199:in `execute_job'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:170:in `block (2 levels) in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/middleware/chain.rb:128:in `block in invoke'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/middleware/chain.rb:133:in `invoke'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:169:in `block in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:141:in `block (6 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/job_retry.rb:97:in `local'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:140:in `block (5 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/rails.rb:42:in `block in call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:85:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:68:in `block in wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:85:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:67:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/rails.rb:41:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:136:in `block (4 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:215:in `stats'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:131:in `block (3 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/job_logger.rb:7:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:130:in `block (2 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/job_retry.rb:72:in `global'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:129:in `block in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/logging.rb:44:in `with_context'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/logging.rb:38:in `with_job_hash_context'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:128:in `dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:168:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:85:in `process_one'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:73:in `run'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/util.rb:16:in `watchdog'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/util.rb:25:in `block in safe_thread'
2018-07-25T19:17:20.487Z 14838 TID-gmufpdd4c SendMailsJob JID-3d78d3c81c6b554c4c3d7bbc INFO: start
2018-07-25T19:17:20.530Z 14838 TID-gmufpdd4c SendMailsJob JID-3d78d3c81c6b554c4c3d7bbc INFO: fail: 0.043 sec
2018-07-25T19:17:20.530Z 14838 TID-gmufpdd4c WARN: {"context":"Job raised exception","job":{"class":"ActiveJob::QueueAdapters::SidekiqAdapter::JobWrapper","wrapped":"SendMailsJob","queue":"default","args":[{"job_class":"SendMailsJob","job_id":"69e14b5f-559a-4ffc-bde6-40babb6d779a","queue_name":"default","priority":null,"arguments":[{"_aj_globalid":"gid://book-store/Book/7"}],"locale":"en"}],"retry":true,"jid":"3d78d3c81c6b554c4c3d7bbc","created_at":1532545633.6385205,"enqueued_at":1532546240.4846303,"error_message":"undefined method `url' for nil:NilClass\nDid you mean?  URI","error_class":"NoMethodError","failed_at":1532545634.8540719,"retry_count":5,"retried_at":1532546240.529022},"jobstr":"{\"class\":\"ActiveJob::QueueAdapters::SidekiqAdapter::JobWrapper\",\"wrapped\":\"SendMailsJob\",\"queue\":\"default\",\"args\":[{\"job_class\":\"SendMailsJob\",\"job_id\":\"69e14b5f-559a-4ffc-bde6-40babb6d779a\",\"queue_name\":\"default\",\"priority\":null,\"arguments\":[{\"_aj_globalid\":\"gid://book-store/Book/7\"}],\"locale\":\"en\"}],\"retry\":true,\"jid\":\"3d78d3c81c6b554c4c3d7bbc\",\"created_at\":1532545633.6385205,\"enqueued_at\":1532546240.4846303,\"error_message\":\"undefined method `url' for nil:NilClass\\nDid you mean?  URI\",\"error_class\":\"NoMethodError\",\"failed_at\":1532545634.8540719,\"retry_count\":4,\"retried_at\":1532545930.4097102}"}
2018-07-25T19:17:20.530Z 14838 TID-gmufpdd4c WARN: NoMethodError: undefined method `url' for nil:NilClass
Did you mean?  URI
2018-07-25T19:17:20.530Z 14838 TID-gmufpdd4c WARN: /home/deploy/www/app/mailers/book_mailer.rb:8:in `send_book'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionpack-5.0.1/lib/abstract_controller/base.rb:188:in `process_action'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionpack-5.0.1/lib/abstract_controller/callbacks.rb:20:in `block in process_action'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:97:in `__run_callbacks__'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:90:in `run_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionpack-5.0.1/lib/abstract_controller/callbacks.rb:19:in `process_action'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionpack-5.0.1/lib/abstract_controller/base.rb:126:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/rescuable.rb:23:in `block in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/rescuable.rb:15:in `handle_exceptions'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/rescuable.rb:22:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionview-5.0.1/lib/action_view/rendering.rb:30:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/base.rb:595:in `block in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications.rb:164:in `block in instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications/instrumenter.rb:21:in `instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications.rb:164:in `instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/base.rb:594:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/message_delivery.rb:105:in `block in processed_mailer'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/message_delivery.rb:104:in `tap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/message_delivery.rb:104:in `processed_mailer'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/message_delivery.rb:27:in `__getobj__'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/2.3.0/delegate.rb:80:in `method_missing'
/home/deploy/www/app/jobs/send_mails_job.rb:6:in `perform'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:34:in `block in perform_now'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:126:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/i18n-0.8.0/lib/i18n.rb:257:in `with_locale'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/translation.rb:7:in `block (2 levels) in <module:Translation>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `instance_exec'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `block in make_lambda'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:285:in `block in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:447:in `block in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:24:in `block (4 levels) in <module:Logging>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications.rb:164:in `block in instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications/instrumenter.rb:21:in `instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications.rb:164:in `instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:23:in `block (3 levels) in <module:Logging>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:44:in `block in tag_logger'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/tagged_logging.rb:69:in `block in tagged'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/tagged_logging.rb:26:in `tagged'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/tagged_logging.rb:69:in `tagged'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:44:in `tag_logger'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:20:in `block (2 levels) in <module:Logging>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `instance_exec'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `block in make_lambda'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:285:in `block in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:447:in `block in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:101:in `__run_callbacks__'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:750:in `_run_perform_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:90:in `run_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:33:in `perform_now'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:22:in `block in execute'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:126:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/railtie.rb:26:in `block (4 levels) in <class:Railtie>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:85:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:68:in `block in wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:81:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:67:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/railtie.rb:25:in `block (3 levels) in <class:Railtie>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `instance_exec'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `block in make_lambda'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:285:in `block in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:447:in `block in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:101:in `__run_callbacks__'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:750:in `_run_execute_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:90:in `run_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:20:in `execute'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/queue_adapters/sidekiq_adapter.rb:40:in `perform'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:199:in `execute_job'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:170:in `block (2 levels) in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/middleware/chain.rb:128:in `block in invoke'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/middleware/chain.rb:133:in `invoke'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:169:in `block in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:141:in `block (6 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/job_retry.rb:97:in `local'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:140:in `block (5 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/rails.rb:42:in `block in call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:85:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:68:in `block in wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:85:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:67:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/rails.rb:41:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:136:in `block (4 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:215:in `stats'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:131:in `block (3 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/job_logger.rb:7:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:130:in `block (2 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/job_retry.rb:72:in `global'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:129:in `block in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/logging.rb:44:in `with_context'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/logging.rb:38:in `with_job_hash_context'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:128:in `dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:168:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:85:in `process_one'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:73:in `run'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/util.rb:16:in `watchdog'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/util.rb:25:in `block in safe_thread'
2018-07-25T19:30:06.239Z 14838 TID-gmufp9inw SendMailsJob JID-3d78d3c81c6b554c4c3d7bbc INFO: start
2018-07-25T19:30:06.286Z 14838 TID-gmufp9inw SendMailsJob JID-3d78d3c81c6b554c4c3d7bbc INFO: fail: 0.047 sec
2018-07-25T19:30:06.287Z 14838 TID-gmufp9inw WARN: {"context":"Job raised exception","job":{"class":"ActiveJob::QueueAdapters::SidekiqAdapter::JobWrapper","wrapped":"SendMailsJob","queue":"default","args":[{"job_class":"SendMailsJob","job_id":"69e14b5f-559a-4ffc-bde6-40babb6d779a","queue_name":"default","priority":null,"arguments":[{"_aj_globalid":"gid://book-store/Book/7"}],"locale":"en"}],"retry":true,"jid":"3d78d3c81c6b554c4c3d7bbc","created_at":1532545633.6385205,"enqueued_at":1532547006.2385228,"error_message":"undefined method `url' for nil:NilClass\nDid you mean?  URI","error_class":"NoMethodError","failed_at":1532545634.8540719,"retry_count":6,"retried_at":1532547006.285776},"jobstr":"{\"class\":\"ActiveJob::QueueAdapters::SidekiqAdapter::JobWrapper\",\"wrapped\":\"SendMailsJob\",\"queue\":\"default\",\"args\":[{\"job_class\":\"SendMailsJob\",\"job_id\":\"69e14b5f-559a-4ffc-bde6-40babb6d779a\",\"queue_name\":\"default\",\"priority\":null,\"arguments\":[{\"_aj_globalid\":\"gid://book-store/Book/7\"}],\"locale\":\"en\"}],\"retry\":true,\"jid\":\"3d78d3c81c6b554c4c3d7bbc\",\"created_at\":1532545633.6385205,\"enqueued_at\":1532547006.2385228,\"error_message\":\"undefined method `url' for nil:NilClass\\nDid you mean?  URI\",\"error_class\":\"NoMethodError\",\"failed_at\":1532545634.8540719,\"retry_count\":5,\"retried_at\":1532546240.529022}"}
2018-07-25T19:30:06.287Z 14838 TID-gmufp9inw WARN: NoMethodError: undefined method `url' for nil:NilClass
Did you mean?  URI
2018-07-25T19:30:06.287Z 14838 TID-gmufp9inw WARN: /home/deploy/www/app/mailers/book_mailer.rb:8:in `send_book'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionpack-5.0.1/lib/abstract_controller/base.rb:188:in `process_action'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionpack-5.0.1/lib/abstract_controller/callbacks.rb:20:in `block in process_action'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:97:in `__run_callbacks__'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:90:in `run_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionpack-5.0.1/lib/abstract_controller/callbacks.rb:19:in `process_action'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionpack-5.0.1/lib/abstract_controller/base.rb:126:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/rescuable.rb:23:in `block in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/rescuable.rb:15:in `handle_exceptions'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/rescuable.rb:22:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionview-5.0.1/lib/action_view/rendering.rb:30:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/base.rb:595:in `block in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications.rb:164:in `block in instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications/instrumenter.rb:21:in `instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications.rb:164:in `instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/base.rb:594:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/message_delivery.rb:105:in `block in processed_mailer'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/message_delivery.rb:104:in `tap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/message_delivery.rb:104:in `processed_mailer'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/message_delivery.rb:27:in `__getobj__'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/2.3.0/delegate.rb:80:in `method_missing'
/home/deploy/www/app/jobs/send_mails_job.rb:6:in `perform'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:34:in `block in perform_now'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:126:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/i18n-0.8.0/lib/i18n.rb:257:in `with_locale'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/translation.rb:7:in `block (2 levels) in <module:Translation>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `instance_exec'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `block in make_lambda'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:285:in `block in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:447:in `block in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:24:in `block (4 levels) in <module:Logging>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications.rb:164:in `block in instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications/instrumenter.rb:21:in `instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications.rb:164:in `instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:23:in `block (3 levels) in <module:Logging>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:44:in `block in tag_logger'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/tagged_logging.rb:69:in `block in tagged'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/tagged_logging.rb:26:in `tagged'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/tagged_logging.rb:69:in `tagged'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:44:in `tag_logger'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:20:in `block (2 levels) in <module:Logging>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `instance_exec'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `block in make_lambda'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:285:in `block in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:447:in `block in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:101:in `__run_callbacks__'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:750:in `_run_perform_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:90:in `run_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:33:in `perform_now'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:22:in `block in execute'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:126:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/railtie.rb:26:in `block (4 levels) in <class:Railtie>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:85:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:68:in `block in wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:81:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:67:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/railtie.rb:25:in `block (3 levels) in <class:Railtie>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `instance_exec'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `block in make_lambda'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:285:in `block in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:447:in `block in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:101:in `__run_callbacks__'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:750:in `_run_execute_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:90:in `run_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:20:in `execute'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/queue_adapters/sidekiq_adapter.rb:40:in `perform'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:199:in `execute_job'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:170:in `block (2 levels) in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/middleware/chain.rb:128:in `block in invoke'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/middleware/chain.rb:133:in `invoke'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:169:in `block in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:141:in `block (6 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/job_retry.rb:97:in `local'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:140:in `block (5 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/rails.rb:42:in `block in call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:85:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:68:in `block in wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:85:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:67:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/rails.rb:41:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:136:in `block (4 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:215:in `stats'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:131:in `block (3 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/job_logger.rb:7:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:130:in `block (2 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/job_retry.rb:72:in `global'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:129:in `block in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/logging.rb:44:in `with_context'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/logging.rb:38:in `with_job_hash_context'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:128:in `dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:168:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:85:in `process_one'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:73:in `run'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/util.rb:16:in `watchdog'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/util.rb:25:in `block in safe_thread'
2018-07-25T19:54:32.524Z 14838 TID-gmuflvl6s SendMailsJob JID-3d78d3c81c6b554c4c3d7bbc INFO: start
2018-07-25T19:54:32.573Z 14838 TID-gmuflvl6s SendMailsJob JID-3d78d3c81c6b554c4c3d7bbc INFO: fail: 0.049 sec
2018-07-25T19:54:32.574Z 14838 TID-gmuflvl6s WARN: {"context":"Job raised exception","job":{"class":"ActiveJob::QueueAdapters::SidekiqAdapter::JobWrapper","wrapped":"SendMailsJob","queue":"default","args":[{"job_class":"SendMailsJob","job_id":"69e14b5f-559a-4ffc-bde6-40babb6d779a","queue_name":"default","priority":null,"arguments":[{"_aj_globalid":"gid://book-store/Book/7"}],"locale":"en"}],"retry":true,"jid":"3d78d3c81c6b554c4c3d7bbc","created_at":1532545633.6385205,"enqueued_at":1532548472.5232618,"error_message":"undefined method `url' for nil:NilClass\nDid you mean?  URI","error_class":"NoMethodError","failed_at":1532545634.8540719,"retry_count":7,"retried_at":1532548472.5700216},"jobstr":"{\"class\":\"ActiveJob::QueueAdapters::SidekiqAdapter::JobWrapper\",\"wrapped\":\"SendMailsJob\",\"queue\":\"default\",\"args\":[{\"job_class\":\"SendMailsJob\",\"job_id\":\"69e14b5f-559a-4ffc-bde6-40babb6d779a\",\"queue_name\":\"default\",\"priority\":null,\"arguments\":[{\"_aj_globalid\":\"gid://book-store/Book/7\"}],\"locale\":\"en\"}],\"retry\":true,\"jid\":\"3d78d3c81c6b554c4c3d7bbc\",\"created_at\":1532545633.6385205,\"enqueued_at\":1532548472.5232618,\"error_message\":\"undefined method `url' for nil:NilClass\\nDid you mean?  URI\",\"error_class\":\"NoMethodError\",\"failed_at\":1532545634.8540719,\"retry_count\":6,\"retried_at\":1532547006.285776}"}
2018-07-25T19:54:32.574Z 14838 TID-gmuflvl6s WARN: NoMethodError: undefined method `url' for nil:NilClass
Did you mean?  URI
2018-07-25T19:54:32.578Z 14838 TID-gmuflvl6s WARN: /home/deploy/www/app/mailers/book_mailer.rb:8:in `send_book'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionpack-5.0.1/lib/abstract_controller/base.rb:188:in `process_action'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionpack-5.0.1/lib/abstract_controller/callbacks.rb:20:in `block in process_action'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:97:in `__run_callbacks__'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:90:in `run_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionpack-5.0.1/lib/abstract_controller/callbacks.rb:19:in `process_action'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionpack-5.0.1/lib/abstract_controller/base.rb:126:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/rescuable.rb:23:in `block in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/rescuable.rb:15:in `handle_exceptions'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/rescuable.rb:22:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionview-5.0.1/lib/action_view/rendering.rb:30:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/base.rb:595:in `block in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications.rb:164:in `block in instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications/instrumenter.rb:21:in `instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications.rb:164:in `instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/base.rb:594:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/message_delivery.rb:105:in `block in processed_mailer'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/message_delivery.rb:104:in `tap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/message_delivery.rb:104:in `processed_mailer'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/message_delivery.rb:27:in `__getobj__'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/2.3.0/delegate.rb:80:in `method_missing'
/home/deploy/www/app/jobs/send_mails_job.rb:6:in `perform'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:34:in `block in perform_now'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:126:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/i18n-0.8.0/lib/i18n.rb:257:in `with_locale'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/translation.rb:7:in `block (2 levels) in <module:Translation>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `instance_exec'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `block in make_lambda'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:285:in `block in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:447:in `block in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:24:in `block (4 levels) in <module:Logging>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications.rb:164:in `block in instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications/instrumenter.rb:21:in `instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications.rb:164:in `instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:23:in `block (3 levels) in <module:Logging>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:44:in `block in tag_logger'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/tagged_logging.rb:69:in `block in tagged'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/tagged_logging.rb:26:in `tagged'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/tagged_logging.rb:69:in `tagged'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:44:in `tag_logger'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:20:in `block (2 levels) in <module:Logging>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `instance_exec'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `block in make_lambda'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:285:in `block in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:447:in `block in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:101:in `__run_callbacks__'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:750:in `_run_perform_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:90:in `run_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:33:in `perform_now'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:22:in `block in execute'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:126:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/railtie.rb:26:in `block (4 levels) in <class:Railtie>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:85:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:68:in `block in wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:81:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:67:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/railtie.rb:25:in `block (3 levels) in <class:Railtie>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `instance_exec'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `block in make_lambda'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:285:in `block in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:447:in `block in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:101:in `__run_callbacks__'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:750:in `_run_execute_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:90:in `run_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:20:in `execute'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/queue_adapters/sidekiq_adapter.rb:40:in `perform'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:199:in `execute_job'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:170:in `block (2 levels) in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/middleware/chain.rb:128:in `block in invoke'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/middleware/chain.rb:133:in `invoke'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:169:in `block in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:141:in `block (6 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/job_retry.rb:97:in `local'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:140:in `block (5 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/rails.rb:42:in `block in call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:85:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:68:in `block in wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:85:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:67:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/rails.rb:41:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:136:in `block (4 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:215:in `stats'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:131:in `block (3 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/job_logger.rb:7:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:130:in `block (2 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/job_retry.rb:72:in `global'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:129:in `block in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/logging.rb:44:in `with_context'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/logging.rb:38:in `with_job_hash_context'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:128:in `dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:168:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:85:in `process_one'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:73:in `run'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/util.rb:16:in `watchdog'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/util.rb:25:in `block in safe_thread'
2018-07-25T20:36:22.011Z 14838 TID-gmuf2pt4c SendMailsJob JID-3d78d3c81c6b554c4c3d7bbc INFO: start
2018-07-25T20:36:22.067Z 14838 TID-gmuf2pt4c SendMailsJob JID-3d78d3c81c6b554c4c3d7bbc INFO: fail: 0.056 sec
2018-07-25T20:36:22.067Z 14838 TID-gmuf2pt4c WARN: {"context":"Job raised exception","job":{"class":"ActiveJob::QueueAdapters::SidekiqAdapter::JobWrapper","wrapped":"SendMailsJob","queue":"default","args":[{"job_class":"SendMailsJob","job_id":"69e14b5f-559a-4ffc-bde6-40babb6d779a","queue_name":"default","priority":null,"arguments":[{"_aj_globalid":"gid://book-store/Book/7"}],"locale":"en"}],"retry":true,"jid":"3d78d3c81c6b554c4c3d7bbc","created_at":1532545633.6385205,"enqueued_at":1532550982.0043669,"error_message":"undefined method `url' for nil:NilClass\nDid you mean?  URI","error_class":"NoMethodError","failed_at":1532545634.8540719,"retry_count":8,"retried_at":1532550982.0655262},"jobstr":"{\"class\":\"ActiveJob::QueueAdapters::SidekiqAdapter::JobWrapper\",\"wrapped\":\"SendMailsJob\",\"queue\":\"default\",\"args\":[{\"job_class\":\"SendMailsJob\",\"job_id\":\"69e14b5f-559a-4ffc-bde6-40babb6d779a\",\"queue_name\":\"default\",\"priority\":null,\"arguments\":[{\"_aj_globalid\":\"gid://book-store/Book/7\"}],\"locale\":\"en\"}],\"retry\":true,\"jid\":\"3d78d3c81c6b554c4c3d7bbc\",\"created_at\":1532545633.6385205,\"enqueued_at\":1532550982.0043669,\"error_message\":\"undefined method `url' for nil:NilClass\\nDid you mean?  URI\",\"error_class\":\"NoMethodError\",\"failed_at\":1532545634.8540719,\"retry_count\":7,\"retried_at\":1532548472.5700216}"}
2018-07-25T20:36:22.067Z 14838 TID-gmuf2pt4c WARN: NoMethodError: undefined method `url' for nil:NilClass
Did you mean?  URI
2018-07-25T20:36:22.068Z 14838 TID-gmuf2pt4c WARN: /home/deploy/www/app/mailers/book_mailer.rb:8:in `send_book'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionpack-5.0.1/lib/abstract_controller/base.rb:188:in `process_action'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionpack-5.0.1/lib/abstract_controller/callbacks.rb:20:in `block in process_action'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:97:in `__run_callbacks__'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:90:in `run_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionpack-5.0.1/lib/abstract_controller/callbacks.rb:19:in `process_action'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionpack-5.0.1/lib/abstract_controller/base.rb:126:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/rescuable.rb:23:in `block in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/rescuable.rb:15:in `handle_exceptions'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/rescuable.rb:22:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionview-5.0.1/lib/action_view/rendering.rb:30:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/base.rb:595:in `block in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications.rb:164:in `block in instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications/instrumenter.rb:21:in `instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications.rb:164:in `instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/base.rb:594:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/message_delivery.rb:105:in `block in processed_mailer'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/message_delivery.rb:104:in `tap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/message_delivery.rb:104:in `processed_mailer'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/message_delivery.rb:27:in `__getobj__'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/2.3.0/delegate.rb:80:in `method_missing'
/home/deploy/www/app/jobs/send_mails_job.rb:6:in `perform'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:34:in `block in perform_now'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:126:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/i18n-0.8.0/lib/i18n.rb:257:in `with_locale'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/translation.rb:7:in `block (2 levels) in <module:Translation>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `instance_exec'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `block in make_lambda'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:285:in `block in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:447:in `block in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:24:in `block (4 levels) in <module:Logging>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications.rb:164:in `block in instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications/instrumenter.rb:21:in `instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications.rb:164:in `instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:23:in `block (3 levels) in <module:Logging>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:44:in `block in tag_logger'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/tagged_logging.rb:69:in `block in tagged'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/tagged_logging.rb:26:in `tagged'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/tagged_logging.rb:69:in `tagged'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:44:in `tag_logger'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:20:in `block (2 levels) in <module:Logging>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `instance_exec'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `block in make_lambda'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:285:in `block in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:447:in `block in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:101:in `__run_callbacks__'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:750:in `_run_perform_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:90:in `run_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:33:in `perform_now'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:22:in `block in execute'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:126:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/railtie.rb:26:in `block (4 levels) in <class:Railtie>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:85:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:68:in `block in wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:81:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:67:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/railtie.rb:25:in `block (3 levels) in <class:Railtie>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `instance_exec'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `block in make_lambda'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:285:in `block in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:447:in `block in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:101:in `__run_callbacks__'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:750:in `_run_execute_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:90:in `run_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:20:in `execute'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/queue_adapters/sidekiq_adapter.rb:40:in `perform'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:199:in `execute_job'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:170:in `block (2 levels) in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/middleware/chain.rb:128:in `block in invoke'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/middleware/chain.rb:133:in `invoke'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:169:in `block in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:141:in `block (6 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/job_retry.rb:97:in `local'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:140:in `block (5 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/rails.rb:42:in `block in call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:85:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:68:in `block in wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:85:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:67:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/rails.rb:41:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:136:in `block (4 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:215:in `stats'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:131:in `block (3 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/job_logger.rb:7:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:130:in `block (2 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/job_retry.rb:72:in `global'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:129:in `block in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/logging.rb:44:in `with_context'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/logging.rb:38:in `with_job_hash_context'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:128:in `dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:168:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:85:in `process_one'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:73:in `run'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/util.rb:16:in `watchdog'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/util.rb:25:in `block in safe_thread'
2018-07-25T21:46:23.793Z 14838 TID-gmufs20js SendMailsJob JID-3d78d3c81c6b554c4c3d7bbc INFO: start
2018-07-25T21:46:23.854Z 14838 TID-gmufs20js SendMailsJob JID-3d78d3c81c6b554c4c3d7bbc INFO: fail: 0.06 sec
2018-07-25T21:46:23.854Z 14838 TID-gmufs20js WARN: {"context":"Job raised exception","job":{"class":"ActiveJob::QueueAdapters::SidekiqAdapter::JobWrapper","wrapped":"SendMailsJob","queue":"default","args":[{"job_class":"SendMailsJob","job_id":"69e14b5f-559a-4ffc-bde6-40babb6d779a","queue_name":"default","priority":null,"arguments":[{"_aj_globalid":"gid://book-store/Book/7"}],"locale":"en"}],"retry":true,"jid":"3d78d3c81c6b554c4c3d7bbc","created_at":1532545633.6385205,"enqueued_at":1532555183.7923942,"error_message":"undefined method `url' for nil:NilClass\nDid you mean?  URI","error_class":"NoMethodError","failed_at":1532545634.8540719,"retry_count":9,"retried_at":1532555183.8509943},"jobstr":"{\"class\":\"ActiveJob::QueueAdapters::SidekiqAdapter::JobWrapper\",\"wrapped\":\"SendMailsJob\",\"queue\":\"default\",\"args\":[{\"job_class\":\"SendMailsJob\",\"job_id\":\"69e14b5f-559a-4ffc-bde6-40babb6d779a\",\"queue_name\":\"default\",\"priority\":null,\"arguments\":[{\"_aj_globalid\":\"gid://book-store/Book/7\"}],\"locale\":\"en\"}],\"retry\":true,\"jid\":\"3d78d3c81c6b554c4c3d7bbc\",\"created_at\":1532545633.6385205,\"enqueued_at\":1532555183.7923942,\"error_message\":\"undefined method `url' for nil:NilClass\\nDid you mean?  URI\",\"error_class\":\"NoMethodError\",\"failed_at\":1532545634.8540719,\"retry_count\":8,\"retried_at\":1532550982.0655262}"}
2018-07-25T21:46:23.860Z 14838 TID-gmufs20js WARN: NoMethodError: undefined method `url' for nil:NilClass
Did you mean?  URI
2018-07-25T21:46:23.860Z 14838 TID-gmufs20js WARN: /home/deploy/www/app/mailers/book_mailer.rb:8:in `send_book'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionpack-5.0.1/lib/abstract_controller/base.rb:188:in `process_action'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionpack-5.0.1/lib/abstract_controller/callbacks.rb:20:in `block in process_action'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:97:in `__run_callbacks__'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:90:in `run_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionpack-5.0.1/lib/abstract_controller/callbacks.rb:19:in `process_action'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionpack-5.0.1/lib/abstract_controller/base.rb:126:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/rescuable.rb:23:in `block in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/rescuable.rb:15:in `handle_exceptions'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/rescuable.rb:22:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionview-5.0.1/lib/action_view/rendering.rb:30:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/base.rb:595:in `block in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications.rb:164:in `block in instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications/instrumenter.rb:21:in `instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications.rb:164:in `instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/base.rb:594:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/message_delivery.rb:105:in `block in processed_mailer'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/message_delivery.rb:104:in `tap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/message_delivery.rb:104:in `processed_mailer'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/message_delivery.rb:27:in `__getobj__'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/2.3.0/delegate.rb:80:in `method_missing'
/home/deploy/www/app/jobs/send_mails_job.rb:6:in `perform'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:34:in `block in perform_now'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:126:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/i18n-0.8.0/lib/i18n.rb:257:in `with_locale'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/translation.rb:7:in `block (2 levels) in <module:Translation>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `instance_exec'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `block in make_lambda'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:285:in `block in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:447:in `block in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:24:in `block (4 levels) in <module:Logging>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications.rb:164:in `block in instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications/instrumenter.rb:21:in `instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications.rb:164:in `instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:23:in `block (3 levels) in <module:Logging>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:44:in `block in tag_logger'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/tagged_logging.rb:69:in `block in tagged'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/tagged_logging.rb:26:in `tagged'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/tagged_logging.rb:69:in `tagged'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:44:in `tag_logger'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:20:in `block (2 levels) in <module:Logging>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `instance_exec'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `block in make_lambda'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:285:in `block in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:447:in `block in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:101:in `__run_callbacks__'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:750:in `_run_perform_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:90:in `run_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:33:in `perform_now'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:22:in `block in execute'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:126:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/railtie.rb:26:in `block (4 levels) in <class:Railtie>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:85:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:68:in `block in wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:81:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:67:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/railtie.rb:25:in `block (3 levels) in <class:Railtie>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `instance_exec'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `block in make_lambda'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:285:in `block in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:447:in `block in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:101:in `__run_callbacks__'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:750:in `_run_execute_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:90:in `run_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:20:in `execute'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/queue_adapters/sidekiq_adapter.rb:40:in `perform'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:199:in `execute_job'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:170:in `block (2 levels) in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/middleware/chain.rb:128:in `block in invoke'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/middleware/chain.rb:133:in `invoke'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:169:in `block in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:141:in `block (6 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/job_retry.rb:97:in `local'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:140:in `block (5 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/rails.rb:42:in `block in call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:85:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:68:in `block in wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:85:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:67:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/rails.rb:41:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:136:in `block (4 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:215:in `stats'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:131:in `block (3 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/job_logger.rb:7:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:130:in `block (2 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/job_retry.rb:72:in `global'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:129:in `block in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/logging.rb:44:in `with_context'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/logging.rb:38:in `with_job_hash_context'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:128:in `dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:168:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:85:in `process_one'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:73:in `run'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/util.rb:16:in `watchdog'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/util.rb:25:in `block in safe_thread'
2018-07-25T23:40:50.309Z 14838 TID-gmufrk8i4 SendMailsJob JID-3d78d3c81c6b554c4c3d7bbc INFO: start
2018-07-25T23:40:50.385Z 14838 TID-gmufrk8i4 SendMailsJob JID-3d78d3c81c6b554c4c3d7bbc INFO: fail: 0.076 sec
2018-07-25T23:40:50.386Z 14838 TID-gmufrk8i4 WARN: {"context":"Job raised exception","job":{"class":"ActiveJob::QueueAdapters::SidekiqAdapter::JobWrapper","wrapped":"SendMailsJob","queue":"default","args":[{"job_class":"SendMailsJob","job_id":"69e14b5f-559a-4ffc-bde6-40babb6d779a","queue_name":"default","priority":null,"arguments":[{"_aj_globalid":"gid://book-store/Book/7"}],"locale":"en"}],"retry":true,"jid":"3d78d3c81c6b554c4c3d7bbc","created_at":1532545633.6385205,"enqueued_at":1532562050.3062928,"error_message":"undefined method `url' for nil:NilClass\nDid you mean?  URI","error_class":"NoMethodError","failed_at":1532545634.8540719,"retry_count":10,"retried_at":1532562050.3769748},"jobstr":"{\"class\":\"ActiveJob::QueueAdapters::SidekiqAdapter::JobWrapper\",\"wrapped\":\"SendMailsJob\",\"queue\":\"default\",\"args\":[{\"job_class\":\"SendMailsJob\",\"job_id\":\"69e14b5f-559a-4ffc-bde6-40babb6d779a\",\"queue_name\":\"default\",\"priority\":null,\"arguments\":[{\"_aj_globalid\":\"gid://book-store/Book/7\"}],\"locale\":\"en\"}],\"retry\":true,\"jid\":\"3d78d3c81c6b554c4c3d7bbc\",\"created_at\":1532545633.6385205,\"enqueued_at\":1532562050.3062928,\"error_message\":\"undefined method `url' for nil:NilClass\\nDid you mean?  URI\",\"error_class\":\"NoMethodError\",\"failed_at\":1532545634.8540719,\"retry_count\":9,\"retried_at\":1532555183.8509943}"}
2018-07-25T23:40:50.386Z 14838 TID-gmufrk8i4 WARN: NoMethodError: undefined method `url' for nil:NilClass
Did you mean?  URI
2018-07-25T23:40:50.387Z 14838 TID-gmufrk8i4 WARN: /home/deploy/www/app/mailers/book_mailer.rb:8:in `send_book'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionpack-5.0.1/lib/abstract_controller/base.rb:188:in `process_action'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionpack-5.0.1/lib/abstract_controller/callbacks.rb:20:in `block in process_action'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:97:in `__run_callbacks__'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:90:in `run_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionpack-5.0.1/lib/abstract_controller/callbacks.rb:19:in `process_action'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionpack-5.0.1/lib/abstract_controller/base.rb:126:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/rescuable.rb:23:in `block in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/rescuable.rb:15:in `handle_exceptions'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/rescuable.rb:22:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionview-5.0.1/lib/action_view/rendering.rb:30:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/base.rb:595:in `block in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications.rb:164:in `block in instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications/instrumenter.rb:21:in `instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications.rb:164:in `instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/base.rb:594:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/message_delivery.rb:105:in `block in processed_mailer'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/message_delivery.rb:104:in `tap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/message_delivery.rb:104:in `processed_mailer'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/message_delivery.rb:27:in `__getobj__'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/2.3.0/delegate.rb:80:in `method_missing'
/home/deploy/www/app/jobs/send_mails_job.rb:6:in `perform'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:34:in `block in perform_now'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:126:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/i18n-0.8.0/lib/i18n.rb:257:in `with_locale'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/translation.rb:7:in `block (2 levels) in <module:Translation>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `instance_exec'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `block in make_lambda'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:285:in `block in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:447:in `block in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:24:in `block (4 levels) in <module:Logging>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications.rb:164:in `block in instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications/instrumenter.rb:21:in `instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications.rb:164:in `instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:23:in `block (3 levels) in <module:Logging>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:44:in `block in tag_logger'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/tagged_logging.rb:69:in `block in tagged'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/tagged_logging.rb:26:in `tagged'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/tagged_logging.rb:69:in `tagged'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:44:in `tag_logger'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:20:in `block (2 levels) in <module:Logging>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `instance_exec'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `block in make_lambda'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:285:in `block in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:447:in `block in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:101:in `__run_callbacks__'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:750:in `_run_perform_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:90:in `run_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:33:in `perform_now'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:22:in `block in execute'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:126:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/railtie.rb:26:in `block (4 levels) in <class:Railtie>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:85:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:68:in `block in wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:81:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:67:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/railtie.rb:25:in `block (3 levels) in <class:Railtie>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `instance_exec'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `block in make_lambda'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:285:in `block in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:447:in `block in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:101:in `__run_callbacks__'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:750:in `_run_execute_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:90:in `run_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:20:in `execute'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/queue_adapters/sidekiq_adapter.rb:40:in `perform'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:199:in `execute_job'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:170:in `block (2 levels) in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/middleware/chain.rb:128:in `block in invoke'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/middleware/chain.rb:133:in `invoke'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:169:in `block in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:141:in `block (6 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/job_retry.rb:97:in `local'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:140:in `block (5 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/rails.rb:42:in `block in call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:85:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:68:in `block in wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:85:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:67:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/rails.rb:41:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:136:in `block (4 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:215:in `stats'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:131:in `block (3 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/job_logger.rb:7:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:130:in `block (2 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/job_retry.rb:72:in `global'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:129:in `block in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/logging.rb:44:in `with_context'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/logging.rb:38:in `with_job_hash_context'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:128:in `dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:168:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:85:in `process_one'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:73:in `run'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/util.rb:16:in `watchdog'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/util.rb:25:in `block in safe_thread'
2018-07-26T02:32:06.281Z 14838 TID-gmufliiqo SendMailsJob JID-3d78d3c81c6b554c4c3d7bbc INFO: start
2018-07-26T02:32:06.329Z 14838 TID-gmufliiqo SendMailsJob JID-3d78d3c81c6b554c4c3d7bbc INFO: fail: 0.048 sec
2018-07-26T02:32:06.333Z 14838 TID-gmufliiqo WARN: {"context":"Job raised exception","job":{"class":"ActiveJob::QueueAdapters::SidekiqAdapter::JobWrapper","wrapped":"SendMailsJob","queue":"default","args":[{"job_class":"SendMailsJob","job_id":"69e14b5f-559a-4ffc-bde6-40babb6d779a","queue_name":"default","priority":null,"arguments":[{"_aj_globalid":"gid://book-store/Book/7"}],"locale":"en"}],"retry":true,"jid":"3d78d3c81c6b554c4c3d7bbc","created_at":1532545633.6385205,"enqueued_at":1532572326.279768,"error_message":"undefined method `url' for nil:NilClass\nDid you mean?  URI","error_class":"NoMethodError","failed_at":1532545634.8540719,"retry_count":11,"retried_at":1532572326.3273795},"jobstr":"{\"class\":\"ActiveJob::QueueAdapters::SidekiqAdapter::JobWrapper\",\"wrapped\":\"SendMailsJob\",\"queue\":\"default\",\"args\":[{\"job_class\":\"SendMailsJob\",\"job_id\":\"69e14b5f-559a-4ffc-bde6-40babb6d779a\",\"queue_name\":\"default\",\"priority\":null,\"arguments\":[{\"_aj_globalid\":\"gid://book-store/Book/7\"}],\"locale\":\"en\"}],\"retry\":true,\"jid\":\"3d78d3c81c6b554c4c3d7bbc\",\"created_at\":1532545633.6385205,\"enqueued_at\":1532572326.279768,\"error_message\":\"undefined method `url' for nil:NilClass\\nDid you mean?  URI\",\"error_class\":\"NoMethodError\",\"failed_at\":1532545634.8540719,\"retry_count\":10,\"retried_at\":1532562050.3769748}"}
2018-07-26T02:32:06.335Z 14838 TID-gmufliiqo WARN: NoMethodError: undefined method `url' for nil:NilClass
Did you mean?  URI
2018-07-26T02:32:06.335Z 14838 TID-gmufliiqo WARN: /home/deploy/www/app/mailers/book_mailer.rb:8:in `send_book'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionpack-5.0.1/lib/abstract_controller/base.rb:188:in `process_action'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionpack-5.0.1/lib/abstract_controller/callbacks.rb:20:in `block in process_action'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:97:in `__run_callbacks__'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:90:in `run_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionpack-5.0.1/lib/abstract_controller/callbacks.rb:19:in `process_action'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionpack-5.0.1/lib/abstract_controller/base.rb:126:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/rescuable.rb:23:in `block in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/rescuable.rb:15:in `handle_exceptions'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/rescuable.rb:22:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionview-5.0.1/lib/action_view/rendering.rb:30:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/base.rb:595:in `block in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications.rb:164:in `block in instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications/instrumenter.rb:21:in `instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications.rb:164:in `instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/base.rb:594:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/message_delivery.rb:105:in `block in processed_mailer'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/message_delivery.rb:104:in `tap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/message_delivery.rb:104:in `processed_mailer'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/message_delivery.rb:27:in `__getobj__'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/2.3.0/delegate.rb:80:in `method_missing'
/home/deploy/www/app/jobs/send_mails_job.rb:6:in `perform'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:34:in `block in perform_now'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:126:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/i18n-0.8.0/lib/i18n.rb:257:in `with_locale'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/translation.rb:7:in `block (2 levels) in <module:Translation>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `instance_exec'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `block in make_lambda'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:285:in `block in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:447:in `block in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:24:in `block (4 levels) in <module:Logging>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications.rb:164:in `block in instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications/instrumenter.rb:21:in `instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications.rb:164:in `instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:23:in `block (3 levels) in <module:Logging>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:44:in `block in tag_logger'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/tagged_logging.rb:69:in `block in tagged'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/tagged_logging.rb:26:in `tagged'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/tagged_logging.rb:69:in `tagged'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:44:in `tag_logger'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:20:in `block (2 levels) in <module:Logging>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `instance_exec'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `block in make_lambda'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:285:in `block in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:447:in `block in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:101:in `__run_callbacks__'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:750:in `_run_perform_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:90:in `run_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:33:in `perform_now'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:22:in `block in execute'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:126:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/railtie.rb:26:in `block (4 levels) in <class:Railtie>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:85:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:68:in `block in wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:81:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:67:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/railtie.rb:25:in `block (3 levels) in <class:Railtie>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `instance_exec'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `block in make_lambda'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:285:in `block in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:447:in `block in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:101:in `__run_callbacks__'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:750:in `_run_execute_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:90:in `run_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:20:in `execute'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/queue_adapters/sidekiq_adapter.rb:40:in `perform'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:199:in `execute_job'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:170:in `block (2 levels) in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/middleware/chain.rb:128:in `block in invoke'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/middleware/chain.rb:133:in `invoke'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:169:in `block in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:141:in `block (6 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/job_retry.rb:97:in `local'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:140:in `block (5 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/rails.rb:42:in `block in call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:85:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:68:in `block in wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:85:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:67:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/rails.rb:41:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:136:in `block (4 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:215:in `stats'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:131:in `block (3 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/job_logger.rb:7:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:130:in `block (2 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/job_retry.rb:72:in `global'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:129:in `block in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/logging.rb:44:in `with_context'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/logging.rb:38:in `with_job_hash_context'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:128:in `dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:168:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:85:in `process_one'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:73:in `run'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/util.rb:16:in `watchdog'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/util.rb:25:in `block in safe_thread'
2018-07-26T06:41:50.828Z 14838 TID-gmuf2pow4 SendMailsJob JID-3d78d3c81c6b554c4c3d7bbc INFO: start
2018-07-26T06:41:50.884Z 14838 TID-gmuf2pow4 SendMailsJob JID-3d78d3c81c6b554c4c3d7bbc INFO: fail: 0.057 sec
2018-07-26T06:41:50.885Z 14838 TID-gmuf2pow4 WARN: {"context":"Job raised exception","job":{"class":"ActiveJob::QueueAdapters::SidekiqAdapter::JobWrapper","wrapped":"SendMailsJob","queue":"default","args":[{"job_class":"SendMailsJob","job_id":"69e14b5f-559a-4ffc-bde6-40babb6d779a","queue_name":"default","priority":null,"arguments":[{"_aj_globalid":"gid://book-store/Book/7"}],"locale":"en"}],"retry":true,"jid":"3d78d3c81c6b554c4c3d7bbc","created_at":1532545633.6385205,"enqueued_at":1532587310.8180223,"error_message":"undefined method `url' for nil:NilClass\nDid you mean?  URI","error_class":"NoMethodError","failed_at":1532545634.8540719,"retry_count":12,"retried_at":1532587310.8821726},"jobstr":"{\"class\":\"ActiveJob::QueueAdapters::SidekiqAdapter::JobWrapper\",\"wrapped\":\"SendMailsJob\",\"queue\":\"default\",\"args\":[{\"job_class\":\"SendMailsJob\",\"job_id\":\"69e14b5f-559a-4ffc-bde6-40babb6d779a\",\"queue_name\":\"default\",\"priority\":null,\"arguments\":[{\"_aj_globalid\":\"gid://book-store/Book/7\"}],\"locale\":\"en\"}],\"retry\":true,\"jid\":\"3d78d3c81c6b554c4c3d7bbc\",\"created_at\":1532545633.6385205,\"enqueued_at\":1532587310.8180223,\"error_message\":\"undefined method `url' for nil:NilClass\\nDid you mean?  URI\",\"error_class\":\"NoMethodError\",\"failed_at\":1532545634.8540719,\"retry_count\":11,\"retried_at\":1532572326.3273795}"}
2018-07-26T06:41:50.885Z 14838 TID-gmuf2pow4 WARN: NoMethodError: undefined method `url' for nil:NilClass
Did you mean?  URI
2018-07-26T06:41:50.885Z 14838 TID-gmuf2pow4 WARN: /home/deploy/www/app/mailers/book_mailer.rb:8:in `send_book'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionpack-5.0.1/lib/abstract_controller/base.rb:188:in `process_action'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionpack-5.0.1/lib/abstract_controller/callbacks.rb:20:in `block in process_action'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:97:in `__run_callbacks__'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:90:in `run_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionpack-5.0.1/lib/abstract_controller/callbacks.rb:19:in `process_action'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionpack-5.0.1/lib/abstract_controller/base.rb:126:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/rescuable.rb:23:in `block in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/rescuable.rb:15:in `handle_exceptions'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/rescuable.rb:22:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionview-5.0.1/lib/action_view/rendering.rb:30:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/base.rb:595:in `block in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications.rb:164:in `block in instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications/instrumenter.rb:21:in `instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications.rb:164:in `instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/base.rb:594:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/message_delivery.rb:105:in `block in processed_mailer'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/message_delivery.rb:104:in `tap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/message_delivery.rb:104:in `processed_mailer'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/message_delivery.rb:27:in `__getobj__'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/2.3.0/delegate.rb:80:in `method_missing'
/home/deploy/www/app/jobs/send_mails_job.rb:6:in `perform'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:34:in `block in perform_now'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:126:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/i18n-0.8.0/lib/i18n.rb:257:in `with_locale'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/translation.rb:7:in `block (2 levels) in <module:Translation>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `instance_exec'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `block in make_lambda'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:285:in `block in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:447:in `block in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:24:in `block (4 levels) in <module:Logging>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications.rb:164:in `block in instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications/instrumenter.rb:21:in `instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications.rb:164:in `instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:23:in `block (3 levels) in <module:Logging>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:44:in `block in tag_logger'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/tagged_logging.rb:69:in `block in tagged'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/tagged_logging.rb:26:in `tagged'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/tagged_logging.rb:69:in `tagged'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:44:in `tag_logger'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:20:in `block (2 levels) in <module:Logging>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `instance_exec'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `block in make_lambda'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:285:in `block in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:447:in `block in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:101:in `__run_callbacks__'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:750:in `_run_perform_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:90:in `run_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:33:in `perform_now'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:22:in `block in execute'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:126:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/railtie.rb:26:in `block (4 levels) in <class:Railtie>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:85:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:68:in `block in wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:81:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:67:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/railtie.rb:25:in `block (3 levels) in <class:Railtie>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `instance_exec'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `block in make_lambda'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:285:in `block in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:447:in `block in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:101:in `__run_callbacks__'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:750:in `_run_execute_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:90:in `run_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:20:in `execute'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/queue_adapters/sidekiq_adapter.rb:40:in `perform'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:199:in `execute_job'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:170:in `block (2 levels) in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/middleware/chain.rb:128:in `block in invoke'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/middleware/chain.rb:133:in `invoke'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:169:in `block in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:141:in `block (6 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/job_retry.rb:97:in `local'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:140:in `block (5 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/rails.rb:42:in `block in call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:85:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:68:in `block in wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:85:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:67:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/rails.rb:41:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:136:in `block (4 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:215:in `stats'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:131:in `block (3 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/job_logger.rb:7:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:130:in `block (2 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/job_retry.rb:72:in `global'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:129:in `block in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/logging.rb:44:in `with_context'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/logging.rb:38:in `with_job_hash_context'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:128:in `dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:168:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:85:in `process_one'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:73:in `run'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/util.rb:16:in `watchdog'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/util.rb:25:in `block in safe_thread'
2018-07-26T12:29:42.144Z 14838 TID-gmuflibck SendMailsJob JID-3d78d3c81c6b554c4c3d7bbc INFO: start
2018-07-26T12:29:42.196Z 14838 TID-gmuflibck SendMailsJob JID-3d78d3c81c6b554c4c3d7bbc INFO: fail: 0.052 sec
2018-07-26T12:29:42.196Z 14838 TID-gmuflibck WARN: {"context":"Job raised exception","job":{"class":"ActiveJob::QueueAdapters::SidekiqAdapter::JobWrapper","wrapped":"SendMailsJob","queue":"default","args":[{"job_class":"SendMailsJob","job_id":"69e14b5f-559a-4ffc-bde6-40babb6d779a","queue_name":"default","priority":null,"arguments":[{"_aj_globalid":"gid://book-store/Book/7"}],"locale":"en"}],"retry":true,"jid":"3d78d3c81c6b554c4c3d7bbc","created_at":1532545633.6385205,"enqueued_at":1532608182.136067,"error_message":"undefined method `url' for nil:NilClass\nDid you mean?  URI","error_class":"NoMethodError","failed_at":1532545634.8540719,"retry_count":13,"retried_at":1532608182.1901114},"jobstr":"{\"class\":\"ActiveJob::QueueAdapters::SidekiqAdapter::JobWrapper\",\"wrapped\":\"SendMailsJob\",\"queue\":\"default\",\"args\":[{\"job_class\":\"SendMailsJob\",\"job_id\":\"69e14b5f-559a-4ffc-bde6-40babb6d779a\",\"queue_name\":\"default\",\"priority\":null,\"arguments\":[{\"_aj_globalid\":\"gid://book-store/Book/7\"}],\"locale\":\"en\"}],\"retry\":true,\"jid\":\"3d78d3c81c6b554c4c3d7bbc\",\"created_at\":1532545633.6385205,\"enqueued_at\":1532608182.136067,\"error_message\":\"undefined method `url' for nil:NilClass\\nDid you mean?  URI\",\"error_class\":\"NoMethodError\",\"failed_at\":1532545634.8540719,\"retry_count\":12,\"retried_at\":1532587310.8821726}"}
2018-07-26T12:29:42.197Z 14838 TID-gmuflibck WARN: NoMethodError: undefined method `url' for nil:NilClass
Did you mean?  URI
2018-07-26T12:29:42.197Z 14838 TID-gmuflibck WARN: /home/deploy/www/app/mailers/book_mailer.rb:8:in `send_book'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionpack-5.0.1/lib/abstract_controller/base.rb:188:in `process_action'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionpack-5.0.1/lib/abstract_controller/callbacks.rb:20:in `block in process_action'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:97:in `__run_callbacks__'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:90:in `run_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionpack-5.0.1/lib/abstract_controller/callbacks.rb:19:in `process_action'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionpack-5.0.1/lib/abstract_controller/base.rb:126:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/rescuable.rb:23:in `block in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/rescuable.rb:15:in `handle_exceptions'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/rescuable.rb:22:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionview-5.0.1/lib/action_view/rendering.rb:30:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/base.rb:595:in `block in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications.rb:164:in `block in instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications/instrumenter.rb:21:in `instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications.rb:164:in `instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/base.rb:594:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/message_delivery.rb:105:in `block in processed_mailer'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/message_delivery.rb:104:in `tap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/message_delivery.rb:104:in `processed_mailer'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/message_delivery.rb:27:in `__getobj__'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/2.3.0/delegate.rb:80:in `method_missing'
/home/deploy/www/app/jobs/send_mails_job.rb:6:in `perform'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:34:in `block in perform_now'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:126:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/i18n-0.8.0/lib/i18n.rb:257:in `with_locale'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/translation.rb:7:in `block (2 levels) in <module:Translation>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `instance_exec'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `block in make_lambda'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:285:in `block in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:447:in `block in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:24:in `block (4 levels) in <module:Logging>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications.rb:164:in `block in instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications/instrumenter.rb:21:in `instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications.rb:164:in `instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:23:in `block (3 levels) in <module:Logging>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:44:in `block in tag_logger'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/tagged_logging.rb:69:in `block in tagged'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/tagged_logging.rb:26:in `tagged'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/tagged_logging.rb:69:in `tagged'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:44:in `tag_logger'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:20:in `block (2 levels) in <module:Logging>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `instance_exec'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `block in make_lambda'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:285:in `block in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:447:in `block in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:101:in `__run_callbacks__'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:750:in `_run_perform_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:90:in `run_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:33:in `perform_now'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:22:in `block in execute'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:126:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/railtie.rb:26:in `block (4 levels) in <class:Railtie>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:85:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:68:in `block in wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:81:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:67:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/railtie.rb:25:in `block (3 levels) in <class:Railtie>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `instance_exec'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `block in make_lambda'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:285:in `block in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:447:in `block in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:101:in `__run_callbacks__'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:750:in `_run_execute_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:90:in `run_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:20:in `execute'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/queue_adapters/sidekiq_adapter.rb:40:in `perform'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:199:in `execute_job'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:170:in `block (2 levels) in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/middleware/chain.rb:128:in `block in invoke'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/middleware/chain.rb:133:in `invoke'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:169:in `block in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:141:in `block (6 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/job_retry.rb:97:in `local'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:140:in `block (5 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/rails.rb:42:in `block in call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:85:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:68:in `block in wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:85:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:67:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/rails.rb:41:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:136:in `block (4 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:215:in `stats'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:131:in `block (3 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/job_logger.rb:7:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:130:in `block (2 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/job_retry.rb:72:in `global'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:129:in `block in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/logging.rb:44:in `with_context'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/logging.rb:38:in `with_job_hash_context'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:128:in `dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:168:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:85:in `process_one'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:73:in `run'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/util.rb:16:in `watchdog'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/util.rb:25:in `block in safe_thread'
2018-07-26T20:26:48.970Z 14838 TID-gmufrk7k8 SendMailsJob JID-3d78d3c81c6b554c4c3d7bbc INFO: start
2018-07-26T20:26:49.014Z 14838 TID-gmufrk7k8 SendMailsJob JID-3d78d3c81c6b554c4c3d7bbc INFO: fail: 0.043 sec
2018-07-26T20:26:49.014Z 14838 TID-gmufrk7k8 WARN: {"context":"Job raised exception","job":{"class":"ActiveJob::QueueAdapters::SidekiqAdapter::JobWrapper","wrapped":"SendMailsJob","queue":"default","args":[{"job_class":"SendMailsJob","job_id":"69e14b5f-559a-4ffc-bde6-40babb6d779a","queue_name":"default","priority":null,"arguments":[{"_aj_globalid":"gid://book-store/Book/7"}],"locale":"en"}],"retry":true,"jid":"3d78d3c81c6b554c4c3d7bbc","created_at":1532545633.6385205,"enqueued_at":1532636808.9696767,"error_message":"undefined method `url' for nil:NilClass\nDid you mean?  URI","error_class":"NoMethodError","failed_at":1532545634.8540719,"retry_count":14,"retried_at":1532636809.012145},"jobstr":"{\"class\":\"ActiveJob::QueueAdapters::SidekiqAdapter::JobWrapper\",\"wrapped\":\"SendMailsJob\",\"queue\":\"default\",\"args\":[{\"job_class\":\"SendMailsJob\",\"job_id\":\"69e14b5f-559a-4ffc-bde6-40babb6d779a\",\"queue_name\":\"default\",\"priority\":null,\"arguments\":[{\"_aj_globalid\":\"gid://book-store/Book/7\"}],\"locale\":\"en\"}],\"retry\":true,\"jid\":\"3d78d3c81c6b554c4c3d7bbc\",\"created_at\":1532545633.6385205,\"enqueued_at\":1532636808.9696767,\"error_message\":\"undefined method `url' for nil:NilClass\\nDid you mean?  URI\",\"error_class\":\"NoMethodError\",\"failed_at\":1532545634.8540719,\"retry_count\":13,\"retried_at\":1532608182.1901114}"}
2018-07-26T20:26:49.014Z 14838 TID-gmufrk7k8 WARN: NoMethodError: undefined method `url' for nil:NilClass
Did you mean?  URI
2018-07-26T20:26:49.015Z 14838 TID-gmufrk7k8 WARN: /home/deploy/www/app/mailers/book_mailer.rb:8:in `send_book'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionpack-5.0.1/lib/abstract_controller/base.rb:188:in `process_action'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionpack-5.0.1/lib/abstract_controller/callbacks.rb:20:in `block in process_action'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:97:in `__run_callbacks__'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:90:in `run_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionpack-5.0.1/lib/abstract_controller/callbacks.rb:19:in `process_action'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionpack-5.0.1/lib/abstract_controller/base.rb:126:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/rescuable.rb:23:in `block in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/rescuable.rb:15:in `handle_exceptions'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/rescuable.rb:22:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionview-5.0.1/lib/action_view/rendering.rb:30:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/base.rb:595:in `block in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications.rb:164:in `block in instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications/instrumenter.rb:21:in `instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications.rb:164:in `instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/base.rb:594:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/message_delivery.rb:105:in `block in processed_mailer'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/message_delivery.rb:104:in `tap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/message_delivery.rb:104:in `processed_mailer'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/message_delivery.rb:27:in `__getobj__'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/2.3.0/delegate.rb:80:in `method_missing'
/home/deploy/www/app/jobs/send_mails_job.rb:6:in `perform'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:34:in `block in perform_now'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:126:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/i18n-0.8.0/lib/i18n.rb:257:in `with_locale'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/translation.rb:7:in `block (2 levels) in <module:Translation>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `instance_exec'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `block in make_lambda'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:285:in `block in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:447:in `block in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:24:in `block (4 levels) in <module:Logging>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications.rb:164:in `block in instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications/instrumenter.rb:21:in `instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications.rb:164:in `instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:23:in `block (3 levels) in <module:Logging>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:44:in `block in tag_logger'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/tagged_logging.rb:69:in `block in tagged'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/tagged_logging.rb:26:in `tagged'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/tagged_logging.rb:69:in `tagged'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:44:in `tag_logger'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:20:in `block (2 levels) in <module:Logging>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `instance_exec'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `block in make_lambda'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:285:in `block in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:447:in `block in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:101:in `__run_callbacks__'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:750:in `_run_perform_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:90:in `run_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:33:in `perform_now'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:22:in `block in execute'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:126:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/railtie.rb:26:in `block (4 levels) in <class:Railtie>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:85:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:68:in `block in wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:81:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:67:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/railtie.rb:25:in `block (3 levels) in <class:Railtie>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `instance_exec'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `block in make_lambda'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:285:in `block in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:447:in `block in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:101:in `__run_callbacks__'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:750:in `_run_execute_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:90:in `run_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:20:in `execute'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/queue_adapters/sidekiq_adapter.rb:40:in `perform'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:199:in `execute_job'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:170:in `block (2 levels) in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/middleware/chain.rb:128:in `block in invoke'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/middleware/chain.rb:133:in `invoke'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:169:in `block in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:141:in `block (6 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/job_retry.rb:97:in `local'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:140:in `block (5 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/rails.rb:42:in `block in call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:85:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:68:in `block in wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:85:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:67:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/rails.rb:41:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:136:in `block (4 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:215:in `stats'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:131:in `block (3 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/job_logger.rb:7:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:130:in `block (2 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/job_retry.rb:72:in `global'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:129:in `block in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/logging.rb:44:in `with_context'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/logging.rb:38:in `with_job_hash_context'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:128:in `dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:168:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:85:in `process_one'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:73:in `run'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/util.rb:16:in `watchdog'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/util.rb:25:in `block in safe_thread'
2018-07-27T07:11:05.309Z 14838 TID-gmufmlz54 SendMailsJob JID-3d78d3c81c6b554c4c3d7bbc INFO: start
2018-07-27T07:11:05.357Z 14838 TID-gmufmlz54 SendMailsJob JID-3d78d3c81c6b554c4c3d7bbc INFO: fail: 0.048 sec
2018-07-27T07:11:05.357Z 14838 TID-gmufmlz54 WARN: {"context":"Job raised exception","job":{"class":"ActiveJob::QueueAdapters::SidekiqAdapter::JobWrapper","wrapped":"SendMailsJob","queue":"default","args":[{"job_class":"SendMailsJob","job_id":"69e14b5f-559a-4ffc-bde6-40babb6d779a","queue_name":"default","priority":null,"arguments":[{"_aj_globalid":"gid://book-store/Book/7"}],"locale":"en"}],"retry":true,"jid":"3d78d3c81c6b554c4c3d7bbc","created_at":1532545633.6385205,"enqueued_at":1532675465.3022597,"error_message":"undefined method `url' for nil:NilClass\nDid you mean?  URI","error_class":"NoMethodError","failed_at":1532545634.8540719,"retry_count":15,"retried_at":1532675465.3567498},"jobstr":"{\"class\":\"ActiveJob::QueueAdapters::SidekiqAdapter::JobWrapper\",\"wrapped\":\"SendMailsJob\",\"queue\":\"default\",\"args\":[{\"job_class\":\"SendMailsJob\",\"job_id\":\"69e14b5f-559a-4ffc-bde6-40babb6d779a\",\"queue_name\":\"default\",\"priority\":null,\"arguments\":[{\"_aj_globalid\":\"gid://book-store/Book/7\"}],\"locale\":\"en\"}],\"retry\":true,\"jid\":\"3d78d3c81c6b554c4c3d7bbc\",\"created_at\":1532545633.6385205,\"enqueued_at\":1532675465.3022597,\"error_message\":\"undefined method `url' for nil:NilClass\\nDid you mean?  URI\",\"error_class\":\"NoMethodError\",\"failed_at\":1532545634.8540719,\"retry_count\":14,\"retried_at\":1532636809.012145}"}
2018-07-27T07:11:05.357Z 14838 TID-gmufmlz54 WARN: NoMethodError: undefined method `url' for nil:NilClass
Did you mean?  URI
2018-07-27T07:11:05.358Z 14838 TID-gmufmlz54 WARN: /home/deploy/www/app/mailers/book_mailer.rb:8:in `send_book'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionpack-5.0.1/lib/abstract_controller/base.rb:188:in `process_action'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionpack-5.0.1/lib/abstract_controller/callbacks.rb:20:in `block in process_action'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:97:in `__run_callbacks__'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:90:in `run_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionpack-5.0.1/lib/abstract_controller/callbacks.rb:19:in `process_action'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionpack-5.0.1/lib/abstract_controller/base.rb:126:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/rescuable.rb:23:in `block in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/rescuable.rb:15:in `handle_exceptions'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/rescuable.rb:22:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionview-5.0.1/lib/action_view/rendering.rb:30:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/base.rb:595:in `block in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications.rb:164:in `block in instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications/instrumenter.rb:21:in `instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications.rb:164:in `instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/base.rb:594:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/message_delivery.rb:105:in `block in processed_mailer'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/message_delivery.rb:104:in `tap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/message_delivery.rb:104:in `processed_mailer'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/message_delivery.rb:27:in `__getobj__'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/2.3.0/delegate.rb:80:in `method_missing'
/home/deploy/www/app/jobs/send_mails_job.rb:6:in `perform'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:34:in `block in perform_now'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:126:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/i18n-0.8.0/lib/i18n.rb:257:in `with_locale'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/translation.rb:7:in `block (2 levels) in <module:Translation>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `instance_exec'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `block in make_lambda'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:285:in `block in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:447:in `block in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:24:in `block (4 levels) in <module:Logging>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications.rb:164:in `block in instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications/instrumenter.rb:21:in `instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications.rb:164:in `instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:23:in `block (3 levels) in <module:Logging>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:44:in `block in tag_logger'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/tagged_logging.rb:69:in `block in tagged'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/tagged_logging.rb:26:in `tagged'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/tagged_logging.rb:69:in `tagged'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:44:in `tag_logger'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:20:in `block (2 levels) in <module:Logging>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `instance_exec'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `block in make_lambda'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:285:in `block in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:447:in `block in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:101:in `__run_callbacks__'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:750:in `_run_perform_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:90:in `run_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:33:in `perform_now'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:22:in `block in execute'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:126:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/railtie.rb:26:in `block (4 levels) in <class:Railtie>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:85:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:68:in `block in wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:81:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:67:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/railtie.rb:25:in `block (3 levels) in <class:Railtie>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `instance_exec'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `block in make_lambda'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:285:in `block in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:447:in `block in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:101:in `__run_callbacks__'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:750:in `_run_execute_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:90:in `run_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:20:in `execute'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/queue_adapters/sidekiq_adapter.rb:40:in `perform'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:199:in `execute_job'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:170:in `block (2 levels) in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/middleware/chain.rb:128:in `block in invoke'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/middleware/chain.rb:133:in `invoke'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:169:in `block in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:141:in `block (6 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/job_retry.rb:97:in `local'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:140:in `block (5 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/rails.rb:42:in `block in call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:85:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:68:in `block in wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:85:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:67:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/rails.rb:41:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:136:in `block (4 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:215:in `stats'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:131:in `block (3 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/job_logger.rb:7:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:130:in `block (2 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/job_retry.rb:72:in `global'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:129:in `block in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/logging.rb:44:in `with_context'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/logging.rb:38:in `with_job_hash_context'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:128:in `dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:168:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:85:in `process_one'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:73:in `run'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/util.rb:16:in `watchdog'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/util.rb:25:in `block in safe_thread'
2018-07-27T21:21:29.926Z 14838 TID-gmufnubk8 SendMailsJob JID-3d78d3c81c6b554c4c3d7bbc INFO: start
2018-07-27T21:21:30.187Z 14838 TID-gmufnubk8 SendMailsJob JID-3d78d3c81c6b554c4c3d7bbc INFO: fail: 0.262 sec
2018-07-27T21:21:30.194Z 14838 TID-gmufnubk8 WARN: {"context":"Job raised exception","job":{"class":"ActiveJob::QueueAdapters::SidekiqAdapter::JobWrapper","wrapped":"SendMailsJob","queue":"default","args":[{"job_class":"SendMailsJob","job_id":"69e14b5f-559a-4ffc-bde6-40babb6d779a","queue_name":"default","priority":null,"arguments":[{"_aj_globalid":"gid://book-store/Book/7"}],"locale":"en"}],"retry":true,"jid":"3d78d3c81c6b554c4c3d7bbc","created_at":1532545633.6385205,"enqueued_at":1532726489.9164312,"error_message":"undefined method `url' for nil:NilClass\nDid you mean?  URI","error_class":"NoMethodError","failed_at":1532545634.8540719,"retry_count":16,"retried_at":1532726490.1834133},"jobstr":"{\"class\":\"ActiveJob::QueueAdapters::SidekiqAdapter::JobWrapper\",\"wrapped\":\"SendMailsJob\",\"queue\":\"default\",\"args\":[{\"job_class\":\"SendMailsJob\",\"job_id\":\"69e14b5f-559a-4ffc-bde6-40babb6d779a\",\"queue_name\":\"default\",\"priority\":null,\"arguments\":[{\"_aj_globalid\":\"gid://book-store/Book/7\"}],\"locale\":\"en\"}],\"retry\":true,\"jid\":\"3d78d3c81c6b554c4c3d7bbc\",\"created_at\":1532545633.6385205,\"enqueued_at\":1532726489.9164312,\"error_message\":\"undefined method `url' for nil:NilClass\\nDid you mean?  URI\",\"error_class\":\"NoMethodError\",\"failed_at\":1532545634.8540719,\"retry_count\":15,\"retried_at\":1532675465.3567498}"}
2018-07-27T21:21:30.194Z 14838 TID-gmufnubk8 WARN: NoMethodError: undefined method `url' for nil:NilClass
Did you mean?  URI
2018-07-27T21:21:30.196Z 14838 TID-gmufnubk8 WARN: /home/deploy/www/app/mailers/book_mailer.rb:8:in `send_book'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionpack-5.0.1/lib/abstract_controller/base.rb:188:in `process_action'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionpack-5.0.1/lib/abstract_controller/callbacks.rb:20:in `block in process_action'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:97:in `__run_callbacks__'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:90:in `run_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionpack-5.0.1/lib/abstract_controller/callbacks.rb:19:in `process_action'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionpack-5.0.1/lib/abstract_controller/base.rb:126:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/rescuable.rb:23:in `block in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/rescuable.rb:15:in `handle_exceptions'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/rescuable.rb:22:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionview-5.0.1/lib/action_view/rendering.rb:30:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/base.rb:595:in `block in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications.rb:164:in `block in instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications/instrumenter.rb:21:in `instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications.rb:164:in `instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/base.rb:594:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/message_delivery.rb:105:in `block in processed_mailer'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/message_delivery.rb:104:in `tap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/message_delivery.rb:104:in `processed_mailer'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/message_delivery.rb:27:in `__getobj__'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/2.3.0/delegate.rb:80:in `method_missing'
/home/deploy/www/app/jobs/send_mails_job.rb:6:in `perform'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:34:in `block in perform_now'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:126:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/i18n-0.8.0/lib/i18n.rb:257:in `with_locale'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/translation.rb:7:in `block (2 levels) in <module:Translation>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `instance_exec'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `block in make_lambda'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:285:in `block in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:447:in `block in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:24:in `block (4 levels) in <module:Logging>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications.rb:164:in `block in instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications/instrumenter.rb:21:in `instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications.rb:164:in `instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:23:in `block (3 levels) in <module:Logging>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:44:in `block in tag_logger'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/tagged_logging.rb:69:in `block in tagged'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/tagged_logging.rb:26:in `tagged'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/tagged_logging.rb:69:in `tagged'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:44:in `tag_logger'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:20:in `block (2 levels) in <module:Logging>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `instance_exec'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `block in make_lambda'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:285:in `block in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:447:in `block in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:101:in `__run_callbacks__'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:750:in `_run_perform_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:90:in `run_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:33:in `perform_now'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:22:in `block in execute'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:126:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/railtie.rb:26:in `block (4 levels) in <class:Railtie>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:85:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:68:in `block in wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:81:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:67:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/railtie.rb:25:in `block (3 levels) in <class:Railtie>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `instance_exec'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `block in make_lambda'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:285:in `block in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:447:in `block in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:101:in `__run_callbacks__'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:750:in `_run_execute_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:90:in `run_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:20:in `execute'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/queue_adapters/sidekiq_adapter.rb:40:in `perform'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:199:in `execute_job'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:170:in `block (2 levels) in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/middleware/chain.rb:128:in `block in invoke'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/middleware/chain.rb:133:in `invoke'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:169:in `block in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:141:in `block (6 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/job_retry.rb:97:in `local'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:140:in `block (5 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/rails.rb:42:in `block in call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:85:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:68:in `block in wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:85:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:67:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/rails.rb:41:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:136:in `block (4 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:215:in `stats'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:131:in `block (3 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/job_logger.rb:7:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:130:in `block (2 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/job_retry.rb:72:in `global'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:129:in `block in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/logging.rb:44:in `with_context'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/logging.rb:38:in `with_job_hash_context'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:128:in `dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:168:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:85:in `process_one'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:73:in `run'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/util.rb:16:in `watchdog'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/util.rb:25:in `block in safe_thread'
2018-07-28T15:34:54.344Z 14838 TID-gmufovgew SendMailsJob JID-3d78d3c81c6b554c4c3d7bbc INFO: start
2018-07-28T15:34:54.402Z 14838 TID-gmufovgew SendMailsJob JID-3d78d3c81c6b554c4c3d7bbc INFO: fail: 0.057 sec
2018-07-28T15:34:54.402Z 14838 TID-gmufovgew WARN: {"context":"Job raised exception","job":{"class":"ActiveJob::QueueAdapters::SidekiqAdapter::JobWrapper","wrapped":"SendMailsJob","queue":"default","args":[{"job_class":"SendMailsJob","job_id":"69e14b5f-559a-4ffc-bde6-40babb6d779a","queue_name":"default","priority":null,"arguments":[{"_aj_globalid":"gid://book-store/Book/7"}],"locale":"en"}],"retry":true,"jid":"3d78d3c81c6b554c4c3d7bbc","created_at":1532545633.6385205,"enqueued_at":1532792094.3426635,"error_message":"undefined method `url' for nil:NilClass\nDid you mean?  URI","error_class":"NoMethodError","failed_at":1532545634.8540719,"retry_count":17,"retried_at":1532792094.4009886},"jobstr":"{\"class\":\"ActiveJob::QueueAdapters::SidekiqAdapter::JobWrapper\",\"wrapped\":\"SendMailsJob\",\"queue\":\"default\",\"args\":[{\"job_class\":\"SendMailsJob\",\"job_id\":\"69e14b5f-559a-4ffc-bde6-40babb6d779a\",\"queue_name\":\"default\",\"priority\":null,\"arguments\":[{\"_aj_globalid\":\"gid://book-store/Book/7\"}],\"locale\":\"en\"}],\"retry\":true,\"jid\":\"3d78d3c81c6b554c4c3d7bbc\",\"created_at\":1532545633.6385205,\"enqueued_at\":1532792094.3426635,\"error_message\":\"undefined method `url' for nil:NilClass\\nDid you mean?  URI\",\"error_class\":\"NoMethodError\",\"failed_at\":1532545634.8540719,\"retry_count\":16,\"retried_at\":1532726490.1834133}"}
2018-07-28T15:34:54.402Z 14838 TID-gmufovgew WARN: NoMethodError: undefined method `url' for nil:NilClass
Did you mean?  URI
2018-07-28T15:34:54.402Z 14838 TID-gmufovgew WARN: /home/deploy/www/app/mailers/book_mailer.rb:8:in `send_book'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionpack-5.0.1/lib/abstract_controller/base.rb:188:in `process_action'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionpack-5.0.1/lib/abstract_controller/callbacks.rb:20:in `block in process_action'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:97:in `__run_callbacks__'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:90:in `run_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionpack-5.0.1/lib/abstract_controller/callbacks.rb:19:in `process_action'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionpack-5.0.1/lib/abstract_controller/base.rb:126:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/rescuable.rb:23:in `block in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/rescuable.rb:15:in `handle_exceptions'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/rescuable.rb:22:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionview-5.0.1/lib/action_view/rendering.rb:30:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/base.rb:595:in `block in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications.rb:164:in `block in instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications/instrumenter.rb:21:in `instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications.rb:164:in `instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/base.rb:594:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/message_delivery.rb:105:in `block in processed_mailer'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/message_delivery.rb:104:in `tap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/message_delivery.rb:104:in `processed_mailer'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/message_delivery.rb:27:in `__getobj__'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/2.3.0/delegate.rb:80:in `method_missing'
/home/deploy/www/app/jobs/send_mails_job.rb:6:in `perform'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:34:in `block in perform_now'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:126:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/i18n-0.8.0/lib/i18n.rb:257:in `with_locale'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/translation.rb:7:in `block (2 levels) in <module:Translation>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `instance_exec'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `block in make_lambda'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:285:in `block in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:447:in `block in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:24:in `block (4 levels) in <module:Logging>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications.rb:164:in `block in instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications/instrumenter.rb:21:in `instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications.rb:164:in `instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:23:in `block (3 levels) in <module:Logging>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:44:in `block in tag_logger'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/tagged_logging.rb:69:in `block in tagged'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/tagged_logging.rb:26:in `tagged'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/tagged_logging.rb:69:in `tagged'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:44:in `tag_logger'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:20:in `block (2 levels) in <module:Logging>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `instance_exec'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `block in make_lambda'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:285:in `block in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:447:in `block in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:101:in `__run_callbacks__'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:750:in `_run_perform_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:90:in `run_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:33:in `perform_now'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:22:in `block in execute'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:126:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/railtie.rb:26:in `block (4 levels) in <class:Railtie>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:85:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:68:in `block in wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:81:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:67:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/railtie.rb:25:in `block (3 levels) in <class:Railtie>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `instance_exec'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `block in make_lambda'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:285:in `block in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:447:in `block in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:101:in `__run_callbacks__'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:750:in `_run_execute_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:90:in `run_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:20:in `execute'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/queue_adapters/sidekiq_adapter.rb:40:in `perform'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:199:in `execute_job'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:170:in `block (2 levels) in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/middleware/chain.rb:128:in `block in invoke'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/middleware/chain.rb:133:in `invoke'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:169:in `block in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:141:in `block (6 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/job_retry.rb:97:in `local'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:140:in `block (5 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/rails.rb:42:in `block in call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:85:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:68:in `block in wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:85:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:67:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/rails.rb:41:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:136:in `block (4 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:215:in `stats'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:131:in `block (3 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/job_logger.rb:7:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:130:in `block (2 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/job_retry.rb:72:in `global'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:129:in `block in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/logging.rb:44:in `with_context'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/logging.rb:38:in `with_job_hash_context'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:128:in `dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:168:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:85:in `process_one'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:73:in `run'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/util.rb:16:in `watchdog'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/util.rb:25:in `block in safe_thread'
2018-07-29T14:48:23.837Z 14838 TID-gmufsfrlg SendMailsJob JID-3d78d3c81c6b554c4c3d7bbc INFO: start
2018-07-29T14:48:23.895Z 14838 TID-gmufsfrlg SendMailsJob JID-3d78d3c81c6b554c4c3d7bbc INFO: fail: 0.058 sec
2018-07-29T14:48:23.895Z 14838 TID-gmufsfrlg WARN: {"context":"Job raised exception","job":{"class":"ActiveJob::QueueAdapters::SidekiqAdapter::JobWrapper","wrapped":"SendMailsJob","queue":"default","args":[{"job_class":"SendMailsJob","job_id":"69e14b5f-559a-4ffc-bde6-40babb6d779a","queue_name":"default","priority":null,"arguments":[{"_aj_globalid":"gid://book-store/Book/7"}],"locale":"en"}],"retry":true,"jid":"3d78d3c81c6b554c4c3d7bbc","created_at":1532545633.6385205,"enqueued_at":1532875703.826853,"error_message":"undefined method `url' for nil:NilClass\nDid you mean?  URI","error_class":"NoMethodError","failed_at":1532545634.8540719,"retry_count":18,"retried_at":1532875703.8934872},"jobstr":"{\"class\":\"ActiveJob::QueueAdapters::SidekiqAdapter::JobWrapper\",\"wrapped\":\"SendMailsJob\",\"queue\":\"default\",\"args\":[{\"job_class\":\"SendMailsJob\",\"job_id\":\"69e14b5f-559a-4ffc-bde6-40babb6d779a\",\"queue_name\":\"default\",\"priority\":null,\"arguments\":[{\"_aj_globalid\":\"gid://book-store/Book/7\"}],\"locale\":\"en\"}],\"retry\":true,\"jid\":\"3d78d3c81c6b554c4c3d7bbc\",\"created_at\":1532545633.6385205,\"enqueued_at\":1532875703.826853,\"error_message\":\"undefined method `url' for nil:NilClass\\nDid you mean?  URI\",\"error_class\":\"NoMethodError\",\"failed_at\":1532545634.8540719,\"retry_count\":17,\"retried_at\":1532792094.4009886}"}
2018-07-29T14:48:23.895Z 14838 TID-gmufsfrlg WARN: NoMethodError: undefined method `url' for nil:NilClass
Did you mean?  URI
2018-07-29T14:48:23.895Z 14838 TID-gmufsfrlg WARN: /home/deploy/www/app/mailers/book_mailer.rb:8:in `send_book'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionpack-5.0.1/lib/abstract_controller/base.rb:188:in `process_action'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionpack-5.0.1/lib/abstract_controller/callbacks.rb:20:in `block in process_action'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:97:in `__run_callbacks__'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:90:in `run_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionpack-5.0.1/lib/abstract_controller/callbacks.rb:19:in `process_action'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionpack-5.0.1/lib/abstract_controller/base.rb:126:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/rescuable.rb:23:in `block in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/rescuable.rb:15:in `handle_exceptions'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/rescuable.rb:22:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionview-5.0.1/lib/action_view/rendering.rb:30:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/base.rb:595:in `block in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications.rb:164:in `block in instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications/instrumenter.rb:21:in `instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications.rb:164:in `instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/base.rb:594:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/message_delivery.rb:105:in `block in processed_mailer'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/message_delivery.rb:104:in `tap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/message_delivery.rb:104:in `processed_mailer'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/message_delivery.rb:27:in `__getobj__'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/2.3.0/delegate.rb:80:in `method_missing'
/home/deploy/www/app/jobs/send_mails_job.rb:6:in `perform'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:34:in `block in perform_now'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:126:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/i18n-0.8.0/lib/i18n.rb:257:in `with_locale'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/translation.rb:7:in `block (2 levels) in <module:Translation>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `instance_exec'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `block in make_lambda'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:285:in `block in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:447:in `block in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:24:in `block (4 levels) in <module:Logging>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications.rb:164:in `block in instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications/instrumenter.rb:21:in `instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications.rb:164:in `instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:23:in `block (3 levels) in <module:Logging>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:44:in `block in tag_logger'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/tagged_logging.rb:69:in `block in tagged'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/tagged_logging.rb:26:in `tagged'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/tagged_logging.rb:69:in `tagged'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:44:in `tag_logger'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:20:in `block (2 levels) in <module:Logging>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `instance_exec'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `block in make_lambda'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:285:in `block in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:447:in `block in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:101:in `__run_callbacks__'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:750:in `_run_perform_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:90:in `run_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:33:in `perform_now'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:22:in `block in execute'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:126:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/railtie.rb:26:in `block (4 levels) in <class:Railtie>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:85:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:68:in `block in wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:81:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:67:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/railtie.rb:25:in `block (3 levels) in <class:Railtie>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `instance_exec'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `block in make_lambda'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:285:in `block in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:447:in `block in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:101:in `__run_callbacks__'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:750:in `_run_execute_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:90:in `run_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:20:in `execute'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/queue_adapters/sidekiq_adapter.rb:40:in `perform'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:199:in `execute_job'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:170:in `block (2 levels) in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/middleware/chain.rb:128:in `block in invoke'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/middleware/chain.rb:133:in `invoke'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:169:in `block in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:141:in `block (6 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/job_retry.rb:97:in `local'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:140:in `block (5 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/rails.rb:42:in `block in call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:85:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:68:in `block in wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:85:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:67:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/rails.rb:41:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:136:in `block (4 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:215:in `stats'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:131:in `block (3 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/job_logger.rb:7:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:130:in `block (2 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/job_retry.rb:72:in `global'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:129:in `block in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/logging.rb:44:in `with_context'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/logging.rb:38:in `with_job_hash_context'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:128:in `dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:168:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:85:in `process_one'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:73:in `run'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/util.rb:16:in `watchdog'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/util.rb:25:in `block in safe_thread'
2018-07-30T20:02:24.011Z 14838 TID-gmufn5sfg SendMailsJob JID-3d78d3c81c6b554c4c3d7bbc INFO: start
2018-07-30T20:02:24.574Z 14838 TID-gmufn5sfg SendMailsJob JID-3d78d3c81c6b554c4c3d7bbc INFO: fail: 0.572 sec
2018-07-30T20:02:24.576Z 14838 TID-gmufn5sfg WARN: {"context":"Job raised exception","job":{"class":"ActiveJob::QueueAdapters::SidekiqAdapter::JobWrapper","wrapped":"SendMailsJob","queue":"default","args":[{"job_class":"SendMailsJob","job_id":"69e14b5f-559a-4ffc-bde6-40babb6d779a","queue_name":"default","priority":null,"arguments":[{"_aj_globalid":"gid://book-store/Book/7"}],"locale":"en"}],"retry":true,"jid":"3d78d3c81c6b554c4c3d7bbc","created_at":1532545633.6385205,"enqueued_at":1532980943.9891582,"error_message":"undefined method `url' for nil:NilClass\nDid you mean?  URI","error_class":"NoMethodError","failed_at":1532545634.8540719,"retry_count":19,"retried_at":1532980944.5611446},"jobstr":"{\"class\":\"ActiveJob::QueueAdapters::SidekiqAdapter::JobWrapper\",\"wrapped\":\"SendMailsJob\",\"queue\":\"default\",\"args\":[{\"job_class\":\"SendMailsJob\",\"job_id\":\"69e14b5f-559a-4ffc-bde6-40babb6d779a\",\"queue_name\":\"default\",\"priority\":null,\"arguments\":[{\"_aj_globalid\":\"gid://book-store/Book/7\"}],\"locale\":\"en\"}],\"retry\":true,\"jid\":\"3d78d3c81c6b554c4c3d7bbc\",\"created_at\":1532545633.6385205,\"enqueued_at\":1532980943.9891582,\"error_message\":\"undefined method `url' for nil:NilClass\\nDid you mean?  URI\",\"error_class\":\"NoMethodError\",\"failed_at\":1532545634.8540719,\"retry_count\":18,\"retried_at\":1532875703.8934872}"}
2018-07-30T20:02:24.576Z 14838 TID-gmufn5sfg WARN: NoMethodError: undefined method `url' for nil:NilClass
Did you mean?  URI
2018-07-30T20:02:24.576Z 14838 TID-gmufn5sfg WARN: /home/deploy/www/app/mailers/book_mailer.rb:8:in `send_book'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionpack-5.0.1/lib/abstract_controller/base.rb:188:in `process_action'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionpack-5.0.1/lib/abstract_controller/callbacks.rb:20:in `block in process_action'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:97:in `__run_callbacks__'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:90:in `run_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionpack-5.0.1/lib/abstract_controller/callbacks.rb:19:in `process_action'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionpack-5.0.1/lib/abstract_controller/base.rb:126:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/rescuable.rb:23:in `block in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/rescuable.rb:15:in `handle_exceptions'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/rescuable.rb:22:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionview-5.0.1/lib/action_view/rendering.rb:30:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/base.rb:595:in `block in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications.rb:164:in `block in instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications/instrumenter.rb:21:in `instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications.rb:164:in `instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/base.rb:594:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/message_delivery.rb:105:in `block in processed_mailer'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/message_delivery.rb:104:in `tap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/message_delivery.rb:104:in `processed_mailer'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/message_delivery.rb:27:in `__getobj__'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/2.3.0/delegate.rb:80:in `method_missing'
/home/deploy/www/app/jobs/send_mails_job.rb:6:in `perform'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:34:in `block in perform_now'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:126:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/i18n-0.8.0/lib/i18n.rb:257:in `with_locale'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/translation.rb:7:in `block (2 levels) in <module:Translation>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `instance_exec'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `block in make_lambda'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:285:in `block in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:447:in `block in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:24:in `block (4 levels) in <module:Logging>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications.rb:164:in `block in instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications/instrumenter.rb:21:in `instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications.rb:164:in `instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:23:in `block (3 levels) in <module:Logging>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:44:in `block in tag_logger'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/tagged_logging.rb:69:in `block in tagged'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/tagged_logging.rb:26:in `tagged'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/tagged_logging.rb:69:in `tagged'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:44:in `tag_logger'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:20:in `block (2 levels) in <module:Logging>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `instance_exec'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `block in make_lambda'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:285:in `block in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:447:in `block in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:101:in `__run_callbacks__'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:750:in `_run_perform_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:90:in `run_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:33:in `perform_now'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:22:in `block in execute'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:126:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/railtie.rb:26:in `block (4 levels) in <class:Railtie>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:85:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:68:in `block in wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:81:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:67:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/railtie.rb:25:in `block (3 levels) in <class:Railtie>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `instance_exec'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `block in make_lambda'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:285:in `block in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:447:in `block in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:101:in `__run_callbacks__'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:750:in `_run_execute_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:90:in `run_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:20:in `execute'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/queue_adapters/sidekiq_adapter.rb:40:in `perform'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:199:in `execute_job'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:170:in `block (2 levels) in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/middleware/chain.rb:128:in `block in invoke'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/middleware/chain.rb:133:in `invoke'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:169:in `block in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:141:in `block (6 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/job_retry.rb:97:in `local'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:140:in `block (5 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/rails.rb:42:in `block in call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:85:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:68:in `block in wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:85:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:67:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/rails.rb:41:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:136:in `block (4 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:215:in `stats'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:131:in `block (3 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/job_logger.rb:7:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:130:in `block (2 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/job_retry.rb:72:in `global'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:129:in `block in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/logging.rb:44:in `with_context'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/logging.rb:38:in `with_job_hash_context'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:128:in `dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:168:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:85:in `process_one'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:73:in `run'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/util.rb:16:in `watchdog'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/util.rb:25:in `block in safe_thread'
2018-08-01T08:21:05.421Z 14838 TID-gmuflibuw SendMailsJob JID-3d78d3c81c6b554c4c3d7bbc INFO: start
2018-08-01T08:21:06.228Z 14838 TID-gmuflibuw SendMailsJob JID-3d78d3c81c6b554c4c3d7bbc INFO: fail: 0.814 sec
2018-08-01T08:21:06.230Z 14838 TID-gmuflibuw WARN: {"context":"Job raised exception","job":{"class":"ActiveJob::QueueAdapters::SidekiqAdapter::JobWrapper","wrapped":"SendMailsJob","queue":"default","args":[{"job_class":"SendMailsJob","job_id":"69e14b5f-559a-4ffc-bde6-40babb6d779a","queue_name":"default","priority":null,"arguments":[{"_aj_globalid":"gid://book-store/Book/7"}],"locale":"en"}],"retry":true,"jid":"3d78d3c81c6b554c4c3d7bbc","created_at":1532545633.6385205,"enqueued_at":1533111665.386782,"error_message":"undefined method `url' for nil:NilClass\nDid you mean?  URI","error_class":"NoMethodError","failed_at":1532545634.8540719,"retry_count":20,"retried_at":1533111666.1967337},"jobstr":"{\"class\":\"ActiveJob::QueueAdapters::SidekiqAdapter::JobWrapper\",\"wrapped\":\"SendMailsJob\",\"queue\":\"default\",\"args\":[{\"job_class\":\"SendMailsJob\",\"job_id\":\"69e14b5f-559a-4ffc-bde6-40babb6d779a\",\"queue_name\":\"default\",\"priority\":null,\"arguments\":[{\"_aj_globalid\":\"gid://book-store/Book/7\"}],\"locale\":\"en\"}],\"retry\":true,\"jid\":\"3d78d3c81c6b554c4c3d7bbc\",\"created_at\":1532545633.6385205,\"enqueued_at\":1533111665.386782,\"error_message\":\"undefined method `url' for nil:NilClass\\nDid you mean?  URI\",\"error_class\":\"NoMethodError\",\"failed_at\":1532545634.8540719,\"retry_count\":19,\"retried_at\":1532980944.5611446}"}
2018-08-01T08:21:06.230Z 14838 TID-gmuflibuw WARN: NoMethodError: undefined method `url' for nil:NilClass
Did you mean?  URI
2018-08-01T08:21:06.240Z 14838 TID-gmuflibuw WARN: /home/deploy/www/app/mailers/book_mailer.rb:8:in `send_book'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionpack-5.0.1/lib/abstract_controller/base.rb:188:in `process_action'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionpack-5.0.1/lib/abstract_controller/callbacks.rb:20:in `block in process_action'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:97:in `__run_callbacks__'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:90:in `run_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionpack-5.0.1/lib/abstract_controller/callbacks.rb:19:in `process_action'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionpack-5.0.1/lib/abstract_controller/base.rb:126:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/rescuable.rb:23:in `block in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/rescuable.rb:15:in `handle_exceptions'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/rescuable.rb:22:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionview-5.0.1/lib/action_view/rendering.rb:30:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/base.rb:595:in `block in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications.rb:164:in `block in instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications/instrumenter.rb:21:in `instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications.rb:164:in `instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/base.rb:594:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/message_delivery.rb:105:in `block in processed_mailer'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/message_delivery.rb:104:in `tap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/message_delivery.rb:104:in `processed_mailer'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/message_delivery.rb:27:in `__getobj__'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/2.3.0/delegate.rb:80:in `method_missing'
/home/deploy/www/app/jobs/send_mails_job.rb:6:in `perform'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:34:in `block in perform_now'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:126:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/i18n-0.8.0/lib/i18n.rb:257:in `with_locale'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/translation.rb:7:in `block (2 levels) in <module:Translation>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `instance_exec'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `block in make_lambda'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:285:in `block in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:447:in `block in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:24:in `block (4 levels) in <module:Logging>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications.rb:164:in `block in instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications/instrumenter.rb:21:in `instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications.rb:164:in `instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:23:in `block (3 levels) in <module:Logging>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:44:in `block in tag_logger'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/tagged_logging.rb:69:in `block in tagged'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/tagged_logging.rb:26:in `tagged'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/tagged_logging.rb:69:in `tagged'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:44:in `tag_logger'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:20:in `block (2 levels) in <module:Logging>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `instance_exec'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `block in make_lambda'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:285:in `block in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:447:in `block in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:101:in `__run_callbacks__'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:750:in `_run_perform_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:90:in `run_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:33:in `perform_now'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:22:in `block in execute'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:126:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/railtie.rb:26:in `block (4 levels) in <class:Railtie>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:85:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:68:in `block in wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:81:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:67:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/railtie.rb:25:in `block (3 levels) in <class:Railtie>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `instance_exec'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `block in make_lambda'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:285:in `block in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:447:in `block in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:101:in `__run_callbacks__'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:750:in `_run_execute_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:90:in `run_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:20:in `execute'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/queue_adapters/sidekiq_adapter.rb:40:in `perform'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:199:in `execute_job'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:170:in `block (2 levels) in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/middleware/chain.rb:128:in `block in invoke'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/middleware/chain.rb:133:in `invoke'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:169:in `block in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:141:in `block (6 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/job_retry.rb:97:in `local'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:140:in `block (5 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/rails.rb:42:in `block in call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:85:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:68:in `block in wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:85:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:67:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/rails.rb:41:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:136:in `block (4 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:215:in `stats'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:131:in `block (3 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/job_logger.rb:7:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:130:in `block (2 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/job_retry.rb:72:in `global'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:129:in `block in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/logging.rb:44:in `with_context'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/logging.rb:38:in `with_job_hash_context'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:128:in `dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:168:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:85:in `process_one'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:73:in `run'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/util.rb:16:in `watchdog'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/util.rb:25:in `block in safe_thread'
2018-08-03T04:57:57.078Z 14838 TID-gmuflibio SendMailsJob JID-3d78d3c81c6b554c4c3d7bbc INFO: start
2018-08-03T04:57:57.233Z 14838 TID-gmuflibio SendMailsJob JID-3d78d3c81c6b554c4c3d7bbc INFO: fail: 0.155 sec
2018-08-03T04:57:57.233Z 14838 TID-gmuflibio WARN: {"context":"Job raised exception","job":{"class":"ActiveJob::QueueAdapters::SidekiqAdapter::JobWrapper","wrapped":"SendMailsJob","queue":"default","args":[{"job_class":"SendMailsJob","job_id":"69e14b5f-559a-4ffc-bde6-40babb6d779a","queue_name":"default","priority":null,"arguments":[{"_aj_globalid":"gid://book-store/Book/7"}],"locale":"en"}],"retry":true,"jid":"3d78d3c81c6b554c4c3d7bbc","created_at":1532545633.6385205,"enqueued_at":1533272277.067152,"error_message":"undefined method `url' for nil:NilClass\nDid you mean?  URI","error_class":"NoMethodError","failed_at":1532545634.8540719,"retry_count":21,"retried_at":1533272277.2307694},"jobstr":"{\"class\":\"ActiveJob::QueueAdapters::SidekiqAdapter::JobWrapper\",\"wrapped\":\"SendMailsJob\",\"queue\":\"default\",\"args\":[{\"job_class\":\"SendMailsJob\",\"job_id\":\"69e14b5f-559a-4ffc-bde6-40babb6d779a\",\"queue_name\":\"default\",\"priority\":null,\"arguments\":[{\"_aj_globalid\":\"gid://book-store/Book/7\"}],\"locale\":\"en\"}],\"retry\":true,\"jid\":\"3d78d3c81c6b554c4c3d7bbc\",\"created_at\":1532545633.6385205,\"enqueued_at\":1533272277.067152,\"error_message\":\"undefined method `url' for nil:NilClass\\nDid you mean?  URI\",\"error_class\":\"NoMethodError\",\"failed_at\":1532545634.8540719,\"retry_count\":20,\"retried_at\":1533111666.1967337}"}
2018-08-03T04:57:57.234Z 14838 TID-gmuflibio WARN: NoMethodError: undefined method `url' for nil:NilClass
Did you mean?  URI
2018-08-03T04:57:57.234Z 14838 TID-gmuflibio WARN: /home/deploy/www/app/mailers/book_mailer.rb:8:in `send_book'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionpack-5.0.1/lib/abstract_controller/base.rb:188:in `process_action'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionpack-5.0.1/lib/abstract_controller/callbacks.rb:20:in `block in process_action'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:97:in `__run_callbacks__'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:90:in `run_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionpack-5.0.1/lib/abstract_controller/callbacks.rb:19:in `process_action'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionpack-5.0.1/lib/abstract_controller/base.rb:126:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/rescuable.rb:23:in `block in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/rescuable.rb:15:in `handle_exceptions'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/rescuable.rb:22:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionview-5.0.1/lib/action_view/rendering.rb:30:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/base.rb:595:in `block in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications.rb:164:in `block in instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications/instrumenter.rb:21:in `instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications.rb:164:in `instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/base.rb:594:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/message_delivery.rb:105:in `block in processed_mailer'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/message_delivery.rb:104:in `tap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/message_delivery.rb:104:in `processed_mailer'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/message_delivery.rb:27:in `__getobj__'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/2.3.0/delegate.rb:80:in `method_missing'
/home/deploy/www/app/jobs/send_mails_job.rb:6:in `perform'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:34:in `block in perform_now'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:126:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/i18n-0.8.0/lib/i18n.rb:257:in `with_locale'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/translation.rb:7:in `block (2 levels) in <module:Translation>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `instance_exec'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `block in make_lambda'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:285:in `block in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:447:in `block in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:24:in `block (4 levels) in <module:Logging>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications.rb:164:in `block in instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications/instrumenter.rb:21:in `instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications.rb:164:in `instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:23:in `block (3 levels) in <module:Logging>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:44:in `block in tag_logger'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/tagged_logging.rb:69:in `block in tagged'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/tagged_logging.rb:26:in `tagged'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/tagged_logging.rb:69:in `tagged'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:44:in `tag_logger'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:20:in `block (2 levels) in <module:Logging>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `instance_exec'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `block in make_lambda'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:285:in `block in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:447:in `block in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:101:in `__run_callbacks__'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:750:in `_run_perform_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:90:in `run_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:33:in `perform_now'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:22:in `block in execute'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:126:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/railtie.rb:26:in `block (4 levels) in <class:Railtie>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:85:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:68:in `block in wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:81:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:67:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/railtie.rb:25:in `block (3 levels) in <class:Railtie>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `instance_exec'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `block in make_lambda'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:285:in `block in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:447:in `block in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:101:in `__run_callbacks__'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:750:in `_run_execute_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:90:in `run_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:20:in `execute'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/queue_adapters/sidekiq_adapter.rb:40:in `perform'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:199:in `execute_job'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:170:in `block (2 levels) in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/middleware/chain.rb:128:in `block in invoke'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/middleware/chain.rb:133:in `invoke'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:169:in `block in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:141:in `block (6 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/job_retry.rb:97:in `local'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:140:in `block (5 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/rails.rb:42:in `block in call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:85:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:68:in `block in wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:85:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:67:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/rails.rb:41:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:136:in `block (4 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:215:in `stats'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:131:in `block (3 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/job_logger.rb:7:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:130:in `block (2 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/job_retry.rb:72:in `global'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:129:in `block in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/logging.rb:44:in `with_context'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/logging.rb:38:in `with_job_hash_context'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:128:in `dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:168:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:85:in `process_one'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:73:in `run'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/util.rb:16:in `watchdog'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/util.rb:25:in `block in safe_thread'
2018-08-05T11:03:20.361Z 14838 TID-gmuf2pp5k SendMailsJob JID-3d78d3c81c6b554c4c3d7bbc INFO: start
2018-08-05T11:03:20.578Z 14838 TID-gmuf2pp5k SendMailsJob JID-3d78d3c81c6b554c4c3d7bbc INFO: fail: 0.217 sec
2018-08-05T11:03:20.579Z 14838 TID-gmuf2pp5k WARN: {"context":"Job raised exception","job":{"class":"ActiveJob::QueueAdapters::SidekiqAdapter::JobWrapper","wrapped":"SendMailsJob","queue":"default","args":[{"job_class":"SendMailsJob","job_id":"69e14b5f-559a-4ffc-bde6-40babb6d779a","queue_name":"default","priority":null,"arguments":[{"_aj_globalid":"gid://book-store/Book/7"}],"locale":"en"}],"retry":true,"jid":"3d78d3c81c6b554c4c3d7bbc","created_at":1532545633.6385205,"enqueued_at":1533467000.3530285,"error_message":"undefined method `url' for nil:NilClass\nDid you mean?  URI","error_class":"NoMethodError","failed_at":1532545634.8540719,"retry_count":22,"retried_at":1533467000.575007},"jobstr":"{\"class\":\"ActiveJob::QueueAdapters::SidekiqAdapter::JobWrapper\",\"wrapped\":\"SendMailsJob\",\"queue\":\"default\",\"args\":[{\"job_class\":\"SendMailsJob\",\"job_id\":\"69e14b5f-559a-4ffc-bde6-40babb6d779a\",\"queue_name\":\"default\",\"priority\":null,\"arguments\":[{\"_aj_globalid\":\"gid://book-store/Book/7\"}],\"locale\":\"en\"}],\"retry\":true,\"jid\":\"3d78d3c81c6b554c4c3d7bbc\",\"created_at\":1532545633.6385205,\"enqueued_at\":1533467000.3530285,\"error_message\":\"undefined method `url' for nil:NilClass\\nDid you mean?  URI\",\"error_class\":\"NoMethodError\",\"failed_at\":1532545634.8540719,\"retry_count\":21,\"retried_at\":1533272277.2307694}"}
2018-08-05T11:03:20.579Z 14838 TID-gmuf2pp5k WARN: NoMethodError: undefined method `url' for nil:NilClass
Did you mean?  URI
2018-08-05T11:03:20.579Z 14838 TID-gmuf2pp5k WARN: /home/deploy/www/app/mailers/book_mailer.rb:8:in `send_book'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionpack-5.0.1/lib/abstract_controller/base.rb:188:in `process_action'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionpack-5.0.1/lib/abstract_controller/callbacks.rb:20:in `block in process_action'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:97:in `__run_callbacks__'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:90:in `run_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionpack-5.0.1/lib/abstract_controller/callbacks.rb:19:in `process_action'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionpack-5.0.1/lib/abstract_controller/base.rb:126:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/rescuable.rb:23:in `block in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/rescuable.rb:15:in `handle_exceptions'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/rescuable.rb:22:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionview-5.0.1/lib/action_view/rendering.rb:30:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/base.rb:595:in `block in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications.rb:164:in `block in instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications/instrumenter.rb:21:in `instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications.rb:164:in `instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/base.rb:594:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/message_delivery.rb:105:in `block in processed_mailer'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/message_delivery.rb:104:in `tap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/message_delivery.rb:104:in `processed_mailer'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/message_delivery.rb:27:in `__getobj__'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/2.3.0/delegate.rb:80:in `method_missing'
/home/deploy/www/app/jobs/send_mails_job.rb:6:in `perform'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:34:in `block in perform_now'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:126:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/i18n-0.8.0/lib/i18n.rb:257:in `with_locale'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/translation.rb:7:in `block (2 levels) in <module:Translation>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `instance_exec'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `block in make_lambda'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:285:in `block in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:447:in `block in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:24:in `block (4 levels) in <module:Logging>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications.rb:164:in `block in instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications/instrumenter.rb:21:in `instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications.rb:164:in `instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:23:in `block (3 levels) in <module:Logging>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:44:in `block in tag_logger'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/tagged_logging.rb:69:in `block in tagged'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/tagged_logging.rb:26:in `tagged'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/tagged_logging.rb:69:in `tagged'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:44:in `tag_logger'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:20:in `block (2 levels) in <module:Logging>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `instance_exec'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `block in make_lambda'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:285:in `block in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:447:in `block in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:101:in `__run_callbacks__'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:750:in `_run_perform_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:90:in `run_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:33:in `perform_now'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:22:in `block in execute'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:126:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/railtie.rb:26:in `block (4 levels) in <class:Railtie>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:85:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:68:in `block in wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:81:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:67:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/railtie.rb:25:in `block (3 levels) in <class:Railtie>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `instance_exec'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `block in make_lambda'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:285:in `block in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:447:in `block in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:101:in `__run_callbacks__'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:750:in `_run_execute_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:90:in `run_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:20:in `execute'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/queue_adapters/sidekiq_adapter.rb:40:in `perform'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:199:in `execute_job'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:170:in `block (2 levels) in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/middleware/chain.rb:128:in `block in invoke'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/middleware/chain.rb:133:in `invoke'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:169:in `block in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:141:in `block (6 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/job_retry.rb:97:in `local'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:140:in `block (5 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/rails.rb:42:in `block in call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:85:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:68:in `block in wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:85:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:67:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/rails.rb:41:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:136:in `block (4 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:215:in `stats'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:131:in `block (3 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/job_logger.rb:7:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:130:in `block (2 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/job_retry.rb:72:in `global'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:129:in `block in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/logging.rb:44:in `with_context'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/logging.rb:38:in `with_job_hash_context'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:128:in `dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:168:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:85:in `process_one'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:73:in `run'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/util.rb:16:in `watchdog'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/util.rb:25:in `block in safe_thread'
2018-08-08T04:18:22.418Z 14838 TID-gmuf2ppp0 SendMailsJob JID-3d78d3c81c6b554c4c3d7bbc INFO: start
2018-08-08T04:18:23.354Z 14838 TID-gmuf2ppp0 SendMailsJob JID-3d78d3c81c6b554c4c3d7bbc INFO: fail: 0.943 sec
2018-08-08T04:18:23.359Z 14838 TID-gmuf2ppp0 WARN: {"context":"Job raised exception","job":{"class":"ActiveJob::QueueAdapters::SidekiqAdapter::JobWrapper","wrapped":"SendMailsJob","queue":"default","args":[{"job_class":"SendMailsJob","job_id":"69e14b5f-559a-4ffc-bde6-40babb6d779a","queue_name":"default","priority":null,"arguments":[{"_aj_globalid":"gid://book-store/Book/7"}],"locale":"en"}],"retry":true,"jid":"3d78d3c81c6b554c4c3d7bbc","created_at":1532545633.6385205,"enqueued_at":1533701902.3781757,"error_message":"undefined method `url' for nil:NilClass\nDid you mean?  URI","error_class":"NoMethodError","failed_at":1532545634.8540719,"retry_count":23,"retried_at":1533701903.324095},"jobstr":"{\"class\":\"ActiveJob::QueueAdapters::SidekiqAdapter::JobWrapper\",\"wrapped\":\"SendMailsJob\",\"queue\":\"default\",\"args\":[{\"job_class\":\"SendMailsJob\",\"job_id\":\"69e14b5f-559a-4ffc-bde6-40babb6d779a\",\"queue_name\":\"default\",\"priority\":null,\"arguments\":[{\"_aj_globalid\":\"gid://book-store/Book/7\"}],\"locale\":\"en\"}],\"retry\":true,\"jid\":\"3d78d3c81c6b554c4c3d7bbc\",\"created_at\":1532545633.6385205,\"enqueued_at\":1533701902.3781757,\"error_message\":\"undefined method `url' for nil:NilClass\\nDid you mean?  URI\",\"error_class\":\"NoMethodError\",\"failed_at\":1532545634.8540719,\"retry_count\":22,\"retried_at\":1533467000.575007}"}
2018-08-08T04:18:23.360Z 14838 TID-gmuf2ppp0 WARN: NoMethodError: undefined method `url' for nil:NilClass
Did you mean?  URI
2018-08-08T04:18:23.361Z 14838 TID-gmuf2ppp0 WARN: /home/deploy/www/app/mailers/book_mailer.rb:8:in `send_book'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionpack-5.0.1/lib/abstract_controller/base.rb:188:in `process_action'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionpack-5.0.1/lib/abstract_controller/callbacks.rb:20:in `block in process_action'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:97:in `__run_callbacks__'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:90:in `run_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionpack-5.0.1/lib/abstract_controller/callbacks.rb:19:in `process_action'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionpack-5.0.1/lib/abstract_controller/base.rb:126:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/rescuable.rb:23:in `block in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/rescuable.rb:15:in `handle_exceptions'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/rescuable.rb:22:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionview-5.0.1/lib/action_view/rendering.rb:30:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/base.rb:595:in `block in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications.rb:164:in `block in instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications/instrumenter.rb:21:in `instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications.rb:164:in `instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/base.rb:594:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/message_delivery.rb:105:in `block in processed_mailer'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/message_delivery.rb:104:in `tap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/message_delivery.rb:104:in `processed_mailer'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/message_delivery.rb:27:in `__getobj__'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/2.3.0/delegate.rb:80:in `method_missing'
/home/deploy/www/app/jobs/send_mails_job.rb:6:in `perform'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:34:in `block in perform_now'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:126:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/i18n-0.8.0/lib/i18n.rb:257:in `with_locale'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/translation.rb:7:in `block (2 levels) in <module:Translation>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `instance_exec'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `block in make_lambda'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:285:in `block in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:447:in `block in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:24:in `block (4 levels) in <module:Logging>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications.rb:164:in `block in instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications/instrumenter.rb:21:in `instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications.rb:164:in `instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:23:in `block (3 levels) in <module:Logging>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:44:in `block in tag_logger'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/tagged_logging.rb:69:in `block in tagged'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/tagged_logging.rb:26:in `tagged'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/tagged_logging.rb:69:in `tagged'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:44:in `tag_logger'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:20:in `block (2 levels) in <module:Logging>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `instance_exec'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `block in make_lambda'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:285:in `block in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:447:in `block in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:101:in `__run_callbacks__'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:750:in `_run_perform_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:90:in `run_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:33:in `perform_now'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:22:in `block in execute'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:126:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/railtie.rb:26:in `block (4 levels) in <class:Railtie>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:85:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:68:in `block in wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:81:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:67:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/railtie.rb:25:in `block (3 levels) in <class:Railtie>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `instance_exec'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `block in make_lambda'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:285:in `block in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:447:in `block in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:101:in `__run_callbacks__'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:750:in `_run_execute_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:90:in `run_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:20:in `execute'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/queue_adapters/sidekiq_adapter.rb:40:in `perform'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:199:in `execute_job'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:170:in `block (2 levels) in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/middleware/chain.rb:128:in `block in invoke'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/middleware/chain.rb:133:in `invoke'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:169:in `block in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:141:in `block (6 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/job_retry.rb:97:in `local'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:140:in `block (5 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/rails.rb:42:in `block in call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:85:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:68:in `block in wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:85:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:67:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/rails.rb:41:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:136:in `block (4 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:215:in `stats'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:131:in `block (3 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/job_logger.rb:7:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:130:in `block (2 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/job_retry.rb:72:in `global'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:129:in `block in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/logging.rb:44:in `with_context'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/logging.rb:38:in `with_job_hash_context'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:128:in `dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:168:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:85:in `process_one'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:73:in `run'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/util.rb:16:in `watchdog'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/util.rb:25:in `block in safe_thread'
2018-08-11T10:09:22.585Z 14838 TID-gmufqpuss SendMailsJob JID-3d78d3c81c6b554c4c3d7bbc INFO: start
2018-08-11T10:09:22.724Z 14838 TID-gmufqpuss SendMailsJob JID-3d78d3c81c6b554c4c3d7bbc INFO: fail: 0.139 sec
2018-08-11T10:09:22.724Z 14838 TID-gmufqpuss WARN: {"context":"Job raised exception","job":{"class":"ActiveJob::QueueAdapters::SidekiqAdapter::JobWrapper","wrapped":"SendMailsJob","queue":"default","args":[{"job_class":"SendMailsJob","job_id":"69e14b5f-559a-4ffc-bde6-40babb6d779a","queue_name":"default","priority":null,"arguments":[{"_aj_globalid":"gid://book-store/Book/7"}],"locale":"en"}],"retry":true,"jid":"3d78d3c81c6b554c4c3d7bbc","created_at":1532545633.6385205,"enqueued_at":1533982162.575201,"error_message":"undefined method `url' for nil:NilClass\nDid you mean?  URI","error_class":"NoMethodError","failed_at":1532545634.8540719,"retry_count":24,"retried_at":1533982162.7152545},"jobstr":"{\"class\":\"ActiveJob::QueueAdapters::SidekiqAdapter::JobWrapper\",\"wrapped\":\"SendMailsJob\",\"queue\":\"default\",\"args\":[{\"job_class\":\"SendMailsJob\",\"job_id\":\"69e14b5f-559a-4ffc-bde6-40babb6d779a\",\"queue_name\":\"default\",\"priority\":null,\"arguments\":[{\"_aj_globalid\":\"gid://book-store/Book/7\"}],\"locale\":\"en\"}],\"retry\":true,\"jid\":\"3d78d3c81c6b554c4c3d7bbc\",\"created_at\":1532545633.6385205,\"enqueued_at\":1533982162.575201,\"error_message\":\"undefined method `url' for nil:NilClass\\nDid you mean?  URI\",\"error_class\":\"NoMethodError\",\"failed_at\":1532545634.8540719,\"retry_count\":23,\"retried_at\":1533701903.324095}"}
2018-08-11T10:09:22.724Z 14838 TID-gmufqpuss WARN: NoMethodError: undefined method `url' for nil:NilClass
Did you mean?  URI
2018-08-11T10:09:22.724Z 14838 TID-gmufqpuss WARN: /home/deploy/www/app/mailers/book_mailer.rb:8:in `send_book'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionpack-5.0.1/lib/abstract_controller/base.rb:188:in `process_action'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionpack-5.0.1/lib/abstract_controller/callbacks.rb:20:in `block in process_action'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:97:in `__run_callbacks__'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:90:in `run_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionpack-5.0.1/lib/abstract_controller/callbacks.rb:19:in `process_action'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionpack-5.0.1/lib/abstract_controller/base.rb:126:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/rescuable.rb:23:in `block in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/rescuable.rb:15:in `handle_exceptions'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/rescuable.rb:22:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionview-5.0.1/lib/action_view/rendering.rb:30:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/base.rb:595:in `block in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications.rb:164:in `block in instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications/instrumenter.rb:21:in `instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications.rb:164:in `instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/base.rb:594:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/message_delivery.rb:105:in `block in processed_mailer'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/message_delivery.rb:104:in `tap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/message_delivery.rb:104:in `processed_mailer'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/message_delivery.rb:27:in `__getobj__'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/2.3.0/delegate.rb:80:in `method_missing'
/home/deploy/www/app/jobs/send_mails_job.rb:6:in `perform'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:34:in `block in perform_now'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:126:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/i18n-0.8.0/lib/i18n.rb:257:in `with_locale'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/translation.rb:7:in `block (2 levels) in <module:Translation>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `instance_exec'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `block in make_lambda'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:285:in `block in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:447:in `block in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:24:in `block (4 levels) in <module:Logging>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications.rb:164:in `block in instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications/instrumenter.rb:21:in `instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications.rb:164:in `instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:23:in `block (3 levels) in <module:Logging>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:44:in `block in tag_logger'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/tagged_logging.rb:69:in `block in tagged'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/tagged_logging.rb:26:in `tagged'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/tagged_logging.rb:69:in `tagged'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:44:in `tag_logger'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:20:in `block (2 levels) in <module:Logging>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `instance_exec'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `block in make_lambda'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:285:in `block in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:447:in `block in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:101:in `__run_callbacks__'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:750:in `_run_perform_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:90:in `run_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:33:in `perform_now'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:22:in `block in execute'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:126:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/railtie.rb:26:in `block (4 levels) in <class:Railtie>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:85:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:68:in `block in wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:81:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:67:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/railtie.rb:25:in `block (3 levels) in <class:Railtie>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `instance_exec'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `block in make_lambda'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:285:in `block in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:447:in `block in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:101:in `__run_callbacks__'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:750:in `_run_execute_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:90:in `run_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:20:in `execute'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/queue_adapters/sidekiq_adapter.rb:40:in `perform'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:199:in `execute_job'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:170:in `block (2 levels) in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/middleware/chain.rb:128:in `block in invoke'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/middleware/chain.rb:133:in `invoke'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:169:in `block in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:141:in `block (6 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/job_retry.rb:97:in `local'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:140:in `block (5 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/rails.rb:42:in `block in call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:85:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:68:in `block in wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:85:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:67:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/rails.rb:41:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:136:in `block (4 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:215:in `stats'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:131:in `block (3 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/job_logger.rb:7:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:130:in `block (2 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/job_retry.rb:72:in `global'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:129:in `block in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/logging.rb:44:in `with_context'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/logging.rb:38:in `with_job_hash_context'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:128:in `dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:168:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:85:in `process_one'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:73:in `run'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/util.rb:16:in `watchdog'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/util.rb:25:in `block in safe_thread'
2018-08-15T06:20:08.106Z 14838 TID-gmufliaqc SendMailsJob JID-3d78d3c81c6b554c4c3d7bbc INFO: start
2018-08-15T06:20:08.177Z 14838 TID-gmufliaqc SendMailsJob JID-3d78d3c81c6b554c4c3d7bbc INFO: Adding dead ActiveJob::QueueAdapters::SidekiqAdapter::JobWrapper job 3d78d3c81c6b554c4c3d7bbc
2018-08-15T06:20:08.185Z 14838 TID-gmufliaqc SendMailsJob JID-3d78d3c81c6b554c4c3d7bbc INFO: fail: 0.078 sec
2018-08-15T06:20:08.187Z 14838 TID-gmufliaqc WARN: {"context":"Job raised exception","job":{"class":"ActiveJob::QueueAdapters::SidekiqAdapter::JobWrapper","wrapped":"SendMailsJob","queue":"default","args":[{"job_class":"SendMailsJob","job_id":"69e14b5f-559a-4ffc-bde6-40babb6d779a","queue_name":"default","priority":null,"arguments":[{"_aj_globalid":"gid://book-store/Book/7"}],"locale":"en"}],"retry":true,"jid":"3d78d3c81c6b554c4c3d7bbc","created_at":1532545633.6385205,"enqueued_at":1534314008.098331,"error_message":"undefined method `url' for nil:NilClass\nDid you mean?  URI","error_class":"NoMethodError","failed_at":1532545634.8540719,"retry_count":25,"retried_at":1534314008.177713},"jobstr":"{\"class\":\"ActiveJob::QueueAdapters::SidekiqAdapter::JobWrapper\",\"wrapped\":\"SendMailsJob\",\"queue\":\"default\",\"args\":[{\"job_class\":\"SendMailsJob\",\"job_id\":\"69e14b5f-559a-4ffc-bde6-40babb6d779a\",\"queue_name\":\"default\",\"priority\":null,\"arguments\":[{\"_aj_globalid\":\"gid://book-store/Book/7\"}],\"locale\":\"en\"}],\"retry\":true,\"jid\":\"3d78d3c81c6b554c4c3d7bbc\",\"created_at\":1532545633.6385205,\"enqueued_at\":1534314008.098331,\"error_message\":\"undefined method `url' for nil:NilClass\\nDid you mean?  URI\",\"error_class\":\"NoMethodError\",\"failed_at\":1532545634.8540719,\"retry_count\":24,\"retried_at\":1533982162.7152545}"}
2018-08-15T06:20:08.187Z 14838 TID-gmufliaqc WARN: NoMethodError: undefined method `url' for nil:NilClass
Did you mean?  URI
2018-08-15T06:20:08.187Z 14838 TID-gmufliaqc WARN: /home/deploy/www/app/mailers/book_mailer.rb:8:in `send_book'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionpack-5.0.1/lib/abstract_controller/base.rb:188:in `process_action'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionpack-5.0.1/lib/abstract_controller/callbacks.rb:20:in `block in process_action'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:97:in `__run_callbacks__'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:90:in `run_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionpack-5.0.1/lib/abstract_controller/callbacks.rb:19:in `process_action'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionpack-5.0.1/lib/abstract_controller/base.rb:126:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/rescuable.rb:23:in `block in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/rescuable.rb:15:in `handle_exceptions'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/rescuable.rb:22:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionview-5.0.1/lib/action_view/rendering.rb:30:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/base.rb:595:in `block in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications.rb:164:in `block in instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications/instrumenter.rb:21:in `instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications.rb:164:in `instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/base.rb:594:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/message_delivery.rb:105:in `block in processed_mailer'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/message_delivery.rb:104:in `tap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/message_delivery.rb:104:in `processed_mailer'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/message_delivery.rb:27:in `__getobj__'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/2.3.0/delegate.rb:80:in `method_missing'
/home/deploy/www/app/jobs/send_mails_job.rb:6:in `perform'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:34:in `block in perform_now'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:126:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/i18n-0.8.0/lib/i18n.rb:257:in `with_locale'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/translation.rb:7:in `block (2 levels) in <module:Translation>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `instance_exec'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `block in make_lambda'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:285:in `block in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:447:in `block in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:24:in `block (4 levels) in <module:Logging>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications.rb:164:in `block in instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications/instrumenter.rb:21:in `instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications.rb:164:in `instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:23:in `block (3 levels) in <module:Logging>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:44:in `block in tag_logger'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/tagged_logging.rb:69:in `block in tagged'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/tagged_logging.rb:26:in `tagged'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/tagged_logging.rb:69:in `tagged'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:44:in `tag_logger'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:20:in `block (2 levels) in <module:Logging>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `instance_exec'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `block in make_lambda'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:285:in `block in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:447:in `block in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:101:in `__run_callbacks__'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:750:in `_run_perform_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:90:in `run_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:33:in `perform_now'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:22:in `block in execute'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:126:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/railtie.rb:26:in `block (4 levels) in <class:Railtie>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:85:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:68:in `block in wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:81:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:67:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/railtie.rb:25:in `block (3 levels) in <class:Railtie>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `instance_exec'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `block in make_lambda'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:285:in `block in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:447:in `block in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:101:in `__run_callbacks__'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:750:in `_run_execute_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:90:in `run_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:20:in `execute'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/queue_adapters/sidekiq_adapter.rb:40:in `perform'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:199:in `execute_job'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:170:in `block (2 levels) in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/middleware/chain.rb:128:in `block in invoke'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/middleware/chain.rb:133:in `invoke'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:169:in `block in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:141:in `block (6 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/job_retry.rb:97:in `local'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:140:in `block (5 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/rails.rb:42:in `block in call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:85:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:68:in `block in wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:85:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:67:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/rails.rb:41:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:136:in `block (4 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:215:in `stats'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:131:in `block (3 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/job_logger.rb:7:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:130:in `block (2 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/job_retry.rb:72:in `global'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:129:in `block in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/logging.rb:44:in `with_context'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/logging.rb:38:in `with_job_hash_context'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:128:in `dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:168:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:85:in `process_one'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:73:in `run'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/util.rb:16:in `watchdog'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/util.rb:25:in `block in safe_thread'
2018-08-21T12:57:45.684Z 14838 TID-gmufn1xvo SendMailsJob JID-3b3a9201cc692b9b207c584f INFO: start
FATAL:  terminating connection due to administrator command
2018-08-21T12:57:46.269Z 14838 TID-gmufn1xvo SendMailsJob JID-3b3a9201cc692b9b207c584f INFO: fail: 0.589 sec
2018-08-21T12:57:46.270Z 14838 TID-gmufn1xvo WARN: {"context":"Job raised exception","job":{"class":"ActiveJob::QueueAdapters::SidekiqAdapter::JobWrapper","wrapped":"SendMailsJob","queue":"default","args":[{"job_class":"SendMailsJob","job_id":"92f57ef4-74f2-42ed-908d-aa42c584e98c","queue_name":"default","priority":null,"arguments":[{"_aj_globalid":"gid://book-store/Book/8"}],"locale":"en"}],"retry":true,"jid":"3b3a9201cc692b9b207c584f","created_at":1534856265.6621265,"enqueued_at":1534856265.6624737,"error_message":"undefined method `url' for nil:NilClass\nDid you mean?  URI","error_class":"NoMethodError","failed_at":1534856266.2488687,"retry_count":0},"jobstr":"{\"class\":\"ActiveJob::QueueAdapters::SidekiqAdapter::JobWrapper\",\"wrapped\":\"SendMailsJob\",\"queue\":\"default\",\"args\":[{\"job_class\":\"SendMailsJob\",\"job_id\":\"92f57ef4-74f2-42ed-908d-aa42c584e98c\",\"queue_name\":\"default\",\"priority\":null,\"arguments\":[{\"_aj_globalid\":\"gid://book-store/Book/8\"}],\"locale\":\"en\"}],\"retry\":true,\"jid\":\"3b3a9201cc692b9b207c584f\",\"created_at\":1534856265.6621265,\"enqueued_at\":1534856265.6624737}"}
2018-08-21T12:57:46.270Z 14838 TID-gmufn1xvo WARN: NoMethodError: undefined method `url' for nil:NilClass
Did you mean?  URI
2018-08-21T12:57:46.271Z 14838 TID-gmufn1xvo WARN: /home/deploy/www/app/mailers/book_mailer.rb:8:in `send_book'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionpack-5.0.1/lib/abstract_controller/base.rb:188:in `process_action'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionpack-5.0.1/lib/abstract_controller/callbacks.rb:20:in `block in process_action'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:97:in `__run_callbacks__'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:90:in `run_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionpack-5.0.1/lib/abstract_controller/callbacks.rb:19:in `process_action'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionpack-5.0.1/lib/abstract_controller/base.rb:126:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/rescuable.rb:23:in `block in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/rescuable.rb:15:in `handle_exceptions'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/rescuable.rb:22:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionview-5.0.1/lib/action_view/rendering.rb:30:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/base.rb:595:in `block in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications.rb:164:in `block in instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications/instrumenter.rb:21:in `instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications.rb:164:in `instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/base.rb:594:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/message_delivery.rb:105:in `block in processed_mailer'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/message_delivery.rb:104:in `tap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/message_delivery.rb:104:in `processed_mailer'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/message_delivery.rb:27:in `__getobj__'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/2.3.0/delegate.rb:80:in `method_missing'
/home/deploy/www/app/jobs/send_mails_job.rb:6:in `perform'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:34:in `block in perform_now'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:126:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/i18n-0.8.0/lib/i18n.rb:257:in `with_locale'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/translation.rb:7:in `block (2 levels) in <module:Translation>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `instance_exec'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `block in make_lambda'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:285:in `block in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:447:in `block in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:24:in `block (4 levels) in <module:Logging>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications.rb:164:in `block in instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications/instrumenter.rb:21:in `instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications.rb:164:in `instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:23:in `block (3 levels) in <module:Logging>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:44:in `block in tag_logger'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/tagged_logging.rb:69:in `block in tagged'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/tagged_logging.rb:26:in `tagged'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/tagged_logging.rb:69:in `tagged'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:44:in `tag_logger'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:20:in `block (2 levels) in <module:Logging>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `instance_exec'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `block in make_lambda'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:285:in `block in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:447:in `block in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:101:in `__run_callbacks__'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:750:in `_run_perform_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:90:in `run_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:33:in `perform_now'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:22:in `block in execute'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:126:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/railtie.rb:26:in `block (4 levels) in <class:Railtie>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:85:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:68:in `block in wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:81:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:67:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/railtie.rb:25:in `block (3 levels) in <class:Railtie>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `instance_exec'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `block in make_lambda'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:285:in `block in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:447:in `block in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:101:in `__run_callbacks__'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:750:in `_run_execute_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:90:in `run_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:20:in `execute'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/queue_adapters/sidekiq_adapter.rb:40:in `perform'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:199:in `execute_job'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:170:in `block (2 levels) in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/middleware/chain.rb:128:in `block in invoke'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/middleware/chain.rb:133:in `invoke'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:169:in `block in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:141:in `block (6 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/job_retry.rb:97:in `local'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:140:in `block (5 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/rails.rb:42:in `block in call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:85:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:68:in `block in wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:85:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:67:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/rails.rb:41:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:136:in `block (4 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:215:in `stats'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:131:in `block (3 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/job_logger.rb:7:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:130:in `block (2 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/job_retry.rb:72:in `global'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:129:in `block in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/logging.rb:44:in `with_context'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/logging.rb:38:in `with_job_hash_context'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:128:in `dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:168:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:85:in `process_one'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:73:in `run'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/util.rb:16:in `watchdog'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/util.rb:25:in `block in safe_thread'
2018-08-21T12:58:08.546Z 14838 TID-gmuf68ta4 SendMailsJob JID-3b3a9201cc692b9b207c584f INFO: start
2018-08-21T12:58:08.606Z 14838 TID-gmuf68ta4 SendMailsJob JID-3b3a9201cc692b9b207c584f INFO: fail: 0.059 sec
2018-08-21T12:58:08.606Z 14838 TID-gmuf68ta4 WARN: {"context":"Job raised exception","job":{"class":"ActiveJob::QueueAdapters::SidekiqAdapter::JobWrapper","wrapped":"SendMailsJob","queue":"default","args":[{"job_class":"SendMailsJob","job_id":"92f57ef4-74f2-42ed-908d-aa42c584e98c","queue_name":"default","priority":null,"arguments":[{"_aj_globalid":"gid://book-store/Book/8"}],"locale":"en"}],"retry":true,"jid":"3b3a9201cc692b9b207c584f","created_at":1534856265.6621265,"enqueued_at":1534856288.5378573,"error_message":"undefined method `url' for nil:NilClass\nDid you mean?  URI","error_class":"NoMethodError","failed_at":1534856266.2488687,"retry_count":1,"retried_at":1534856288.6043997},"jobstr":"{\"class\":\"ActiveJob::QueueAdapters::SidekiqAdapter::JobWrapper\",\"wrapped\":\"SendMailsJob\",\"queue\":\"default\",\"args\":[{\"job_class\":\"SendMailsJob\",\"job_id\":\"92f57ef4-74f2-42ed-908d-aa42c584e98c\",\"queue_name\":\"default\",\"priority\":null,\"arguments\":[{\"_aj_globalid\":\"gid://book-store/Book/8\"}],\"locale\":\"en\"}],\"retry\":true,\"jid\":\"3b3a9201cc692b9b207c584f\",\"created_at\":1534856265.6621265,\"enqueued_at\":1534856288.5378573,\"error_message\":\"undefined method `url' for nil:NilClass\\nDid you mean?  URI\",\"error_class\":\"NoMethodError\",\"failed_at\":1534856266.2488687,\"retry_count\":0}"}
2018-08-21T12:58:08.606Z 14838 TID-gmuf68ta4 WARN: NoMethodError: undefined method `url' for nil:NilClass
Did you mean?  URI
2018-08-21T12:58:08.606Z 14838 TID-gmuf68ta4 WARN: /home/deploy/www/app/mailers/book_mailer.rb:8:in `send_book'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionpack-5.0.1/lib/abstract_controller/base.rb:188:in `process_action'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionpack-5.0.1/lib/abstract_controller/callbacks.rb:20:in `block in process_action'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:97:in `__run_callbacks__'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:90:in `run_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionpack-5.0.1/lib/abstract_controller/callbacks.rb:19:in `process_action'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionpack-5.0.1/lib/abstract_controller/base.rb:126:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/rescuable.rb:23:in `block in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/rescuable.rb:15:in `handle_exceptions'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/rescuable.rb:22:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionview-5.0.1/lib/action_view/rendering.rb:30:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/base.rb:595:in `block in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications.rb:164:in `block in instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications/instrumenter.rb:21:in `instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications.rb:164:in `instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/base.rb:594:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/message_delivery.rb:105:in `block in processed_mailer'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/message_delivery.rb:104:in `tap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/message_delivery.rb:104:in `processed_mailer'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/message_delivery.rb:27:in `__getobj__'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/2.3.0/delegate.rb:80:in `method_missing'
/home/deploy/www/app/jobs/send_mails_job.rb:6:in `perform'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:34:in `block in perform_now'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:126:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/i18n-0.8.0/lib/i18n.rb:257:in `with_locale'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/translation.rb:7:in `block (2 levels) in <module:Translation>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `instance_exec'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `block in make_lambda'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:285:in `block in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:447:in `block in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:24:in `block (4 levels) in <module:Logging>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications.rb:164:in `block in instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications/instrumenter.rb:21:in `instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications.rb:164:in `instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:23:in `block (3 levels) in <module:Logging>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:44:in `block in tag_logger'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/tagged_logging.rb:69:in `block in tagged'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/tagged_logging.rb:26:in `tagged'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/tagged_logging.rb:69:in `tagged'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:44:in `tag_logger'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:20:in `block (2 levels) in <module:Logging>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `instance_exec'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `block in make_lambda'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:285:in `block in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:447:in `block in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:101:in `__run_callbacks__'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:750:in `_run_perform_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:90:in `run_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:33:in `perform_now'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:22:in `block in execute'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:126:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/railtie.rb:26:in `block (4 levels) in <class:Railtie>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:85:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:68:in `block in wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:81:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:67:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/railtie.rb:25:in `block (3 levels) in <class:Railtie>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `instance_exec'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `block in make_lambda'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:285:in `block in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:447:in `block in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:101:in `__run_callbacks__'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:750:in `_run_execute_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:90:in `run_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:20:in `execute'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/queue_adapters/sidekiq_adapter.rb:40:in `perform'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:199:in `execute_job'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:170:in `block (2 levels) in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/middleware/chain.rb:128:in `block in invoke'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/middleware/chain.rb:133:in `invoke'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:169:in `block in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:141:in `block (6 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/job_retry.rb:97:in `local'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:140:in `block (5 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/rails.rb:42:in `block in call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:85:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:68:in `block in wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:85:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:67:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/rails.rb:41:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:136:in `block (4 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:215:in `stats'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:131:in `block (3 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/job_logger.rb:7:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:130:in `block (2 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/job_retry.rb:72:in `global'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:129:in `block in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/logging.rb:44:in `with_context'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/logging.rb:38:in `with_job_hash_context'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:128:in `dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:168:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:85:in `process_one'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:73:in `run'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/util.rb:16:in `watchdog'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/util.rb:25:in `block in safe_thread'
2018-08-21T12:59:03.709Z 14838 TID-gmufmezyc SendMailsJob JID-3b3a9201cc692b9b207c584f INFO: start
2018-08-21T12:59:03.765Z 14838 TID-gmufmezyc SendMailsJob JID-3b3a9201cc692b9b207c584f INFO: fail: 0.057 sec
2018-08-21T12:59:03.766Z 14838 TID-gmufmezyc WARN: {"context":"Job raised exception","job":{"class":"ActiveJob::QueueAdapters::SidekiqAdapter::JobWrapper","wrapped":"SendMailsJob","queue":"default","args":[{"job_class":"SendMailsJob","job_id":"92f57ef4-74f2-42ed-908d-aa42c584e98c","queue_name":"default","priority":null,"arguments":[{"_aj_globalid":"gid://book-store/Book/8"}],"locale":"en"}],"retry":true,"jid":"3b3a9201cc692b9b207c584f","created_at":1534856265.6621265,"enqueued_at":1534856343.70728,"error_message":"undefined method `url' for nil:NilClass\nDid you mean?  URI","error_class":"NoMethodError","failed_at":1534856266.2488687,"retry_count":2,"retried_at":1534856343.7645032},"jobstr":"{\"class\":\"ActiveJob::QueueAdapters::SidekiqAdapter::JobWrapper\",\"wrapped\":\"SendMailsJob\",\"queue\":\"default\",\"args\":[{\"job_class\":\"SendMailsJob\",\"job_id\":\"92f57ef4-74f2-42ed-908d-aa42c584e98c\",\"queue_name\":\"default\",\"priority\":null,\"arguments\":[{\"_aj_globalid\":\"gid://book-store/Book/8\"}],\"locale\":\"en\"}],\"retry\":true,\"jid\":\"3b3a9201cc692b9b207c584f\",\"created_at\":1534856265.6621265,\"enqueued_at\":1534856343.70728,\"error_message\":\"undefined method `url' for nil:NilClass\\nDid you mean?  URI\",\"error_class\":\"NoMethodError\",\"failed_at\":1534856266.2488687,\"retry_count\":1,\"retried_at\":1534856288.6043997}"}
2018-08-21T12:59:03.766Z 14838 TID-gmufmezyc WARN: NoMethodError: undefined method `url' for nil:NilClass
Did you mean?  URI
2018-08-21T12:59:03.767Z 14838 TID-gmufmezyc WARN: /home/deploy/www/app/mailers/book_mailer.rb:8:in `send_book'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionpack-5.0.1/lib/abstract_controller/base.rb:188:in `process_action'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionpack-5.0.1/lib/abstract_controller/callbacks.rb:20:in `block in process_action'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:97:in `__run_callbacks__'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:90:in `run_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionpack-5.0.1/lib/abstract_controller/callbacks.rb:19:in `process_action'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionpack-5.0.1/lib/abstract_controller/base.rb:126:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/rescuable.rb:23:in `block in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/rescuable.rb:15:in `handle_exceptions'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/rescuable.rb:22:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionview-5.0.1/lib/action_view/rendering.rb:30:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/base.rb:595:in `block in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications.rb:164:in `block in instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications/instrumenter.rb:21:in `instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications.rb:164:in `instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/base.rb:594:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/message_delivery.rb:105:in `block in processed_mailer'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/message_delivery.rb:104:in `tap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/message_delivery.rb:104:in `processed_mailer'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/message_delivery.rb:27:in `__getobj__'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/2.3.0/delegate.rb:80:in `method_missing'
/home/deploy/www/app/jobs/send_mails_job.rb:6:in `perform'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:34:in `block in perform_now'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:126:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/i18n-0.8.0/lib/i18n.rb:257:in `with_locale'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/translation.rb:7:in `block (2 levels) in <module:Translation>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `instance_exec'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `block in make_lambda'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:285:in `block in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:447:in `block in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:24:in `block (4 levels) in <module:Logging>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications.rb:164:in `block in instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications/instrumenter.rb:21:in `instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications.rb:164:in `instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:23:in `block (3 levels) in <module:Logging>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:44:in `block in tag_logger'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/tagged_logging.rb:69:in `block in tagged'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/tagged_logging.rb:26:in `tagged'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/tagged_logging.rb:69:in `tagged'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:44:in `tag_logger'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:20:in `block (2 levels) in <module:Logging>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `instance_exec'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `block in make_lambda'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:285:in `block in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:447:in `block in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:101:in `__run_callbacks__'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:750:in `_run_perform_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:90:in `run_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:33:in `perform_now'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:22:in `block in execute'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:126:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/railtie.rb:26:in `block (4 levels) in <class:Railtie>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:85:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:68:in `block in wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:81:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:67:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/railtie.rb:25:in `block (3 levels) in <class:Railtie>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `instance_exec'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `block in make_lambda'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:285:in `block in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:447:in `block in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:101:in `__run_callbacks__'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:750:in `_run_execute_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:90:in `run_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:20:in `execute'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/queue_adapters/sidekiq_adapter.rb:40:in `perform'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:199:in `execute_job'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:170:in `block (2 levels) in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/middleware/chain.rb:128:in `block in invoke'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/middleware/chain.rb:133:in `invoke'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:169:in `block in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:141:in `block (6 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/job_retry.rb:97:in `local'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:140:in `block (5 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/rails.rb:42:in `block in call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:85:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:68:in `block in wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:85:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:67:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/rails.rb:41:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:136:in `block (4 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:215:in `stats'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:131:in `block (3 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/job_logger.rb:7:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:130:in `block (2 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/job_retry.rb:72:in `global'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:129:in `block in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/logging.rb:44:in `with_context'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/logging.rb:38:in `with_job_hash_context'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:128:in `dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:168:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:85:in `process_one'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:73:in `run'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/util.rb:16:in `watchdog'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/util.rb:25:in `block in safe_thread'
2018-08-21T13:00:09.794Z 14838 TID-gmufliae4 SendMailsJob JID-3b3a9201cc692b9b207c584f INFO: start
2018-08-21T13:00:09.851Z 14838 TID-gmufliae4 SendMailsJob JID-3b3a9201cc692b9b207c584f INFO: fail: 0.057 sec
2018-08-21T13:00:09.851Z 14838 TID-gmufliae4 WARN: {"context":"Job raised exception","job":{"class":"ActiveJob::QueueAdapters::SidekiqAdapter::JobWrapper","wrapped":"SendMailsJob","queue":"default","args":[{"job_class":"SendMailsJob","job_id":"92f57ef4-74f2-42ed-908d-aa42c584e98c","queue_name":"default","priority":null,"arguments":[{"_aj_globalid":"gid://book-store/Book/8"}],"locale":"en"}],"retry":true,"jid":"3b3a9201cc692b9b207c584f","created_at":1534856265.6621265,"enqueued_at":1534856409.7929978,"error_message":"undefined method `url' for nil:NilClass\nDid you mean?  URI","error_class":"NoMethodError","failed_at":1534856266.2488687,"retry_count":3,"retried_at":1534856409.842652},"jobstr":"{\"class\":\"ActiveJob::QueueAdapters::SidekiqAdapter::JobWrapper\",\"wrapped\":\"SendMailsJob\",\"queue\":\"default\",\"args\":[{\"job_class\":\"SendMailsJob\",\"job_id\":\"92f57ef4-74f2-42ed-908d-aa42c584e98c\",\"queue_name\":\"default\",\"priority\":null,\"arguments\":[{\"_aj_globalid\":\"gid://book-store/Book/8\"}],\"locale\":\"en\"}],\"retry\":true,\"jid\":\"3b3a9201cc692b9b207c584f\",\"created_at\":1534856265.6621265,\"enqueued_at\":1534856409.7929978,\"error_message\":\"undefined method `url' for nil:NilClass\\nDid you mean?  URI\",\"error_class\":\"NoMethodError\",\"failed_at\":1534856266.2488687,\"retry_count\":2,\"retried_at\":1534856343.7645032}"}
2018-08-21T13:00:09.851Z 14838 TID-gmufliae4 WARN: NoMethodError: undefined method `url' for nil:NilClass
Did you mean?  URI
2018-08-21T13:00:09.851Z 14838 TID-gmufliae4 WARN: /home/deploy/www/app/mailers/book_mailer.rb:8:in `send_book'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionpack-5.0.1/lib/abstract_controller/base.rb:188:in `process_action'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionpack-5.0.1/lib/abstract_controller/callbacks.rb:20:in `block in process_action'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:97:in `__run_callbacks__'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:90:in `run_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionpack-5.0.1/lib/abstract_controller/callbacks.rb:19:in `process_action'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionpack-5.0.1/lib/abstract_controller/base.rb:126:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/rescuable.rb:23:in `block in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/rescuable.rb:15:in `handle_exceptions'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/rescuable.rb:22:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionview-5.0.1/lib/action_view/rendering.rb:30:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/base.rb:595:in `block in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications.rb:164:in `block in instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications/instrumenter.rb:21:in `instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications.rb:164:in `instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/base.rb:594:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/message_delivery.rb:105:in `block in processed_mailer'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/message_delivery.rb:104:in `tap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/message_delivery.rb:104:in `processed_mailer'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/message_delivery.rb:27:in `__getobj__'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/2.3.0/delegate.rb:80:in `method_missing'
/home/deploy/www/app/jobs/send_mails_job.rb:6:in `perform'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:34:in `block in perform_now'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:126:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/i18n-0.8.0/lib/i18n.rb:257:in `with_locale'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/translation.rb:7:in `block (2 levels) in <module:Translation>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `instance_exec'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `block in make_lambda'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:285:in `block in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:447:in `block in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:24:in `block (4 levels) in <module:Logging>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications.rb:164:in `block in instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications/instrumenter.rb:21:in `instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications.rb:164:in `instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:23:in `block (3 levels) in <module:Logging>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:44:in `block in tag_logger'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/tagged_logging.rb:69:in `block in tagged'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/tagged_logging.rb:26:in `tagged'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/tagged_logging.rb:69:in `tagged'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:44:in `tag_logger'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:20:in `block (2 levels) in <module:Logging>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `instance_exec'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `block in make_lambda'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:285:in `block in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:447:in `block in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:101:in `__run_callbacks__'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:750:in `_run_perform_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:90:in `run_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:33:in `perform_now'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:22:in `block in execute'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:126:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/railtie.rb:26:in `block (4 levels) in <class:Railtie>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:85:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:68:in `block in wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:81:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:67:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/railtie.rb:25:in `block (3 levels) in <class:Railtie>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `instance_exec'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `block in make_lambda'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:285:in `block in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:447:in `block in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:101:in `__run_callbacks__'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:750:in `_run_execute_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:90:in `run_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:20:in `execute'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/queue_adapters/sidekiq_adapter.rb:40:in `perform'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:199:in `execute_job'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:170:in `block (2 levels) in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/middleware/chain.rb:128:in `block in invoke'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/middleware/chain.rb:133:in `invoke'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:169:in `block in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:141:in `block (6 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/job_retry.rb:97:in `local'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:140:in `block (5 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/rails.rb:42:in `block in call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:85:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:68:in `block in wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:85:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:67:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/rails.rb:41:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:136:in `block (4 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:215:in `stats'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:131:in `block (3 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/job_logger.rb:7:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:130:in `block (2 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/job_retry.rb:72:in `global'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:129:in `block in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/logging.rb:44:in `with_context'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/logging.rb:38:in `with_job_hash_context'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:128:in `dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:168:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:85:in `process_one'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:73:in `run'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/util.rb:16:in `watchdog'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/util.rb:25:in `block in safe_thread'
2018-08-21T13:03:11.160Z 14838 TID-gmuflij90 SendMailsJob JID-3b3a9201cc692b9b207c584f INFO: start
2018-08-21T13:03:11.204Z 14838 TID-gmuflij90 SendMailsJob JID-3b3a9201cc692b9b207c584f INFO: fail: 0.044 sec
2018-08-21T13:03:11.205Z 14838 TID-gmuflij90 WARN: {"context":"Job raised exception","job":{"class":"ActiveJob::QueueAdapters::SidekiqAdapter::JobWrapper","wrapped":"SendMailsJob","queue":"default","args":[{"job_class":"SendMailsJob","job_id":"92f57ef4-74f2-42ed-908d-aa42c584e98c","queue_name":"default","priority":null,"arguments":[{"_aj_globalid":"gid://book-store/Book/8"}],"locale":"en"}],"retry":true,"jid":"3b3a9201cc692b9b207c584f","created_at":1534856265.6621265,"enqueued_at":1534856591.1594484,"error_message":"undefined method `url' for nil:NilClass\nDid you mean?  URI","error_class":"NoMethodError","failed_at":1534856266.2488687,"retry_count":4,"retried_at":1534856591.1969268},"jobstr":"{\"class\":\"ActiveJob::QueueAdapters::SidekiqAdapter::JobWrapper\",\"wrapped\":\"SendMailsJob\",\"queue\":\"default\",\"args\":[{\"job_class\":\"SendMailsJob\",\"job_id\":\"92f57ef4-74f2-42ed-908d-aa42c584e98c\",\"queue_name\":\"default\",\"priority\":null,\"arguments\":[{\"_aj_globalid\":\"gid://book-store/Book/8\"}],\"locale\":\"en\"}],\"retry\":true,\"jid\":\"3b3a9201cc692b9b207c584f\",\"created_at\":1534856265.6621265,\"enqueued_at\":1534856591.1594484,\"error_message\":\"undefined method `url' for nil:NilClass\\nDid you mean?  URI\",\"error_class\":\"NoMethodError\",\"failed_at\":1534856266.2488687,\"retry_count\":3,\"retried_at\":1534856409.842652}"}
2018-08-21T13:03:11.205Z 14838 TID-gmuflij90 WARN: NoMethodError: undefined method `url' for nil:NilClass
Did you mean?  URI
2018-08-21T13:03:11.206Z 14838 TID-gmuflij90 WARN: /home/deploy/www/app/mailers/book_mailer.rb:8:in `send_book'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionpack-5.0.1/lib/abstract_controller/base.rb:188:in `process_action'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionpack-5.0.1/lib/abstract_controller/callbacks.rb:20:in `block in process_action'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:97:in `__run_callbacks__'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:90:in `run_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionpack-5.0.1/lib/abstract_controller/callbacks.rb:19:in `process_action'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionpack-5.0.1/lib/abstract_controller/base.rb:126:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/rescuable.rb:23:in `block in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/rescuable.rb:15:in `handle_exceptions'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/rescuable.rb:22:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionview-5.0.1/lib/action_view/rendering.rb:30:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/base.rb:595:in `block in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications.rb:164:in `block in instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications/instrumenter.rb:21:in `instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications.rb:164:in `instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/base.rb:594:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/message_delivery.rb:105:in `block in processed_mailer'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/message_delivery.rb:104:in `tap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/message_delivery.rb:104:in `processed_mailer'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/message_delivery.rb:27:in `__getobj__'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/2.3.0/delegate.rb:80:in `method_missing'
/home/deploy/www/app/jobs/send_mails_job.rb:6:in `perform'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:34:in `block in perform_now'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:126:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/i18n-0.8.0/lib/i18n.rb:257:in `with_locale'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/translation.rb:7:in `block (2 levels) in <module:Translation>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `instance_exec'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `block in make_lambda'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:285:in `block in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:447:in `block in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:24:in `block (4 levels) in <module:Logging>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications.rb:164:in `block in instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications/instrumenter.rb:21:in `instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications.rb:164:in `instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:23:in `block (3 levels) in <module:Logging>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:44:in `block in tag_logger'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/tagged_logging.rb:69:in `block in tagged'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/tagged_logging.rb:26:in `tagged'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/tagged_logging.rb:69:in `tagged'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:44:in `tag_logger'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:20:in `block (2 levels) in <module:Logging>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `instance_exec'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `block in make_lambda'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:285:in `block in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:447:in `block in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:101:in `__run_callbacks__'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:750:in `_run_perform_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:90:in `run_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:33:in `perform_now'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:22:in `block in execute'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:126:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/railtie.rb:26:in `block (4 levels) in <class:Railtie>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:85:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:68:in `block in wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:81:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:67:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/railtie.rb:25:in `block (3 levels) in <class:Railtie>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `instance_exec'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `block in make_lambda'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:285:in `block in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:447:in `block in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:101:in `__run_callbacks__'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:750:in `_run_execute_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:90:in `run_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:20:in `execute'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/queue_adapters/sidekiq_adapter.rb:40:in `perform'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:199:in `execute_job'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:170:in `block (2 levels) in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/middleware/chain.rb:128:in `block in invoke'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/middleware/chain.rb:133:in `invoke'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:169:in `block in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:141:in `block (6 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/job_retry.rb:97:in `local'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:140:in `block (5 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/rails.rb:42:in `block in call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:85:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:68:in `block in wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:85:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:67:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/rails.rb:41:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:136:in `block (4 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:215:in `stats'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:131:in `block (3 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/job_logger.rb:7:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:130:in `block (2 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/job_retry.rb:72:in `global'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:129:in `block in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/logging.rb:44:in `with_context'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/logging.rb:38:in `with_job_hash_context'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:128:in `dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:168:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:85:in `process_one'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:73:in `run'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/util.rb:16:in `watchdog'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/util.rb:25:in `block in safe_thread'
2018-08-21T13:08:16.209Z 14838 TID-gmuflij2w SendMailsJob JID-3b3a9201cc692b9b207c584f INFO: start
2018-08-21T13:08:16.274Z 14838 TID-gmuflij2w SendMailsJob JID-3b3a9201cc692b9b207c584f INFO: fail: 0.064 sec
2018-08-21T13:08:16.274Z 14838 TID-gmuflij2w WARN: {"context":"Job raised exception","job":{"class":"ActiveJob::QueueAdapters::SidekiqAdapter::JobWrapper","wrapped":"SendMailsJob","queue":"default","args":[{"job_class":"SendMailsJob","job_id":"92f57ef4-74f2-42ed-908d-aa42c584e98c","queue_name":"default","priority":null,"arguments":[{"_aj_globalid":"gid://book-store/Book/8"}],"locale":"en"}],"retry":true,"jid":"3b3a9201cc692b9b207c584f","created_at":1534856265.6621265,"enqueued_at":1534856896.207478,"error_message":"undefined method `url' for nil:NilClass\nDid you mean?  URI","error_class":"NoMethodError","failed_at":1534856266.2488687,"retry_count":5,"retried_at":1534856896.2733707},"jobstr":"{\"class\":\"ActiveJob::QueueAdapters::SidekiqAdapter::JobWrapper\",\"wrapped\":\"SendMailsJob\",\"queue\":\"default\",\"args\":[{\"job_class\":\"SendMailsJob\",\"job_id\":\"92f57ef4-74f2-42ed-908d-aa42c584e98c\",\"queue_name\":\"default\",\"priority\":null,\"arguments\":[{\"_aj_globalid\":\"gid://book-store/Book/8\"}],\"locale\":\"en\"}],\"retry\":true,\"jid\":\"3b3a9201cc692b9b207c584f\",\"created_at\":1534856265.6621265,\"enqueued_at\":1534856896.207478,\"error_message\":\"undefined method `url' for nil:NilClass\\nDid you mean?  URI\",\"error_class\":\"NoMethodError\",\"failed_at\":1534856266.2488687,\"retry_count\":4,\"retried_at\":1534856591.1969268}"}
2018-08-21T13:08:16.274Z 14838 TID-gmuflij2w WARN: NoMethodError: undefined method `url' for nil:NilClass
Did you mean?  URI
2018-08-21T13:08:16.274Z 14838 TID-gmuflij2w WARN: /home/deploy/www/app/mailers/book_mailer.rb:8:in `send_book'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionpack-5.0.1/lib/abstract_controller/base.rb:188:in `process_action'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionpack-5.0.1/lib/abstract_controller/callbacks.rb:20:in `block in process_action'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:97:in `__run_callbacks__'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:90:in `run_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionpack-5.0.1/lib/abstract_controller/callbacks.rb:19:in `process_action'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionpack-5.0.1/lib/abstract_controller/base.rb:126:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/rescuable.rb:23:in `block in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/rescuable.rb:15:in `handle_exceptions'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/rescuable.rb:22:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionview-5.0.1/lib/action_view/rendering.rb:30:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/base.rb:595:in `block in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications.rb:164:in `block in instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications/instrumenter.rb:21:in `instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications.rb:164:in `instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/base.rb:594:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/message_delivery.rb:105:in `block in processed_mailer'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/message_delivery.rb:104:in `tap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/message_delivery.rb:104:in `processed_mailer'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/message_delivery.rb:27:in `__getobj__'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/2.3.0/delegate.rb:80:in `method_missing'
/home/deploy/www/app/jobs/send_mails_job.rb:6:in `perform'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:34:in `block in perform_now'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:126:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/i18n-0.8.0/lib/i18n.rb:257:in `with_locale'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/translation.rb:7:in `block (2 levels) in <module:Translation>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `instance_exec'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `block in make_lambda'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:285:in `block in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:447:in `block in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:24:in `block (4 levels) in <module:Logging>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications.rb:164:in `block in instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications/instrumenter.rb:21:in `instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications.rb:164:in `instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:23:in `block (3 levels) in <module:Logging>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:44:in `block in tag_logger'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/tagged_logging.rb:69:in `block in tagged'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/tagged_logging.rb:26:in `tagged'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/tagged_logging.rb:69:in `tagged'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:44:in `tag_logger'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:20:in `block (2 levels) in <module:Logging>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `instance_exec'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `block in make_lambda'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:285:in `block in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:447:in `block in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:101:in `__run_callbacks__'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:750:in `_run_perform_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:90:in `run_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:33:in `perform_now'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:22:in `block in execute'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:126:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/railtie.rb:26:in `block (4 levels) in <class:Railtie>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:85:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:68:in `block in wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:81:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:67:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/railtie.rb:25:in `block (3 levels) in <class:Railtie>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `instance_exec'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `block in make_lambda'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:285:in `block in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:447:in `block in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:101:in `__run_callbacks__'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:750:in `_run_execute_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:90:in `run_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:20:in `execute'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/queue_adapters/sidekiq_adapter.rb:40:in `perform'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:199:in `execute_job'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:170:in `block (2 levels) in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/middleware/chain.rb:128:in `block in invoke'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/middleware/chain.rb:133:in `invoke'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:169:in `block in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:141:in `block (6 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/job_retry.rb:97:in `local'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:140:in `block (5 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/rails.rb:42:in `block in call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:85:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:68:in `block in wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:85:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:67:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/rails.rb:41:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:136:in `block (4 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:215:in `stats'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:131:in `block (3 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/job_logger.rb:7:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:130:in `block (2 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/job_retry.rb:72:in `global'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:129:in `block in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/logging.rb:44:in `with_context'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/logging.rb:38:in `with_job_hash_context'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:128:in `dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:168:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:85:in `process_one'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:73:in `run'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/util.rb:16:in `watchdog'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/util.rb:25:in `block in safe_thread'
2018-08-21T13:20:56.678Z 14838 TID-gmuf2oyio SendMailsJob JID-3b3a9201cc692b9b207c584f INFO: start
2018-08-21T13:20:56.714Z 14838 TID-gmuf2oyio SendMailsJob JID-3b3a9201cc692b9b207c584f INFO: fail: 0.036 sec
2018-08-21T13:20:56.715Z 14838 TID-gmuf2oyio WARN: {"context":"Job raised exception","job":{"class":"ActiveJob::QueueAdapters::SidekiqAdapter::JobWrapper","wrapped":"SendMailsJob","queue":"default","args":[{"job_class":"SendMailsJob","job_id":"92f57ef4-74f2-42ed-908d-aa42c584e98c","queue_name":"default","priority":null,"arguments":[{"_aj_globalid":"gid://book-store/Book/8"}],"locale":"en"}],"retry":true,"jid":"3b3a9201cc692b9b207c584f","created_at":1534856265.6621265,"enqueued_at":1534857656.6776063,"error_message":"undefined method `url' for nil:NilClass\nDid you mean?  URI","error_class":"NoMethodError","failed_at":1534856266.2488687,"retry_count":6,"retried_at":1534857656.7132518},"jobstr":"{\"class\":\"ActiveJob::QueueAdapters::SidekiqAdapter::JobWrapper\",\"wrapped\":\"SendMailsJob\",\"queue\":\"default\",\"args\":[{\"job_class\":\"SendMailsJob\",\"job_id\":\"92f57ef4-74f2-42ed-908d-aa42c584e98c\",\"queue_name\":\"default\",\"priority\":null,\"arguments\":[{\"_aj_globalid\":\"gid://book-store/Book/8\"}],\"locale\":\"en\"}],\"retry\":true,\"jid\":\"3b3a9201cc692b9b207c584f\",\"created_at\":1534856265.6621265,\"enqueued_at\":1534857656.6776063,\"error_message\":\"undefined method `url' for nil:NilClass\\nDid you mean?  URI\",\"error_class\":\"NoMethodError\",\"failed_at\":1534856266.2488687,\"retry_count\":5,\"retried_at\":1534856896.2733707}"}
2018-08-21T13:20:56.715Z 14838 TID-gmuf2oyio WARN: NoMethodError: undefined method `url' for nil:NilClass
Did you mean?  URI
2018-08-21T13:20:56.718Z 14838 TID-gmuf2oyio WARN: /home/deploy/www/app/mailers/book_mailer.rb:8:in `send_book'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionpack-5.0.1/lib/abstract_controller/base.rb:188:in `process_action'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionpack-5.0.1/lib/abstract_controller/callbacks.rb:20:in `block in process_action'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:97:in `__run_callbacks__'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:90:in `run_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionpack-5.0.1/lib/abstract_controller/callbacks.rb:19:in `process_action'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionpack-5.0.1/lib/abstract_controller/base.rb:126:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/rescuable.rb:23:in `block in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/rescuable.rb:15:in `handle_exceptions'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/rescuable.rb:22:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionview-5.0.1/lib/action_view/rendering.rb:30:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/base.rb:595:in `block in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications.rb:164:in `block in instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications/instrumenter.rb:21:in `instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications.rb:164:in `instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/base.rb:594:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/message_delivery.rb:105:in `block in processed_mailer'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/message_delivery.rb:104:in `tap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/message_delivery.rb:104:in `processed_mailer'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/message_delivery.rb:27:in `__getobj__'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/2.3.0/delegate.rb:80:in `method_missing'
/home/deploy/www/app/jobs/send_mails_job.rb:6:in `perform'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:34:in `block in perform_now'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:126:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/i18n-0.8.0/lib/i18n.rb:257:in `with_locale'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/translation.rb:7:in `block (2 levels) in <module:Translation>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `instance_exec'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `block in make_lambda'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:285:in `block in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:447:in `block in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:24:in `block (4 levels) in <module:Logging>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications.rb:164:in `block in instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications/instrumenter.rb:21:in `instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications.rb:164:in `instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:23:in `block (3 levels) in <module:Logging>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:44:in `block in tag_logger'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/tagged_logging.rb:69:in `block in tagged'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/tagged_logging.rb:26:in `tagged'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/tagged_logging.rb:69:in `tagged'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:44:in `tag_logger'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:20:in `block (2 levels) in <module:Logging>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `instance_exec'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `block in make_lambda'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:285:in `block in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:447:in `block in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:101:in `__run_callbacks__'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:750:in `_run_perform_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:90:in `run_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:33:in `perform_now'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:22:in `block in execute'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:126:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/railtie.rb:26:in `block (4 levels) in <class:Railtie>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:85:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:68:in `block in wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:81:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:67:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/railtie.rb:25:in `block (3 levels) in <class:Railtie>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `instance_exec'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `block in make_lambda'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:285:in `block in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:447:in `block in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:101:in `__run_callbacks__'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:750:in `_run_execute_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:90:in `run_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:20:in `execute'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/queue_adapters/sidekiq_adapter.rb:40:in `perform'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:199:in `execute_job'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:170:in `block (2 levels) in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/middleware/chain.rb:128:in `block in invoke'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/middleware/chain.rb:133:in `invoke'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:169:in `block in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:141:in `block (6 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/job_retry.rb:97:in `local'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:140:in `block (5 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/rails.rb:42:in `block in call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:85:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:68:in `block in wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:85:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:67:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/rails.rb:41:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:136:in `block (4 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:215:in `stats'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:131:in `block (3 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/job_logger.rb:7:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:130:in `block (2 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/job_retry.rb:72:in `global'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:129:in `block in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/logging.rb:44:in `with_context'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/logging.rb:38:in `with_job_hash_context'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:128:in `dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:168:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:85:in `process_one'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:73:in `run'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/util.rb:16:in `watchdog'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/util.rb:25:in `block in safe_thread'
2018-08-21T13:46:13.405Z 14838 TID-gmuflxaj4 SendMailsJob JID-3b3a9201cc692b9b207c584f INFO: start
2018-08-21T13:46:13.474Z 14838 TID-gmuflxaj4 SendMailsJob JID-3b3a9201cc692b9b207c584f INFO: fail: 0.068 sec
2018-08-21T13:46:13.474Z 14838 TID-gmuflxaj4 WARN: {"context":"Job raised exception","job":{"class":"ActiveJob::QueueAdapters::SidekiqAdapter::JobWrapper","wrapped":"SendMailsJob","queue":"default","args":[{"job_class":"SendMailsJob","job_id":"92f57ef4-74f2-42ed-908d-aa42c584e98c","queue_name":"default","priority":null,"arguments":[{"_aj_globalid":"gid://book-store/Book/8"}],"locale":"en"}],"retry":true,"jid":"3b3a9201cc692b9b207c584f","created_at":1534856265.6621265,"enqueued_at":1534859173.402693,"error_message":"undefined method `url' for nil:NilClass\nDid you mean?  URI","error_class":"NoMethodError","failed_at":1534856266.2488687,"retry_count":7,"retried_at":1534859173.4728184},"jobstr":"{\"class\":\"ActiveJob::QueueAdapters::SidekiqAdapter::JobWrapper\",\"wrapped\":\"SendMailsJob\",\"queue\":\"default\",\"args\":[{\"job_class\":\"SendMailsJob\",\"job_id\":\"92f57ef4-74f2-42ed-908d-aa42c584e98c\",\"queue_name\":\"default\",\"priority\":null,\"arguments\":[{\"_aj_globalid\":\"gid://book-store/Book/8\"}],\"locale\":\"en\"}],\"retry\":true,\"jid\":\"3b3a9201cc692b9b207c584f\",\"created_at\":1534856265.6621265,\"enqueued_at\":1534859173.402693,\"error_message\":\"undefined method `url' for nil:NilClass\\nDid you mean?  URI\",\"error_class\":\"NoMethodError\",\"failed_at\":1534856266.2488687,\"retry_count\":6,\"retried_at\":1534857656.7132518}"}
2018-08-21T13:46:13.474Z 14838 TID-gmuflxaj4 WARN: NoMethodError: undefined method `url' for nil:NilClass
Did you mean?  URI
2018-08-21T13:46:13.483Z 14838 TID-gmuflxaj4 WARN: /home/deploy/www/app/mailers/book_mailer.rb:8:in `send_book'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionpack-5.0.1/lib/abstract_controller/base.rb:188:in `process_action'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionpack-5.0.1/lib/abstract_controller/callbacks.rb:20:in `block in process_action'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:97:in `__run_callbacks__'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:90:in `run_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionpack-5.0.1/lib/abstract_controller/callbacks.rb:19:in `process_action'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionpack-5.0.1/lib/abstract_controller/base.rb:126:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/rescuable.rb:23:in `block in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/rescuable.rb:15:in `handle_exceptions'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/rescuable.rb:22:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionview-5.0.1/lib/action_view/rendering.rb:30:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/base.rb:595:in `block in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications.rb:164:in `block in instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications/instrumenter.rb:21:in `instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications.rb:164:in `instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/base.rb:594:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/message_delivery.rb:105:in `block in processed_mailer'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/message_delivery.rb:104:in `tap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/message_delivery.rb:104:in `processed_mailer'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/message_delivery.rb:27:in `__getobj__'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/2.3.0/delegate.rb:80:in `method_missing'
/home/deploy/www/app/jobs/send_mails_job.rb:6:in `perform'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:34:in `block in perform_now'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:126:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/i18n-0.8.0/lib/i18n.rb:257:in `with_locale'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/translation.rb:7:in `block (2 levels) in <module:Translation>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `instance_exec'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `block in make_lambda'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:285:in `block in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:447:in `block in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:24:in `block (4 levels) in <module:Logging>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications.rb:164:in `block in instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications/instrumenter.rb:21:in `instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications.rb:164:in `instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:23:in `block (3 levels) in <module:Logging>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:44:in `block in tag_logger'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/tagged_logging.rb:69:in `block in tagged'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/tagged_logging.rb:26:in `tagged'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/tagged_logging.rb:69:in `tagged'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:44:in `tag_logger'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:20:in `block (2 levels) in <module:Logging>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `instance_exec'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `block in make_lambda'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:285:in `block in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:447:in `block in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:101:in `__run_callbacks__'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:750:in `_run_perform_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:90:in `run_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:33:in `perform_now'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:22:in `block in execute'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:126:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/railtie.rb:26:in `block (4 levels) in <class:Railtie>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:85:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:68:in `block in wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:81:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:67:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/railtie.rb:25:in `block (3 levels) in <class:Railtie>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `instance_exec'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `block in make_lambda'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:285:in `block in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:447:in `block in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:101:in `__run_callbacks__'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:750:in `_run_execute_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:90:in `run_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:20:in `execute'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/queue_adapters/sidekiq_adapter.rb:40:in `perform'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:199:in `execute_job'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:170:in `block (2 levels) in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/middleware/chain.rb:128:in `block in invoke'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/middleware/chain.rb:133:in `invoke'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:169:in `block in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:141:in `block (6 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/job_retry.rb:97:in `local'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:140:in `block (5 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/rails.rb:42:in `block in call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:85:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:68:in `block in wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:85:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:67:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/rails.rb:41:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:136:in `block (4 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:215:in `stats'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:131:in `block (3 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/job_logger.rb:7:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:130:in `block (2 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/job_retry.rb:72:in `global'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:129:in `block in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/logging.rb:44:in `with_context'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/logging.rb:38:in `with_job_hash_context'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:128:in `dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:168:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:85:in `process_one'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:73:in `run'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/util.rb:16:in `watchdog'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/util.rb:25:in `block in safe_thread'
2018-08-21T14:27:00.900Z 14838 TID-gmufr3dmw SendMailsJob JID-3b3a9201cc692b9b207c584f INFO: start
2018-08-21T14:27:00.926Z 14838 TID-gmufr3dmw SendMailsJob JID-3b3a9201cc692b9b207c584f INFO: fail: 0.026 sec
2018-08-21T14:27:00.927Z 14838 TID-gmufr3dmw WARN: {"context":"Job raised exception","job":{"class":"ActiveJob::QueueAdapters::SidekiqAdapter::JobWrapper","wrapped":"SendMailsJob","queue":"default","args":[{"job_class":"SendMailsJob","job_id":"92f57ef4-74f2-42ed-908d-aa42c584e98c","queue_name":"default","priority":null,"arguments":[{"_aj_globalid":"gid://book-store/Book/8"}],"locale":"en"}],"retry":true,"jid":"3b3a9201cc692b9b207c584f","created_at":1534856265.6621265,"enqueued_at":1534861620.8998377,"error_message":"undefined method `url' for nil:NilClass\nDid you mean?  URI","error_class":"NoMethodError","failed_at":1534856266.2488687,"retry_count":8,"retried_at":1534861620.924071},"jobstr":"{\"class\":\"ActiveJob::QueueAdapters::SidekiqAdapter::JobWrapper\",\"wrapped\":\"SendMailsJob\",\"queue\":\"default\",\"args\":[{\"job_class\":\"SendMailsJob\",\"job_id\":\"92f57ef4-74f2-42ed-908d-aa42c584e98c\",\"queue_name\":\"default\",\"priority\":null,\"arguments\":[{\"_aj_globalid\":\"gid://book-store/Book/8\"}],\"locale\":\"en\"}],\"retry\":true,\"jid\":\"3b3a9201cc692b9b207c584f\",\"created_at\":1534856265.6621265,\"enqueued_at\":1534861620.8998377,\"error_message\":\"undefined method `url' for nil:NilClass\\nDid you mean?  URI\",\"error_class\":\"NoMethodError\",\"failed_at\":1534856266.2488687,\"retry_count\":7,\"retried_at\":1534859173.4728184}"}
2018-08-21T14:27:00.929Z 14838 TID-gmufr3dmw WARN: NoMethodError: undefined method `url' for nil:NilClass
Did you mean?  URI
2018-08-21T14:27:00.930Z 14838 TID-gmufr3dmw WARN: /home/deploy/www/app/mailers/book_mailer.rb:8:in `send_book'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionpack-5.0.1/lib/abstract_controller/base.rb:188:in `process_action'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionpack-5.0.1/lib/abstract_controller/callbacks.rb:20:in `block in process_action'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:97:in `__run_callbacks__'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:90:in `run_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionpack-5.0.1/lib/abstract_controller/callbacks.rb:19:in `process_action'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionpack-5.0.1/lib/abstract_controller/base.rb:126:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/rescuable.rb:23:in `block in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/rescuable.rb:15:in `handle_exceptions'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/rescuable.rb:22:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionview-5.0.1/lib/action_view/rendering.rb:30:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/base.rb:595:in `block in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications.rb:164:in `block in instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications/instrumenter.rb:21:in `instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications.rb:164:in `instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/base.rb:594:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/message_delivery.rb:105:in `block in processed_mailer'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/message_delivery.rb:104:in `tap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/message_delivery.rb:104:in `processed_mailer'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/message_delivery.rb:27:in `__getobj__'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/2.3.0/delegate.rb:80:in `method_missing'
/home/deploy/www/app/jobs/send_mails_job.rb:6:in `perform'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:34:in `block in perform_now'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:126:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/i18n-0.8.0/lib/i18n.rb:257:in `with_locale'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/translation.rb:7:in `block (2 levels) in <module:Translation>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `instance_exec'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `block in make_lambda'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:285:in `block in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:447:in `block in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:24:in `block (4 levels) in <module:Logging>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications.rb:164:in `block in instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications/instrumenter.rb:21:in `instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications.rb:164:in `instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:23:in `block (3 levels) in <module:Logging>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:44:in `block in tag_logger'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/tagged_logging.rb:69:in `block in tagged'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/tagged_logging.rb:26:in `tagged'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/tagged_logging.rb:69:in `tagged'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:44:in `tag_logger'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:20:in `block (2 levels) in <module:Logging>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `instance_exec'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `block in make_lambda'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:285:in `block in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:447:in `block in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:101:in `__run_callbacks__'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:750:in `_run_perform_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:90:in `run_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:33:in `perform_now'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:22:in `block in execute'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:126:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/railtie.rb:26:in `block (4 levels) in <class:Railtie>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:85:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:68:in `block in wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:81:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:67:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/railtie.rb:25:in `block (3 levels) in <class:Railtie>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `instance_exec'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `block in make_lambda'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:285:in `block in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:447:in `block in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:101:in `__run_callbacks__'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:750:in `_run_execute_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:90:in `run_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:20:in `execute'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/queue_adapters/sidekiq_adapter.rb:40:in `perform'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:199:in `execute_job'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:170:in `block (2 levels) in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/middleware/chain.rb:128:in `block in invoke'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/middleware/chain.rb:133:in `invoke'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:169:in `block in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:141:in `block (6 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/job_retry.rb:97:in `local'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:140:in `block (5 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/rails.rb:42:in `block in call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:85:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:68:in `block in wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:85:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:67:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/rails.rb:41:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:136:in `block (4 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:215:in `stats'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:131:in `block (3 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/job_logger.rb:7:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:130:in `block (2 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/job_retry.rb:72:in `global'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:129:in `block in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/logging.rb:44:in `with_context'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/logging.rb:38:in `with_job_hash_context'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:128:in `dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:168:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:85:in `process_one'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:73:in `run'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/util.rb:16:in `watchdog'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/util.rb:25:in `block in safe_thread'
2018-08-21T15:39:11.446Z 14838 TID-gmufsi8sk SendMailsJob JID-3b3a9201cc692b9b207c584f INFO: start
2018-08-21T15:39:11.501Z 14838 TID-gmufsi8sk SendMailsJob JID-3b3a9201cc692b9b207c584f INFO: fail: 0.055 sec
2018-08-21T15:39:11.501Z 14838 TID-gmufsi8sk WARN: {"context":"Job raised exception","job":{"class":"ActiveJob::QueueAdapters::SidekiqAdapter::JobWrapper","wrapped":"SendMailsJob","queue":"default","args":[{"job_class":"SendMailsJob","job_id":"92f57ef4-74f2-42ed-908d-aa42c584e98c","queue_name":"default","priority":null,"arguments":[{"_aj_globalid":"gid://book-store/Book/8"}],"locale":"en"}],"retry":true,"jid":"3b3a9201cc692b9b207c584f","created_at":1534856265.6621265,"enqueued_at":1534865951.4434173,"error_message":"undefined method `url' for nil:NilClass\nDid you mean?  URI","error_class":"NoMethodError","failed_at":1534856266.2488687,"retry_count":9,"retried_at":1534865951.4916494},"jobstr":"{\"class\":\"ActiveJob::QueueAdapters::SidekiqAdapter::JobWrapper\",\"wrapped\":\"SendMailsJob\",\"queue\":\"default\",\"args\":[{\"job_class\":\"SendMailsJob\",\"job_id\":\"92f57ef4-74f2-42ed-908d-aa42c584e98c\",\"queue_name\":\"default\",\"priority\":null,\"arguments\":[{\"_aj_globalid\":\"gid://book-store/Book/8\"}],\"locale\":\"en\"}],\"retry\":true,\"jid\":\"3b3a9201cc692b9b207c584f\",\"created_at\":1534856265.6621265,\"enqueued_at\":1534865951.4434173,\"error_message\":\"undefined method `url' for nil:NilClass\\nDid you mean?  URI\",\"error_class\":\"NoMethodError\",\"failed_at\":1534856266.2488687,\"retry_count\":8,\"retried_at\":1534861620.924071}"}
2018-08-21T15:39:11.502Z 14838 TID-gmufsi8sk WARN: NoMethodError: undefined method `url' for nil:NilClass
Did you mean?  URI
2018-08-21T15:39:11.502Z 14838 TID-gmufsi8sk WARN: /home/deploy/www/app/mailers/book_mailer.rb:8:in `send_book'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionpack-5.0.1/lib/abstract_controller/base.rb:188:in `process_action'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionpack-5.0.1/lib/abstract_controller/callbacks.rb:20:in `block in process_action'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:97:in `__run_callbacks__'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:90:in `run_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionpack-5.0.1/lib/abstract_controller/callbacks.rb:19:in `process_action'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionpack-5.0.1/lib/abstract_controller/base.rb:126:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/rescuable.rb:23:in `block in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/rescuable.rb:15:in `handle_exceptions'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/rescuable.rb:22:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionview-5.0.1/lib/action_view/rendering.rb:30:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/base.rb:595:in `block in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications.rb:164:in `block in instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications/instrumenter.rb:21:in `instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications.rb:164:in `instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/base.rb:594:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/message_delivery.rb:105:in `block in processed_mailer'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/message_delivery.rb:104:in `tap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/message_delivery.rb:104:in `processed_mailer'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/message_delivery.rb:27:in `__getobj__'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/2.3.0/delegate.rb:80:in `method_missing'
/home/deploy/www/app/jobs/send_mails_job.rb:6:in `perform'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:34:in `block in perform_now'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:126:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/i18n-0.8.0/lib/i18n.rb:257:in `with_locale'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/translation.rb:7:in `block (2 levels) in <module:Translation>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `instance_exec'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `block in make_lambda'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:285:in `block in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:447:in `block in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:24:in `block (4 levels) in <module:Logging>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications.rb:164:in `block in instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications/instrumenter.rb:21:in `instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications.rb:164:in `instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:23:in `block (3 levels) in <module:Logging>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:44:in `block in tag_logger'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/tagged_logging.rb:69:in `block in tagged'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/tagged_logging.rb:26:in `tagged'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/tagged_logging.rb:69:in `tagged'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:44:in `tag_logger'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:20:in `block (2 levels) in <module:Logging>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `instance_exec'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `block in make_lambda'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:285:in `block in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:447:in `block in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:101:in `__run_callbacks__'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:750:in `_run_perform_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:90:in `run_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:33:in `perform_now'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:22:in `block in execute'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:126:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/railtie.rb:26:in `block (4 levels) in <class:Railtie>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:85:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:68:in `block in wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:81:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:67:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/railtie.rb:25:in `block (3 levels) in <class:Railtie>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `instance_exec'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `block in make_lambda'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:285:in `block in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:447:in `block in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:101:in `__run_callbacks__'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:750:in `_run_execute_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:90:in `run_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:20:in `execute'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/queue_adapters/sidekiq_adapter.rb:40:in `perform'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:199:in `execute_job'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:170:in `block (2 levels) in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/middleware/chain.rb:128:in `block in invoke'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/middleware/chain.rb:133:in `invoke'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:169:in `block in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:141:in `block (6 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/job_retry.rb:97:in `local'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:140:in `block (5 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/rails.rb:42:in `block in call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:85:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:68:in `block in wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:85:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:67:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/rails.rb:41:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:136:in `block (4 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:215:in `stats'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:131:in `block (3 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/job_logger.rb:7:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:130:in `block (2 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/job_retry.rb:72:in `global'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:129:in `block in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/logging.rb:44:in `with_context'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/logging.rb:38:in `with_job_hash_context'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:128:in `dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:168:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:85:in `process_one'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:73:in `run'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/util.rb:16:in `watchdog'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/util.rb:25:in `block in safe_thread'
2018-08-21T17:30:58.846Z 14838 TID-gmufsdw04 SendMailsJob JID-3b3a9201cc692b9b207c584f INFO: start
2018-08-21T17:30:58.882Z 14838 TID-gmufsdw04 SendMailsJob JID-3b3a9201cc692b9b207c584f INFO: fail: 0.036 sec
2018-08-21T17:30:58.882Z 14838 TID-gmufsdw04 WARN: {"context":"Job raised exception","job":{"class":"ActiveJob::QueueAdapters::SidekiqAdapter::JobWrapper","wrapped":"SendMailsJob","queue":"default","args":[{"job_class":"SendMailsJob","job_id":"92f57ef4-74f2-42ed-908d-aa42c584e98c","queue_name":"default","priority":null,"arguments":[{"_aj_globalid":"gid://book-store/Book/8"}],"locale":"en"}],"retry":true,"jid":"3b3a9201cc692b9b207c584f","created_at":1534856265.6621265,"enqueued_at":1534872658.8455946,"error_message":"undefined method `url' for nil:NilClass\nDid you mean?  URI","error_class":"NoMethodError","failed_at":1534856266.2488687,"retry_count":10,"retried_at":1534872658.8791373},"jobstr":"{\"class\":\"ActiveJob::QueueAdapters::SidekiqAdapter::JobWrapper\",\"wrapped\":\"SendMailsJob\",\"queue\":\"default\",\"args\":[{\"job_class\":\"SendMailsJob\",\"job_id\":\"92f57ef4-74f2-42ed-908d-aa42c584e98c\",\"queue_name\":\"default\",\"priority\":null,\"arguments\":[{\"_aj_globalid\":\"gid://book-store/Book/8\"}],\"locale\":\"en\"}],\"retry\":true,\"jid\":\"3b3a9201cc692b9b207c584f\",\"created_at\":1534856265.6621265,\"enqueued_at\":1534872658.8455946,\"error_message\":\"undefined method `url' for nil:NilClass\\nDid you mean?  URI\",\"error_class\":\"NoMethodError\",\"failed_at\":1534856266.2488687,\"retry_count\":9,\"retried_at\":1534865951.4916494}"}
2018-08-21T17:30:58.883Z 14838 TID-gmufsdw04 WARN: NoMethodError: undefined method `url' for nil:NilClass
Did you mean?  URI
2018-08-21T17:30:58.886Z 14838 TID-gmufsdw04 WARN: /home/deploy/www/app/mailers/book_mailer.rb:8:in `send_book'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionpack-5.0.1/lib/abstract_controller/base.rb:188:in `process_action'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionpack-5.0.1/lib/abstract_controller/callbacks.rb:20:in `block in process_action'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:97:in `__run_callbacks__'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:90:in `run_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionpack-5.0.1/lib/abstract_controller/callbacks.rb:19:in `process_action'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionpack-5.0.1/lib/abstract_controller/base.rb:126:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/rescuable.rb:23:in `block in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/rescuable.rb:15:in `handle_exceptions'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/rescuable.rb:22:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionview-5.0.1/lib/action_view/rendering.rb:30:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/base.rb:595:in `block in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications.rb:164:in `block in instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications/instrumenter.rb:21:in `instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications.rb:164:in `instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/base.rb:594:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/message_delivery.rb:105:in `block in processed_mailer'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/message_delivery.rb:104:in `tap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/message_delivery.rb:104:in `processed_mailer'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/message_delivery.rb:27:in `__getobj__'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/2.3.0/delegate.rb:80:in `method_missing'
/home/deploy/www/app/jobs/send_mails_job.rb:6:in `perform'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:34:in `block in perform_now'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:126:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/i18n-0.8.0/lib/i18n.rb:257:in `with_locale'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/translation.rb:7:in `block (2 levels) in <module:Translation>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `instance_exec'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `block in make_lambda'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:285:in `block in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:447:in `block in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:24:in `block (4 levels) in <module:Logging>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications.rb:164:in `block in instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications/instrumenter.rb:21:in `instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications.rb:164:in `instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:23:in `block (3 levels) in <module:Logging>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:44:in `block in tag_logger'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/tagged_logging.rb:69:in `block in tagged'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/tagged_logging.rb:26:in `tagged'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/tagged_logging.rb:69:in `tagged'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:44:in `tag_logger'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:20:in `block (2 levels) in <module:Logging>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `instance_exec'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `block in make_lambda'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:285:in `block in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:447:in `block in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:101:in `__run_callbacks__'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:750:in `_run_perform_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:90:in `run_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:33:in `perform_now'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:22:in `block in execute'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:126:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/railtie.rb:26:in `block (4 levels) in <class:Railtie>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:85:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:68:in `block in wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:81:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:67:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/railtie.rb:25:in `block (3 levels) in <class:Railtie>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `instance_exec'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `block in make_lambda'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:285:in `block in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:447:in `block in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:101:in `__run_callbacks__'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:750:in `_run_execute_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:90:in `run_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:20:in `execute'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/queue_adapters/sidekiq_adapter.rb:40:in `perform'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:199:in `execute_job'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:170:in `block (2 levels) in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/middleware/chain.rb:128:in `block in invoke'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/middleware/chain.rb:133:in `invoke'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:169:in `block in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:141:in `block (6 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/job_retry.rb:97:in `local'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:140:in `block (5 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/rails.rb:42:in `block in call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:85:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:68:in `block in wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:85:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:67:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/rails.rb:41:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:136:in `block (4 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:215:in `stats'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:131:in `block (3 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/job_logger.rb:7:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:130:in `block (2 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/job_retry.rb:72:in `global'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:129:in `block in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/logging.rb:44:in `with_context'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/logging.rb:38:in `with_job_hash_context'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:128:in `dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:168:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:85:in `process_one'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:73:in `run'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/util.rb:16:in `watchdog'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/util.rb:25:in `block in safe_thread'
2018-08-21T20:13:02.724Z 14838 TID-gmufpte8g SendMailsJob JID-1108c0f97b3b45c176d631d2 INFO: start
2018-08-21T20:13:02.772Z 14838 TID-gmufpte8g SendMailsJob JID-1108c0f97b3b45c176d631d2 INFO: fail: 0.049 sec
2018-08-21T20:13:02.778Z 14838 TID-gmufpte8g WARN: {"context":"Job raised exception","job":{"class":"ActiveJob::QueueAdapters::SidekiqAdapter::JobWrapper","wrapped":"SendMailsJob","queue":"default","args":[{"job_class":"SendMailsJob","job_id":"bcfeae89-a1a4-4e57-87f8-28a199e3280c","queue_name":"default","priority":null,"arguments":[{"_aj_globalid":"gid://book-store/Book/9"}],"locale":"en"}],"retry":true,"jid":"1108c0f97b3b45c176d631d2","created_at":1534882382.715988,"enqueued_at":1534882382.7221622,"error_message":"undefined method `url' for nil:NilClass\nDid you mean?  URI","error_class":"NoMethodError","failed_at":1534882382.7708082,"retry_count":0},"jobstr":"{\"class\":\"ActiveJob::QueueAdapters::SidekiqAdapter::JobWrapper\",\"wrapped\":\"SendMailsJob\",\"queue\":\"default\",\"args\":[{\"job_class\":\"SendMailsJob\",\"job_id\":\"bcfeae89-a1a4-4e57-87f8-28a199e3280c\",\"queue_name\":\"default\",\"priority\":null,\"arguments\":[{\"_aj_globalid\":\"gid://book-store/Book/9\"}],\"locale\":\"en\"}],\"retry\":true,\"jid\":\"1108c0f97b3b45c176d631d2\",\"created_at\":1534882382.715988,\"enqueued_at\":1534882382.7221622}"}
2018-08-21T20:13:02.778Z 14838 TID-gmufpte8g WARN: NoMethodError: undefined method `url' for nil:NilClass
Did you mean?  URI
2018-08-21T20:13:02.779Z 14838 TID-gmufpte8g WARN: /home/deploy/www/app/mailers/book_mailer.rb:8:in `send_book'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionpack-5.0.1/lib/abstract_controller/base.rb:188:in `process_action'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionpack-5.0.1/lib/abstract_controller/callbacks.rb:20:in `block in process_action'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:97:in `__run_callbacks__'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:90:in `run_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionpack-5.0.1/lib/abstract_controller/callbacks.rb:19:in `process_action'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionpack-5.0.1/lib/abstract_controller/base.rb:126:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/rescuable.rb:23:in `block in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/rescuable.rb:15:in `handle_exceptions'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/rescuable.rb:22:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionview-5.0.1/lib/action_view/rendering.rb:30:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/base.rb:595:in `block in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications.rb:164:in `block in instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications/instrumenter.rb:21:in `instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications.rb:164:in `instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/base.rb:594:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/message_delivery.rb:105:in `block in processed_mailer'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/message_delivery.rb:104:in `tap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/message_delivery.rb:104:in `processed_mailer'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/message_delivery.rb:27:in `__getobj__'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/2.3.0/delegate.rb:80:in `method_missing'
/home/deploy/www/app/jobs/send_mails_job.rb:6:in `perform'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:34:in `block in perform_now'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:126:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/i18n-0.8.0/lib/i18n.rb:257:in `with_locale'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/translation.rb:7:in `block (2 levels) in <module:Translation>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `instance_exec'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `block in make_lambda'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:285:in `block in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:447:in `block in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:24:in `block (4 levels) in <module:Logging>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications.rb:164:in `block in instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications/instrumenter.rb:21:in `instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications.rb:164:in `instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:23:in `block (3 levels) in <module:Logging>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:44:in `block in tag_logger'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/tagged_logging.rb:69:in `block in tagged'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/tagged_logging.rb:26:in `tagged'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/tagged_logging.rb:69:in `tagged'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:44:in `tag_logger'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:20:in `block (2 levels) in <module:Logging>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `instance_exec'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `block in make_lambda'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:285:in `block in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:447:in `block in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:101:in `__run_callbacks__'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:750:in `_run_perform_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:90:in `run_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:33:in `perform_now'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:22:in `block in execute'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:126:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/railtie.rb:26:in `block (4 levels) in <class:Railtie>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:85:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:68:in `block in wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:81:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:67:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/railtie.rb:25:in `block (3 levels) in <class:Railtie>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `instance_exec'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `block in make_lambda'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:285:in `block in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:447:in `block in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:101:in `__run_callbacks__'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:750:in `_run_execute_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:90:in `run_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:20:in `execute'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/queue_adapters/sidekiq_adapter.rb:40:in `perform'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:199:in `execute_job'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:170:in `block (2 levels) in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/middleware/chain.rb:128:in `block in invoke'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/middleware/chain.rb:133:in `invoke'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:169:in `block in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:141:in `block (6 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/job_retry.rb:97:in `local'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:140:in `block (5 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/rails.rb:42:in `block in call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:85:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:68:in `block in wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:85:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:67:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/rails.rb:41:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:136:in `block (4 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:215:in `stats'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:131:in `block (3 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/job_logger.rb:7:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:130:in `block (2 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/job_retry.rb:72:in `global'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:129:in `block in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/logging.rb:44:in `with_context'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/logging.rb:38:in `with_job_hash_context'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:128:in `dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:168:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:85:in `process_one'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:73:in `run'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/util.rb:16:in `watchdog'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/util.rb:25:in `block in safe_thread'
2018-08-21T20:13:31.639Z 14838 TID-gmufmamn0 SendMailsJob JID-1108c0f97b3b45c176d631d2 INFO: start
2018-08-21T20:13:31.696Z 14838 TID-gmufmamn0 SendMailsJob JID-1108c0f97b3b45c176d631d2 INFO: fail: 0.057 sec
2018-08-21T20:13:31.697Z 14838 TID-gmufmamn0 WARN: {"context":"Job raised exception","job":{"class":"ActiveJob::QueueAdapters::SidekiqAdapter::JobWrapper","wrapped":"SendMailsJob","queue":"default","args":[{"job_class":"SendMailsJob","job_id":"bcfeae89-a1a4-4e57-87f8-28a199e3280c","queue_name":"default","priority":null,"arguments":[{"_aj_globalid":"gid://book-store/Book/9"}],"locale":"en"}],"retry":true,"jid":"1108c0f97b3b45c176d631d2","created_at":1534882382.715988,"enqueued_at":1534882411.6303818,"error_message":"undefined method `url' for nil:NilClass\nDid you mean?  URI","error_class":"NoMethodError","failed_at":1534882382.7708082,"retry_count":1,"retried_at":1534882411.6881795},"jobstr":"{\"class\":\"ActiveJob::QueueAdapters::SidekiqAdapter::JobWrapper\",\"wrapped\":\"SendMailsJob\",\"queue\":\"default\",\"args\":[{\"job_class\":\"SendMailsJob\",\"job_id\":\"bcfeae89-a1a4-4e57-87f8-28a199e3280c\",\"queue_name\":\"default\",\"priority\":null,\"arguments\":[{\"_aj_globalid\":\"gid://book-store/Book/9\"}],\"locale\":\"en\"}],\"retry\":true,\"jid\":\"1108c0f97b3b45c176d631d2\",\"created_at\":1534882382.715988,\"enqueued_at\":1534882411.6303818,\"error_message\":\"undefined method `url' for nil:NilClass\\nDid you mean?  URI\",\"error_class\":\"NoMethodError\",\"failed_at\":1534882382.7708082,\"retry_count\":0}"}
2018-08-21T20:13:31.697Z 14838 TID-gmufmamn0 WARN: NoMethodError: undefined method `url' for nil:NilClass
Did you mean?  URI
2018-08-21T20:13:31.697Z 14838 TID-gmufmamn0 WARN: /home/deploy/www/app/mailers/book_mailer.rb:8:in `send_book'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionpack-5.0.1/lib/abstract_controller/base.rb:188:in `process_action'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionpack-5.0.1/lib/abstract_controller/callbacks.rb:20:in `block in process_action'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:97:in `__run_callbacks__'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:90:in `run_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionpack-5.0.1/lib/abstract_controller/callbacks.rb:19:in `process_action'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionpack-5.0.1/lib/abstract_controller/base.rb:126:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/rescuable.rb:23:in `block in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/rescuable.rb:15:in `handle_exceptions'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/rescuable.rb:22:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionview-5.0.1/lib/action_view/rendering.rb:30:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/base.rb:595:in `block in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications.rb:164:in `block in instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications/instrumenter.rb:21:in `instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications.rb:164:in `instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/base.rb:594:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/message_delivery.rb:105:in `block in processed_mailer'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/message_delivery.rb:104:in `tap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/message_delivery.rb:104:in `processed_mailer'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/message_delivery.rb:27:in `__getobj__'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/2.3.0/delegate.rb:80:in `method_missing'
/home/deploy/www/app/jobs/send_mails_job.rb:6:in `perform'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:34:in `block in perform_now'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:126:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/i18n-0.8.0/lib/i18n.rb:257:in `with_locale'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/translation.rb:7:in `block (2 levels) in <module:Translation>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `instance_exec'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `block in make_lambda'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:285:in `block in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:447:in `block in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:24:in `block (4 levels) in <module:Logging>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications.rb:164:in `block in instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications/instrumenter.rb:21:in `instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications.rb:164:in `instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:23:in `block (3 levels) in <module:Logging>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:44:in `block in tag_logger'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/tagged_logging.rb:69:in `block in tagged'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/tagged_logging.rb:26:in `tagged'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/tagged_logging.rb:69:in `tagged'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:44:in `tag_logger'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:20:in `block (2 levels) in <module:Logging>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `instance_exec'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `block in make_lambda'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:285:in `block in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:447:in `block in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:101:in `__run_callbacks__'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:750:in `_run_perform_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:90:in `run_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:33:in `perform_now'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:22:in `block in execute'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:126:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/railtie.rb:26:in `block (4 levels) in <class:Railtie>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:85:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:68:in `block in wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:81:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:67:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/railtie.rb:25:in `block (3 levels) in <class:Railtie>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `instance_exec'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `block in make_lambda'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:285:in `block in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:447:in `block in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:101:in `__run_callbacks__'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:750:in `_run_execute_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:90:in `run_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:20:in `execute'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/queue_adapters/sidekiq_adapter.rb:40:in `perform'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:199:in `execute_job'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:170:in `block (2 levels) in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/middleware/chain.rb:128:in `block in invoke'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/middleware/chain.rb:133:in `invoke'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:169:in `block in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:141:in `block (6 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/job_retry.rb:97:in `local'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:140:in `block (5 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/rails.rb:42:in `block in call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:85:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:68:in `block in wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:85:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:67:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/rails.rb:41:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:136:in `block (4 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:215:in `stats'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:131:in `block (3 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/job_logger.rb:7:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:130:in `block (2 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/job_retry.rb:72:in `global'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:129:in `block in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/logging.rb:44:in `with_context'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/logging.rb:38:in `with_job_hash_context'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:128:in `dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:168:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:85:in `process_one'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:73:in `run'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/util.rb:16:in `watchdog'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/util.rb:25:in `block in safe_thread'
2018-08-21T20:14:02.685Z 14838 TID-gmuflsxw8 SendMailsJob JID-1108c0f97b3b45c176d631d2 INFO: start
2018-08-21T20:14:02.721Z 14838 TID-gmuflsxw8 SendMailsJob JID-1108c0f97b3b45c176d631d2 INFO: fail: 0.035 sec
2018-08-21T20:14:02.721Z 14838 TID-gmuflsxw8 WARN: {"context":"Job raised exception","job":{"class":"ActiveJob::QueueAdapters::SidekiqAdapter::JobWrapper","wrapped":"SendMailsJob","queue":"default","args":[{"job_class":"SendMailsJob","job_id":"bcfeae89-a1a4-4e57-87f8-28a199e3280c","queue_name":"default","priority":null,"arguments":[{"_aj_globalid":"gid://book-store/Book/9"}],"locale":"en"}],"retry":true,"jid":"1108c0f97b3b45c176d631d2","created_at":1534882382.715988,"enqueued_at":1534882442.6845267,"error_message":"undefined method `url' for nil:NilClass\nDid you mean?  URI","error_class":"NoMethodError","failed_at":1534882382.7708082,"retry_count":2,"retried_at":1534882442.7195876},"jobstr":"{\"class\":\"ActiveJob::QueueAdapters::SidekiqAdapter::JobWrapper\",\"wrapped\":\"SendMailsJob\",\"queue\":\"default\",\"args\":[{\"job_class\":\"SendMailsJob\",\"job_id\":\"bcfeae89-a1a4-4e57-87f8-28a199e3280c\",\"queue_name\":\"default\",\"priority\":null,\"arguments\":[{\"_aj_globalid\":\"gid://book-store/Book/9\"}],\"locale\":\"en\"}],\"retry\":true,\"jid\":\"1108c0f97b3b45c176d631d2\",\"created_at\":1534882382.715988,\"enqueued_at\":1534882442.6845267,\"error_message\":\"undefined method `url' for nil:NilClass\\nDid you mean?  URI\",\"error_class\":\"NoMethodError\",\"failed_at\":1534882382.7708082,\"retry_count\":1,\"retried_at\":1534882411.6881795}"}
2018-08-21T20:14:02.721Z 14838 TID-gmuflsxw8 WARN: NoMethodError: undefined method `url' for nil:NilClass
Did you mean?  URI
2018-08-21T20:14:02.721Z 14838 TID-gmuflsxw8 WARN: /home/deploy/www/app/mailers/book_mailer.rb:8:in `send_book'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionpack-5.0.1/lib/abstract_controller/base.rb:188:in `process_action'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionpack-5.0.1/lib/abstract_controller/callbacks.rb:20:in `block in process_action'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:97:in `__run_callbacks__'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:90:in `run_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionpack-5.0.1/lib/abstract_controller/callbacks.rb:19:in `process_action'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionpack-5.0.1/lib/abstract_controller/base.rb:126:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/rescuable.rb:23:in `block in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/rescuable.rb:15:in `handle_exceptions'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/rescuable.rb:22:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionview-5.0.1/lib/action_view/rendering.rb:30:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/base.rb:595:in `block in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications.rb:164:in `block in instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications/instrumenter.rb:21:in `instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications.rb:164:in `instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/base.rb:594:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/message_delivery.rb:105:in `block in processed_mailer'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/message_delivery.rb:104:in `tap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/message_delivery.rb:104:in `processed_mailer'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/message_delivery.rb:27:in `__getobj__'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/2.3.0/delegate.rb:80:in `method_missing'
/home/deploy/www/app/jobs/send_mails_job.rb:6:in `perform'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:34:in `block in perform_now'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:126:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/i18n-0.8.0/lib/i18n.rb:257:in `with_locale'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/translation.rb:7:in `block (2 levels) in <module:Translation>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `instance_exec'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `block in make_lambda'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:285:in `block in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:447:in `block in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:24:in `block (4 levels) in <module:Logging>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications.rb:164:in `block in instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications/instrumenter.rb:21:in `instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications.rb:164:in `instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:23:in `block (3 levels) in <module:Logging>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:44:in `block in tag_logger'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/tagged_logging.rb:69:in `block in tagged'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/tagged_logging.rb:26:in `tagged'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/tagged_logging.rb:69:in `tagged'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:44:in `tag_logger'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:20:in `block (2 levels) in <module:Logging>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `instance_exec'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `block in make_lambda'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:285:in `block in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:447:in `block in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:101:in `__run_callbacks__'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:750:in `_run_perform_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:90:in `run_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:33:in `perform_now'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:22:in `block in execute'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:126:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/railtie.rb:26:in `block (4 levels) in <class:Railtie>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:85:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:68:in `block in wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:81:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:67:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/railtie.rb:25:in `block (3 levels) in <class:Railtie>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `instance_exec'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `block in make_lambda'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:285:in `block in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:447:in `block in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:101:in `__run_callbacks__'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:750:in `_run_execute_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:90:in `run_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:20:in `execute'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/queue_adapters/sidekiq_adapter.rb:40:in `perform'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:199:in `execute_job'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:170:in `block (2 levels) in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/middleware/chain.rb:128:in `block in invoke'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/middleware/chain.rb:133:in `invoke'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:169:in `block in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:141:in `block (6 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/job_retry.rb:97:in `local'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:140:in `block (5 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/rails.rb:42:in `block in call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:85:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:68:in `block in wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:85:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:67:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/rails.rb:41:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:136:in `block (4 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:215:in `stats'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:131:in `block (3 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/job_logger.rb:7:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:130:in `block (2 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/job_retry.rb:72:in `global'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:129:in `block in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/logging.rb:44:in `with_context'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/logging.rb:38:in `with_job_hash_context'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:128:in `dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:168:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:85:in `process_one'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:73:in `run'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/util.rb:16:in `watchdog'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/util.rb:25:in `block in safe_thread'
2018-08-21T20:15:27.671Z 14838 TID-gmuflwuf4 SendMailsJob JID-1108c0f97b3b45c176d631d2 INFO: start
2018-08-21T20:15:27.717Z 14838 TID-gmuflwuf4 SendMailsJob JID-1108c0f97b3b45c176d631d2 INFO: fail: 0.047 sec
2018-08-21T20:15:27.719Z 14838 TID-gmuflwuf4 WARN: {"context":"Job raised exception","job":{"class":"ActiveJob::QueueAdapters::SidekiqAdapter::JobWrapper","wrapped":"SendMailsJob","queue":"default","args":[{"job_class":"SendMailsJob","job_id":"bcfeae89-a1a4-4e57-87f8-28a199e3280c","queue_name":"default","priority":null,"arguments":[{"_aj_globalid":"gid://book-store/Book/9"}],"locale":"en"}],"retry":true,"jid":"1108c0f97b3b45c176d631d2","created_at":1534882382.715988,"enqueued_at":1534882527.6615083,"error_message":"undefined method `url' for nil:NilClass\nDid you mean?  URI","error_class":"NoMethodError","failed_at":1534882382.7708082,"retry_count":3,"retried_at":1534882527.716799},"jobstr":"{\"class\":\"ActiveJob::QueueAdapters::SidekiqAdapter::JobWrapper\",\"wrapped\":\"SendMailsJob\",\"queue\":\"default\",\"args\":[{\"job_class\":\"SendMailsJob\",\"job_id\":\"bcfeae89-a1a4-4e57-87f8-28a199e3280c\",\"queue_name\":\"default\",\"priority\":null,\"arguments\":[{\"_aj_globalid\":\"gid://book-store/Book/9\"}],\"locale\":\"en\"}],\"retry\":true,\"jid\":\"1108c0f97b3b45c176d631d2\",\"created_at\":1534882382.715988,\"enqueued_at\":1534882527.6615083,\"error_message\":\"undefined method `url' for nil:NilClass\\nDid you mean?  URI\",\"error_class\":\"NoMethodError\",\"failed_at\":1534882382.7708082,\"retry_count\":2,\"retried_at\":1534882442.7195876}"}
2018-08-21T20:15:27.720Z 14838 TID-gmuflwuf4 WARN: NoMethodError: undefined method `url' for nil:NilClass
Did you mean?  URI
2018-08-21T20:15:27.720Z 14838 TID-gmuflwuf4 WARN: /home/deploy/www/app/mailers/book_mailer.rb:8:in `send_book'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionpack-5.0.1/lib/abstract_controller/base.rb:188:in `process_action'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionpack-5.0.1/lib/abstract_controller/callbacks.rb:20:in `block in process_action'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:97:in `__run_callbacks__'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:90:in `run_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionpack-5.0.1/lib/abstract_controller/callbacks.rb:19:in `process_action'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionpack-5.0.1/lib/abstract_controller/base.rb:126:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/rescuable.rb:23:in `block in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/rescuable.rb:15:in `handle_exceptions'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/rescuable.rb:22:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionview-5.0.1/lib/action_view/rendering.rb:30:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/base.rb:595:in `block in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications.rb:164:in `block in instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications/instrumenter.rb:21:in `instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications.rb:164:in `instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/base.rb:594:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/message_delivery.rb:105:in `block in processed_mailer'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/message_delivery.rb:104:in `tap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/message_delivery.rb:104:in `processed_mailer'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/message_delivery.rb:27:in `__getobj__'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/2.3.0/delegate.rb:80:in `method_missing'
/home/deploy/www/app/jobs/send_mails_job.rb:6:in `perform'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:34:in `block in perform_now'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:126:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/i18n-0.8.0/lib/i18n.rb:257:in `with_locale'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/translation.rb:7:in `block (2 levels) in <module:Translation>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `instance_exec'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `block in make_lambda'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:285:in `block in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:447:in `block in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:24:in `block (4 levels) in <module:Logging>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications.rb:164:in `block in instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications/instrumenter.rb:21:in `instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications.rb:164:in `instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:23:in `block (3 levels) in <module:Logging>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:44:in `block in tag_logger'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/tagged_logging.rb:69:in `block in tagged'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/tagged_logging.rb:26:in `tagged'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/tagged_logging.rb:69:in `tagged'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:44:in `tag_logger'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:20:in `block (2 levels) in <module:Logging>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `instance_exec'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `block in make_lambda'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:285:in `block in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:447:in `block in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:101:in `__run_callbacks__'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:750:in `_run_perform_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:90:in `run_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:33:in `perform_now'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:22:in `block in execute'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:126:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/railtie.rb:26:in `block (4 levels) in <class:Railtie>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:85:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:68:in `block in wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:81:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:67:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/railtie.rb:25:in `block (3 levels) in <class:Railtie>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `instance_exec'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `block in make_lambda'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:285:in `block in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:447:in `block in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:101:in `__run_callbacks__'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:750:in `_run_execute_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:90:in `run_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:20:in `execute'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/queue_adapters/sidekiq_adapter.rb:40:in `perform'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:199:in `execute_job'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:170:in `block (2 levels) in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/middleware/chain.rb:128:in `block in invoke'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/middleware/chain.rb:133:in `invoke'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:169:in `block in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:141:in `block (6 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/job_retry.rb:97:in `local'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:140:in `block (5 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/rails.rb:42:in `block in call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:85:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:68:in `block in wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:85:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:67:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/rails.rb:41:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:136:in `block (4 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:215:in `stats'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:131:in `block (3 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/job_logger.rb:7:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:130:in `block (2 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/job_retry.rb:72:in `global'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:129:in `block in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/logging.rb:44:in `with_context'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/logging.rb:38:in `with_job_hash_context'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:128:in `dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:168:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:85:in `process_one'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:73:in `run'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/util.rb:16:in `watchdog'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/util.rb:25:in `block in safe_thread'
2018-08-21T20:17:11.051Z 14838 TID-gmufrn1yc SendMailsJob JID-1108c0f97b3b45c176d631d2 INFO: start
2018-08-21T20:17:11.099Z 14838 TID-gmufrn1yc SendMailsJob JID-1108c0f97b3b45c176d631d2 INFO: fail: 0.048 sec
2018-08-21T20:17:11.099Z 14838 TID-gmufrn1yc WARN: {"context":"Job raised exception","job":{"class":"ActiveJob::QueueAdapters::SidekiqAdapter::JobWrapper","wrapped":"SendMailsJob","queue":"default","args":[{"job_class":"SendMailsJob","job_id":"bcfeae89-a1a4-4e57-87f8-28a199e3280c","queue_name":"default","priority":null,"arguments":[{"_aj_globalid":"gid://book-store/Book/9"}],"locale":"en"}],"retry":true,"jid":"1108c0f97b3b45c176d631d2","created_at":1534882382.715988,"enqueued_at":1534882631.0409353,"error_message":"undefined method `url' for nil:NilClass\nDid you mean?  URI","error_class":"NoMethodError","failed_at":1534882382.7708082,"retry_count":4,"retried_at":1534882631.0985456},"jobstr":"{\"class\":\"ActiveJob::QueueAdapters::SidekiqAdapter::JobWrapper\",\"wrapped\":\"SendMailsJob\",\"queue\":\"default\",\"args\":[{\"job_class\":\"SendMailsJob\",\"job_id\":\"bcfeae89-a1a4-4e57-87f8-28a199e3280c\",\"queue_name\":\"default\",\"priority\":null,\"arguments\":[{\"_aj_globalid\":\"gid://book-store/Book/9\"}],\"locale\":\"en\"}],\"retry\":true,\"jid\":\"1108c0f97b3b45c176d631d2\",\"created_at\":1534882382.715988,\"enqueued_at\":1534882631.0409353,\"error_message\":\"undefined method `url' for nil:NilClass\\nDid you mean?  URI\",\"error_class\":\"NoMethodError\",\"failed_at\":1534882382.7708082,\"retry_count\":3,\"retried_at\":1534882527.716799}"}
2018-08-21T20:17:11.099Z 14838 TID-gmufrn1yc WARN: NoMethodError: undefined method `url' for nil:NilClass
Did you mean?  URI
2018-08-21T20:17:11.100Z 14838 TID-gmufrn1yc WARN: /home/deploy/www/app/mailers/book_mailer.rb:8:in `send_book'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionpack-5.0.1/lib/abstract_controller/base.rb:188:in `process_action'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionpack-5.0.1/lib/abstract_controller/callbacks.rb:20:in `block in process_action'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:97:in `__run_callbacks__'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:90:in `run_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionpack-5.0.1/lib/abstract_controller/callbacks.rb:19:in `process_action'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionpack-5.0.1/lib/abstract_controller/base.rb:126:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/rescuable.rb:23:in `block in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/rescuable.rb:15:in `handle_exceptions'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/rescuable.rb:22:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionview-5.0.1/lib/action_view/rendering.rb:30:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/base.rb:595:in `block in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications.rb:164:in `block in instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications/instrumenter.rb:21:in `instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications.rb:164:in `instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/base.rb:594:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/message_delivery.rb:105:in `block in processed_mailer'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/message_delivery.rb:104:in `tap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/message_delivery.rb:104:in `processed_mailer'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/message_delivery.rb:27:in `__getobj__'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/2.3.0/delegate.rb:80:in `method_missing'
/home/deploy/www/app/jobs/send_mails_job.rb:6:in `perform'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:34:in `block in perform_now'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:126:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/i18n-0.8.0/lib/i18n.rb:257:in `with_locale'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/translation.rb:7:in `block (2 levels) in <module:Translation>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `instance_exec'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `block in make_lambda'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:285:in `block in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:447:in `block in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:24:in `block (4 levels) in <module:Logging>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications.rb:164:in `block in instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications/instrumenter.rb:21:in `instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications.rb:164:in `instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:23:in `block (3 levels) in <module:Logging>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:44:in `block in tag_logger'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/tagged_logging.rb:69:in `block in tagged'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/tagged_logging.rb:26:in `tagged'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/tagged_logging.rb:69:in `tagged'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:44:in `tag_logger'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:20:in `block (2 levels) in <module:Logging>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `instance_exec'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `block in make_lambda'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:285:in `block in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:447:in `block in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:101:in `__run_callbacks__'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:750:in `_run_perform_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:90:in `run_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:33:in `perform_now'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:22:in `block in execute'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:126:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/railtie.rb:26:in `block (4 levels) in <class:Railtie>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:85:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:68:in `block in wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:81:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:67:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/railtie.rb:25:in `block (3 levels) in <class:Railtie>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `instance_exec'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `block in make_lambda'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:285:in `block in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:447:in `block in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:101:in `__run_callbacks__'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:750:in `_run_execute_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:90:in `run_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:20:in `execute'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/queue_adapters/sidekiq_adapter.rb:40:in `perform'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:199:in `execute_job'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:170:in `block (2 levels) in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/middleware/chain.rb:128:in `block in invoke'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/middleware/chain.rb:133:in `invoke'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:169:in `block in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:141:in `block (6 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/job_retry.rb:97:in `local'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:140:in `block (5 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/rails.rb:42:in `block in call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:85:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:68:in `block in wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:85:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:67:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/rails.rb:41:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:136:in `block (4 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:215:in `stats'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:131:in `block (3 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/job_logger.rb:7:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:130:in `block (2 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/job_retry.rb:72:in `global'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:129:in `block in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/logging.rb:44:in `with_context'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/logging.rb:38:in `with_job_hash_context'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:128:in `dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:168:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:85:in `process_one'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:73:in `run'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/util.rb:16:in `watchdog'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/util.rb:25:in `block in safe_thread'
2018-08-21T20:23:03.810Z 14838 TID-gmufrk7wg SendMailsJob JID-1108c0f97b3b45c176d631d2 INFO: start
2018-08-21T20:23:03.819Z 14838 TID-gmufrk8bg SendMailsJob JID-3b3a9201cc692b9b207c584f INFO: start
2018-08-21T20:23:03.922Z 14838 TID-gmufrk8bg SendMailsJob JID-3b3a9201cc692b9b207c584f INFO: fail: 0.103 sec
2018-08-21T20:23:03.922Z 14838 TID-gmufrk8bg WARN: {"context":"Job raised exception","job":{"class":"ActiveJob::QueueAdapters::SidekiqAdapter::JobWrapper","wrapped":"SendMailsJob","queue":"default","args":[{"job_class":"SendMailsJob","job_id":"92f57ef4-74f2-42ed-908d-aa42c584e98c","queue_name":"default","priority":null,"arguments":[{"_aj_globalid":"gid://book-store/Book/8"}],"locale":"en"}],"retry":true,"jid":"3b3a9201cc692b9b207c584f","created_at":1534856265.6621265,"enqueued_at":1534882983.8179562,"error_message":"undefined method `url' for nil:NilClass\nDid you mean?  URI","error_class":"NoMethodError","failed_at":1534856266.2488687,"retry_count":11,"retried_at":1534882983.9213462},"jobstr":"{\"class\":\"ActiveJob::QueueAdapters::SidekiqAdapter::JobWrapper\",\"wrapped\":\"SendMailsJob\",\"queue\":\"default\",\"args\":[{\"job_class\":\"SendMailsJob\",\"job_id\":\"92f57ef4-74f2-42ed-908d-aa42c584e98c\",\"queue_name\":\"default\",\"priority\":null,\"arguments\":[{\"_aj_globalid\":\"gid://book-store/Book/8\"}],\"locale\":\"en\"}],\"retry\":true,\"jid\":\"3b3a9201cc692b9b207c584f\",\"created_at\":1534856265.6621265,\"enqueued_at\":1534882983.8179562,\"error_message\":\"undefined method `url' for nil:NilClass\\nDid you mean?  URI\",\"error_class\":\"NoMethodError\",\"failed_at\":1534856266.2488687,\"retry_count\":10,\"retried_at\":1534872658.8791373}"}
2018-08-21T20:23:03.923Z 14838 TID-gmufrk8bg WARN: NoMethodError: undefined method `url' for nil:NilClass
Did you mean?  URI
2018-08-21T20:23:03.923Z 14838 TID-gmufrk8bg WARN: /home/deploy/www/app/mailers/book_mailer.rb:8:in `send_book'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionpack-5.0.1/lib/abstract_controller/base.rb:188:in `process_action'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionpack-5.0.1/lib/abstract_controller/callbacks.rb:20:in `block in process_action'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:97:in `__run_callbacks__'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:90:in `run_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionpack-5.0.1/lib/abstract_controller/callbacks.rb:19:in `process_action'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionpack-5.0.1/lib/abstract_controller/base.rb:126:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/rescuable.rb:23:in `block in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/rescuable.rb:15:in `handle_exceptions'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/rescuable.rb:22:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionview-5.0.1/lib/action_view/rendering.rb:30:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/base.rb:595:in `block in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications.rb:164:in `block in instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications/instrumenter.rb:21:in `instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications.rb:164:in `instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/base.rb:594:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/message_delivery.rb:105:in `block in processed_mailer'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/message_delivery.rb:104:in `tap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/message_delivery.rb:104:in `processed_mailer'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/message_delivery.rb:27:in `__getobj__'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/2.3.0/delegate.rb:80:in `method_missing'
/home/deploy/www/app/jobs/send_mails_job.rb:6:in `perform'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:34:in `block in perform_now'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:126:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/i18n-0.8.0/lib/i18n.rb:257:in `with_locale'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/translation.rb:7:in `block (2 levels) in <module:Translation>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `instance_exec'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `block in make_lambda'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:285:in `block in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:447:in `block in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:24:in `block (4 levels) in <module:Logging>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications.rb:164:in `block in instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications/instrumenter.rb:21:in `instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications.rb:164:in `instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:23:in `block (3 levels) in <module:Logging>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:44:in `block in tag_logger'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/tagged_logging.rb:69:in `block in tagged'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/tagged_logging.rb:26:in `tagged'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/tagged_logging.rb:69:in `tagged'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:44:in `tag_logger'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:20:in `block (2 levels) in <module:Logging>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `instance_exec'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `block in make_lambda'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:285:in `block in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:447:in `block in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:101:in `__run_callbacks__'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:750:in `_run_perform_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:90:in `run_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:33:in `perform_now'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:22:in `block in execute'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:126:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/railtie.rb:26:in `block (4 levels) in <class:Railtie>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:85:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:68:in `block in wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:81:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:67:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/railtie.rb:25:in `block (3 levels) in <class:Railtie>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `instance_exec'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `block in make_lambda'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:285:in `block in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:447:in `block in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:101:in `__run_callbacks__'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:750:in `_run_execute_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:90:in `run_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:20:in `execute'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/queue_adapters/sidekiq_adapter.rb:40:in `perform'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:199:in `execute_job'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:170:in `block (2 levels) in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/middleware/chain.rb:128:in `block in invoke'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/middleware/chain.rb:133:in `invoke'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:169:in `block in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:141:in `block (6 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/job_retry.rb:97:in `local'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:140:in `block (5 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/rails.rb:42:in `block in call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:85:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:68:in `block in wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:85:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:67:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/rails.rb:41:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:136:in `block (4 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:215:in `stats'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:131:in `block (3 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/job_logger.rb:7:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:130:in `block (2 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/job_retry.rb:72:in `global'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:129:in `block in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/logging.rb:44:in `with_context'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/logging.rb:38:in `with_job_hash_context'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:128:in `dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:168:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:85:in `process_one'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:73:in `run'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/util.rb:16:in `watchdog'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/util.rb:25:in `block in safe_thread'
2018-08-21T20:23:04.000Z 14838 TID-gmufrk7wg SendMailsJob JID-1108c0f97b3b45c176d631d2 INFO: fail: 0.19 sec
2018-08-21T20:23:04.000Z 14838 TID-gmufrk7wg WARN: {"context":"Job raised exception","job":{"class":"ActiveJob::QueueAdapters::SidekiqAdapter::JobWrapper","wrapped":"SendMailsJob","queue":"default","args":[{"job_class":"SendMailsJob","job_id":"bcfeae89-a1a4-4e57-87f8-28a199e3280c","queue_name":"default","priority":null,"arguments":[{"_aj_globalid":"gid://book-store/Book/9"}],"locale":"en"}],"retry":true,"jid":"1108c0f97b3b45c176d631d2","created_at":1534882382.715988,"enqueued_at":1534882983.8082347,"error_message":"undefined method `url' for nil:NilClass\nDid you mean?  URI","error_class":"NoMethodError","failed_at":1534882382.7708082,"retry_count":5,"retried_at":1534882983.9995337},"jobstr":"{\"class\":\"ActiveJob::QueueAdapters::SidekiqAdapter::JobWrapper\",\"wrapped\":\"SendMailsJob\",\"queue\":\"default\",\"args\":[{\"job_class\":\"SendMailsJob\",\"job_id\":\"bcfeae89-a1a4-4e57-87f8-28a199e3280c\",\"queue_name\":\"default\",\"priority\":null,\"arguments\":[{\"_aj_globalid\":\"gid://book-store/Book/9\"}],\"locale\":\"en\"}],\"retry\":true,\"jid\":\"1108c0f97b3b45c176d631d2\",\"created_at\":1534882382.715988,\"enqueued_at\":1534882983.8082347,\"error_message\":\"undefined method `url' for nil:NilClass\\nDid you mean?  URI\",\"error_class\":\"NoMethodError\",\"failed_at\":1534882382.7708082,\"retry_count\":4,\"retried_at\":1534882631.0985456}"}
2018-08-21T20:23:04.001Z 14838 TID-gmufrk7wg WARN: NoMethodError: undefined method `url' for nil:NilClass
Did you mean?  URI
2018-08-21T20:23:04.001Z 14838 TID-gmufrk7wg WARN: /home/deploy/www/app/mailers/book_mailer.rb:8:in `send_book'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionpack-5.0.1/lib/abstract_controller/base.rb:188:in `process_action'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionpack-5.0.1/lib/abstract_controller/callbacks.rb:20:in `block in process_action'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:97:in `__run_callbacks__'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:90:in `run_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionpack-5.0.1/lib/abstract_controller/callbacks.rb:19:in `process_action'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionpack-5.0.1/lib/abstract_controller/base.rb:126:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/rescuable.rb:23:in `block in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/rescuable.rb:15:in `handle_exceptions'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/rescuable.rb:22:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionview-5.0.1/lib/action_view/rendering.rb:30:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/base.rb:595:in `block in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications.rb:164:in `block in instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications/instrumenter.rb:21:in `instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications.rb:164:in `instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/base.rb:594:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/message_delivery.rb:105:in `block in processed_mailer'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/message_delivery.rb:104:in `tap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/message_delivery.rb:104:in `processed_mailer'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/message_delivery.rb:27:in `__getobj__'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/2.3.0/delegate.rb:80:in `method_missing'
/home/deploy/www/app/jobs/send_mails_job.rb:6:in `perform'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:34:in `block in perform_now'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:126:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/i18n-0.8.0/lib/i18n.rb:257:in `with_locale'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/translation.rb:7:in `block (2 levels) in <module:Translation>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `instance_exec'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `block in make_lambda'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:285:in `block in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:447:in `block in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:24:in `block (4 levels) in <module:Logging>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications.rb:164:in `block in instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications/instrumenter.rb:21:in `instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications.rb:164:in `instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:23:in `block (3 levels) in <module:Logging>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:44:in `block in tag_logger'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/tagged_logging.rb:69:in `block in tagged'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/tagged_logging.rb:26:in `tagged'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/tagged_logging.rb:69:in `tagged'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:44:in `tag_logger'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:20:in `block (2 levels) in <module:Logging>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `instance_exec'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `block in make_lambda'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:285:in `block in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:447:in `block in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:101:in `__run_callbacks__'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:750:in `_run_perform_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:90:in `run_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:33:in `perform_now'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:22:in `block in execute'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:126:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/railtie.rb:26:in `block (4 levels) in <class:Railtie>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:85:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:68:in `block in wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:81:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:67:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/railtie.rb:25:in `block (3 levels) in <class:Railtie>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `instance_exec'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `block in make_lambda'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:285:in `block in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:447:in `block in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:101:in `__run_callbacks__'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:750:in `_run_execute_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:90:in `run_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:20:in `execute'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/queue_adapters/sidekiq_adapter.rb:40:in `perform'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:199:in `execute_job'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:170:in `block (2 levels) in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/middleware/chain.rb:128:in `block in invoke'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/middleware/chain.rb:133:in `invoke'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:169:in `block in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:141:in `block (6 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/job_retry.rb:97:in `local'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:140:in `block (5 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/rails.rb:42:in `block in call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:85:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:68:in `block in wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:85:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:67:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/rails.rb:41:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:136:in `block (4 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:215:in `stats'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:131:in `block (3 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/job_logger.rb:7:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:130:in `block (2 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/job_retry.rb:72:in `global'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:129:in `block in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/logging.rb:44:in `with_context'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/logging.rb:38:in `with_job_hash_context'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:128:in `dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:168:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:85:in `process_one'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:73:in `run'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/util.rb:16:in `watchdog'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/util.rb:25:in `block in safe_thread'
2018-08-21T20:35:47.552Z 14838 TID-gmufofvlg SendMailsJob JID-1108c0f97b3b45c176d631d2 INFO: start
2018-08-21T20:35:47.595Z 14838 TID-gmufofvlg SendMailsJob JID-1108c0f97b3b45c176d631d2 INFO: fail: 0.043 sec
2018-08-21T20:35:47.596Z 14838 TID-gmufofvlg WARN: {"context":"Job raised exception","job":{"class":"ActiveJob::QueueAdapters::SidekiqAdapter::JobWrapper","wrapped":"SendMailsJob","queue":"default","args":[{"job_class":"SendMailsJob","job_id":"bcfeae89-a1a4-4e57-87f8-28a199e3280c","queue_name":"default","priority":null,"arguments":[{"_aj_globalid":"gid://book-store/Book/9"}],"locale":"en"}],"retry":true,"jid":"1108c0f97b3b45c176d631d2","created_at":1534882382.715988,"enqueued_at":1534883747.5463912,"error_message":"undefined method `url' for nil:NilClass\nDid you mean?  URI","error_class":"NoMethodError","failed_at":1534882382.7708082,"retry_count":6,"retried_at":1534883747.592339},"jobstr":"{\"class\":\"ActiveJob::QueueAdapters::SidekiqAdapter::JobWrapper\",\"wrapped\":\"SendMailsJob\",\"queue\":\"default\",\"args\":[{\"job_class\":\"SendMailsJob\",\"job_id\":\"bcfeae89-a1a4-4e57-87f8-28a199e3280c\",\"queue_name\":\"default\",\"priority\":null,\"arguments\":[{\"_aj_globalid\":\"gid://book-store/Book/9\"}],\"locale\":\"en\"}],\"retry\":true,\"jid\":\"1108c0f97b3b45c176d631d2\",\"created_at\":1534882382.715988,\"enqueued_at\":1534883747.5463912,\"error_message\":\"undefined method `url' for nil:NilClass\\nDid you mean?  URI\",\"error_class\":\"NoMethodError\",\"failed_at\":1534882382.7708082,\"retry_count\":5,\"retried_at\":1534882983.9995337}"}
2018-08-21T20:35:47.596Z 14838 TID-gmufofvlg WARN: NoMethodError: undefined method `url' for nil:NilClass
Did you mean?  URI
2018-08-21T20:35:47.596Z 14838 TID-gmufofvlg WARN: /home/deploy/www/app/mailers/book_mailer.rb:8:in `send_book'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionpack-5.0.1/lib/abstract_controller/base.rb:188:in `process_action'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionpack-5.0.1/lib/abstract_controller/callbacks.rb:20:in `block in process_action'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:97:in `__run_callbacks__'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:90:in `run_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionpack-5.0.1/lib/abstract_controller/callbacks.rb:19:in `process_action'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionpack-5.0.1/lib/abstract_controller/base.rb:126:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/rescuable.rb:23:in `block in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/rescuable.rb:15:in `handle_exceptions'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/rescuable.rb:22:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionview-5.0.1/lib/action_view/rendering.rb:30:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/base.rb:595:in `block in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications.rb:164:in `block in instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications/instrumenter.rb:21:in `instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications.rb:164:in `instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/base.rb:594:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/message_delivery.rb:105:in `block in processed_mailer'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/message_delivery.rb:104:in `tap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/message_delivery.rb:104:in `processed_mailer'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/message_delivery.rb:27:in `__getobj__'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/2.3.0/delegate.rb:80:in `method_missing'
/home/deploy/www/app/jobs/send_mails_job.rb:6:in `perform'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:34:in `block in perform_now'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:126:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/i18n-0.8.0/lib/i18n.rb:257:in `with_locale'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/translation.rb:7:in `block (2 levels) in <module:Translation>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `instance_exec'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `block in make_lambda'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:285:in `block in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:447:in `block in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:24:in `block (4 levels) in <module:Logging>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications.rb:164:in `block in instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications/instrumenter.rb:21:in `instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications.rb:164:in `instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:23:in `block (3 levels) in <module:Logging>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:44:in `block in tag_logger'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/tagged_logging.rb:69:in `block in tagged'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/tagged_logging.rb:26:in `tagged'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/tagged_logging.rb:69:in `tagged'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:44:in `tag_logger'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:20:in `block (2 levels) in <module:Logging>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `instance_exec'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `block in make_lambda'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:285:in `block in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:447:in `block in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:101:in `__run_callbacks__'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:750:in `_run_perform_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:90:in `run_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:33:in `perform_now'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:22:in `block in execute'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:126:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/railtie.rb:26:in `block (4 levels) in <class:Railtie>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:85:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:68:in `block in wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:81:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:67:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/railtie.rb:25:in `block (3 levels) in <class:Railtie>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `instance_exec'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `block in make_lambda'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:285:in `block in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:447:in `block in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:101:in `__run_callbacks__'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:750:in `_run_execute_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:90:in `run_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:20:in `execute'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/queue_adapters/sidekiq_adapter.rb:40:in `perform'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:199:in `execute_job'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:170:in `block (2 levels) in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/middleware/chain.rb:128:in `block in invoke'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/middleware/chain.rb:133:in `invoke'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:169:in `block in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:141:in `block (6 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/job_retry.rb:97:in `local'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:140:in `block (5 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/rails.rb:42:in `block in call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:85:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:68:in `block in wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:85:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:67:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/rails.rb:41:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:136:in `block (4 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:215:in `stats'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:131:in `block (3 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/job_logger.rb:7:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:130:in `block (2 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/job_retry.rb:72:in `global'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:129:in `block in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/logging.rb:44:in `with_context'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/logging.rb:38:in `with_job_hash_context'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:128:in `dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:168:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:85:in `process_one'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:73:in `run'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/util.rb:16:in `watchdog'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/util.rb:25:in `block in safe_thread'
2018-08-21T20:46:34.679Z 14838 TID-gmufntw1w SendMailsJob JID-2947776ded23e995a0d43472 INFO: start
2018-08-21T20:46:34.794Z 14838 TID-gmufntw1w SendMailsJob JID-2947776ded23e995a0d43472 INFO: fail: 0.115 sec
2018-08-21T20:46:34.794Z 14838 TID-gmufntw1w WARN: {"context":"Job raised exception","job":{"class":"ActiveJob::QueueAdapters::SidekiqAdapter::JobWrapper","wrapped":"SendMailsJob","queue":"default","args":[{"job_class":"SendMailsJob","job_id":"1e1bb720-fb43-4319-9945-0413f26d13b2","queue_name":"default","priority":null,"arguments":[{"_aj_globalid":"gid://book-store/Book/10"}],"locale":"en"}],"retry":true,"jid":"2947776ded23e995a0d43472","created_at":1534884394.6657887,"enqueued_at":1534884394.6666777,"error_message":"undefined method `url' for nil:NilClass\nDid you mean?  URI","error_class":"NoMethodError","failed_at":1534884394.782486,"retry_count":0},"jobstr":"{\"class\":\"ActiveJob::QueueAdapters::SidekiqAdapter::JobWrapper\",\"wrapped\":\"SendMailsJob\",\"queue\":\"default\",\"args\":[{\"job_class\":\"SendMailsJob\",\"job_id\":\"1e1bb720-fb43-4319-9945-0413f26d13b2\",\"queue_name\":\"default\",\"priority\":null,\"arguments\":[{\"_aj_globalid\":\"gid://book-store/Book/10\"}],\"locale\":\"en\"}],\"retry\":true,\"jid\":\"2947776ded23e995a0d43472\",\"created_at\":1534884394.6657887,\"enqueued_at\":1534884394.6666777}"}
2018-08-21T20:46:34.794Z 14838 TID-gmufntw1w WARN: NoMethodError: undefined method `url' for nil:NilClass
Did you mean?  URI
2018-08-21T20:46:34.794Z 14838 TID-gmufntw1w WARN: /home/deploy/www/app/mailers/book_mailer.rb:8:in `send_book'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionpack-5.0.1/lib/abstract_controller/base.rb:188:in `process_action'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionpack-5.0.1/lib/abstract_controller/callbacks.rb:20:in `block in process_action'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:97:in `__run_callbacks__'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:90:in `run_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionpack-5.0.1/lib/abstract_controller/callbacks.rb:19:in `process_action'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionpack-5.0.1/lib/abstract_controller/base.rb:126:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/rescuable.rb:23:in `block in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/rescuable.rb:15:in `handle_exceptions'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/rescuable.rb:22:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionview-5.0.1/lib/action_view/rendering.rb:30:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/base.rb:595:in `block in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications.rb:164:in `block in instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications/instrumenter.rb:21:in `instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications.rb:164:in `instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/base.rb:594:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/message_delivery.rb:105:in `block in processed_mailer'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/message_delivery.rb:104:in `tap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/message_delivery.rb:104:in `processed_mailer'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/message_delivery.rb:27:in `__getobj__'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/2.3.0/delegate.rb:80:in `method_missing'
/home/deploy/www/app/jobs/send_mails_job.rb:6:in `perform'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:34:in `block in perform_now'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:126:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/i18n-0.8.0/lib/i18n.rb:257:in `with_locale'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/translation.rb:7:in `block (2 levels) in <module:Translation>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `instance_exec'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `block in make_lambda'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:285:in `block in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:447:in `block in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:24:in `block (4 levels) in <module:Logging>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications.rb:164:in `block in instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications/instrumenter.rb:21:in `instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications.rb:164:in `instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:23:in `block (3 levels) in <module:Logging>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:44:in `block in tag_logger'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/tagged_logging.rb:69:in `block in tagged'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/tagged_logging.rb:26:in `tagged'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/tagged_logging.rb:69:in `tagged'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:44:in `tag_logger'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:20:in `block (2 levels) in <module:Logging>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `instance_exec'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `block in make_lambda'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:285:in `block in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:447:in `block in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:101:in `__run_callbacks__'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:750:in `_run_perform_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:90:in `run_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:33:in `perform_now'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:22:in `block in execute'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:126:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/railtie.rb:26:in `block (4 levels) in <class:Railtie>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:85:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:68:in `block in wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:81:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:67:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/railtie.rb:25:in `block (3 levels) in <class:Railtie>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `instance_exec'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `block in make_lambda'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:285:in `block in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:447:in `block in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:101:in `__run_callbacks__'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:750:in `_run_execute_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:90:in `run_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:20:in `execute'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/queue_adapters/sidekiq_adapter.rb:40:in `perform'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:199:in `execute_job'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:170:in `block (2 levels) in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/middleware/chain.rb:128:in `block in invoke'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/middleware/chain.rb:133:in `invoke'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:169:in `block in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:141:in `block (6 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/job_retry.rb:97:in `local'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:140:in `block (5 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/rails.rb:42:in `block in call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:85:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:68:in `block in wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:85:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:67:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/rails.rb:41:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:136:in `block (4 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:215:in `stats'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:131:in `block (3 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/job_logger.rb:7:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:130:in `block (2 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/job_retry.rb:72:in `global'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:129:in `block in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/logging.rb:44:in `with_context'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/logging.rb:38:in `with_job_hash_context'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:128:in `dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:168:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:85:in `process_one'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:73:in `run'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/util.rb:16:in `watchdog'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/util.rb:25:in `block in safe_thread'
2018-08-21T20:47:05.056Z 14838 TID-gmufnmyrg SendMailsJob JID-2947776ded23e995a0d43472 INFO: start
2018-08-21T20:47:05.118Z 14838 TID-gmufnmyrg SendMailsJob JID-2947776ded23e995a0d43472 INFO: fail: 0.062 sec
2018-08-21T20:47:05.125Z 14838 TID-gmufnmyrg WARN: {"context":"Job raised exception","job":{"class":"ActiveJob::QueueAdapters::SidekiqAdapter::JobWrapper","wrapped":"SendMailsJob","queue":"default","args":[{"job_class":"SendMailsJob","job_id":"1e1bb720-fb43-4319-9945-0413f26d13b2","queue_name":"default","priority":null,"arguments":[{"_aj_globalid":"gid://book-store/Book/10"}],"locale":"en"}],"retry":true,"jid":"2947776ded23e995a0d43472","created_at":1534884394.6657887,"enqueued_at":1534884425.0465636,"error_message":"undefined method `url' for nil:NilClass\nDid you mean?  URI","error_class":"NoMethodError","failed_at":1534884394.782486,"retry_count":1,"retried_at":1534884425.1176362},"jobstr":"{\"class\":\"ActiveJob::QueueAdapters::SidekiqAdapter::JobWrapper\",\"wrapped\":\"SendMailsJob\",\"queue\":\"default\",\"args\":[{\"job_class\":\"SendMailsJob\",\"job_id\":\"1e1bb720-fb43-4319-9945-0413f26d13b2\",\"queue_name\":\"default\",\"priority\":null,\"arguments\":[{\"_aj_globalid\":\"gid://book-store/Book/10\"}],\"locale\":\"en\"}],\"retry\":true,\"jid\":\"2947776ded23e995a0d43472\",\"created_at\":1534884394.6657887,\"enqueued_at\":1534884425.0465636,\"error_message\":\"undefined method `url' for nil:NilClass\\nDid you mean?  URI\",\"error_class\":\"NoMethodError\",\"failed_at\":1534884394.782486,\"retry_count\":0}"}
2018-08-21T20:47:05.126Z 14838 TID-gmufnmyrg WARN: NoMethodError: undefined method `url' for nil:NilClass
Did you mean?  URI
2018-08-21T20:47:05.126Z 14838 TID-gmufnmyrg WARN: /home/deploy/www/app/mailers/book_mailer.rb:8:in `send_book'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionpack-5.0.1/lib/abstract_controller/base.rb:188:in `process_action'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionpack-5.0.1/lib/abstract_controller/callbacks.rb:20:in `block in process_action'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:97:in `__run_callbacks__'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:90:in `run_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionpack-5.0.1/lib/abstract_controller/callbacks.rb:19:in `process_action'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionpack-5.0.1/lib/abstract_controller/base.rb:126:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/rescuable.rb:23:in `block in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/rescuable.rb:15:in `handle_exceptions'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/rescuable.rb:22:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionview-5.0.1/lib/action_view/rendering.rb:30:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/base.rb:595:in `block in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications.rb:164:in `block in instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications/instrumenter.rb:21:in `instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications.rb:164:in `instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/base.rb:594:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/message_delivery.rb:105:in `block in processed_mailer'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/message_delivery.rb:104:in `tap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/message_delivery.rb:104:in `processed_mailer'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/message_delivery.rb:27:in `__getobj__'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/2.3.0/delegate.rb:80:in `method_missing'
/home/deploy/www/app/jobs/send_mails_job.rb:6:in `perform'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:34:in `block in perform_now'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:126:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/i18n-0.8.0/lib/i18n.rb:257:in `with_locale'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/translation.rb:7:in `block (2 levels) in <module:Translation>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `instance_exec'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `block in make_lambda'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:285:in `block in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:447:in `block in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:24:in `block (4 levels) in <module:Logging>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications.rb:164:in `block in instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications/instrumenter.rb:21:in `instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications.rb:164:in `instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:23:in `block (3 levels) in <module:Logging>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:44:in `block in tag_logger'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/tagged_logging.rb:69:in `block in tagged'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/tagged_logging.rb:26:in `tagged'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/tagged_logging.rb:69:in `tagged'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:44:in `tag_logger'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:20:in `block (2 levels) in <module:Logging>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `instance_exec'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `block in make_lambda'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:285:in `block in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:447:in `block in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:101:in `__run_callbacks__'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:750:in `_run_perform_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:90:in `run_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:33:in `perform_now'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:22:in `block in execute'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:126:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/railtie.rb:26:in `block (4 levels) in <class:Railtie>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:85:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:68:in `block in wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:81:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:67:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/railtie.rb:25:in `block (3 levels) in <class:Railtie>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `instance_exec'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `block in make_lambda'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:285:in `block in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:447:in `block in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:101:in `__run_callbacks__'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:750:in `_run_execute_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:90:in `run_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:20:in `execute'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/queue_adapters/sidekiq_adapter.rb:40:in `perform'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:199:in `execute_job'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:170:in `block (2 levels) in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/middleware/chain.rb:128:in `block in invoke'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/middleware/chain.rb:133:in `invoke'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:169:in `block in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:141:in `block (6 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/job_retry.rb:97:in `local'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:140:in `block (5 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/rails.rb:42:in `block in call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:85:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:68:in `block in wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:85:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:67:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/rails.rb:41:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:136:in `block (4 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:215:in `stats'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:131:in `block (3 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/job_logger.rb:7:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:130:in `block (2 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/job_retry.rb:72:in `global'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:129:in `block in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/logging.rb:44:in `with_context'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/logging.rb:38:in `with_job_hash_context'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:128:in `dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:168:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:85:in `process_one'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:73:in `run'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/util.rb:16:in `watchdog'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/util.rb:25:in `block in safe_thread'
2018-08-21T20:48:19.607Z 14838 TID-gmufqmcfc SendMailsJob JID-2947776ded23e995a0d43472 INFO: start
2018-08-21T20:48:19.660Z 14838 TID-gmufqmcfc SendMailsJob JID-2947776ded23e995a0d43472 INFO: fail: 0.053 sec
2018-08-21T20:48:19.660Z 14838 TID-gmufqmcfc WARN: {"context":"Job raised exception","job":{"class":"ActiveJob::QueueAdapters::SidekiqAdapter::JobWrapper","wrapped":"SendMailsJob","queue":"default","args":[{"job_class":"SendMailsJob","job_id":"1e1bb720-fb43-4319-9945-0413f26d13b2","queue_name":"default","priority":null,"arguments":[{"_aj_globalid":"gid://book-store/Book/10"}],"locale":"en"}],"retry":true,"jid":"2947776ded23e995a0d43472","created_at":1534884394.6657887,"enqueued_at":1534884499.6051266,"error_message":"undefined method `url' for nil:NilClass\nDid you mean?  URI","error_class":"NoMethodError","failed_at":1534884394.782486,"retry_count":2,"retried_at":1534884499.658637},"jobstr":"{\"class\":\"ActiveJob::QueueAdapters::SidekiqAdapter::JobWrapper\",\"wrapped\":\"SendMailsJob\",\"queue\":\"default\",\"args\":[{\"job_class\":\"SendMailsJob\",\"job_id\":\"1e1bb720-fb43-4319-9945-0413f26d13b2\",\"queue_name\":\"default\",\"priority\":null,\"arguments\":[{\"_aj_globalid\":\"gid://book-store/Book/10\"}],\"locale\":\"en\"}],\"retry\":true,\"jid\":\"2947776ded23e995a0d43472\",\"created_at\":1534884394.6657887,\"enqueued_at\":1534884499.6051266,\"error_message\":\"undefined method `url' for nil:NilClass\\nDid you mean?  URI\",\"error_class\":\"NoMethodError\",\"failed_at\":1534884394.782486,\"retry_count\":1,\"retried_at\":1534884425.1176362}"}
2018-08-21T20:48:19.660Z 14838 TID-gmufqmcfc WARN: NoMethodError: undefined method `url' for nil:NilClass
Did you mean?  URI
2018-08-21T20:48:19.661Z 14838 TID-gmufqmcfc WARN: /home/deploy/www/app/mailers/book_mailer.rb:8:in `send_book'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionpack-5.0.1/lib/abstract_controller/base.rb:188:in `process_action'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionpack-5.0.1/lib/abstract_controller/callbacks.rb:20:in `block in process_action'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:97:in `__run_callbacks__'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:90:in `run_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionpack-5.0.1/lib/abstract_controller/callbacks.rb:19:in `process_action'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionpack-5.0.1/lib/abstract_controller/base.rb:126:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/rescuable.rb:23:in `block in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/rescuable.rb:15:in `handle_exceptions'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/rescuable.rb:22:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionview-5.0.1/lib/action_view/rendering.rb:30:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/base.rb:595:in `block in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications.rb:164:in `block in instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications/instrumenter.rb:21:in `instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications.rb:164:in `instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/base.rb:594:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/message_delivery.rb:105:in `block in processed_mailer'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/message_delivery.rb:104:in `tap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/message_delivery.rb:104:in `processed_mailer'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/message_delivery.rb:27:in `__getobj__'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/2.3.0/delegate.rb:80:in `method_missing'
/home/deploy/www/app/jobs/send_mails_job.rb:6:in `perform'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:34:in `block in perform_now'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:126:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/i18n-0.8.0/lib/i18n.rb:257:in `with_locale'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/translation.rb:7:in `block (2 levels) in <module:Translation>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `instance_exec'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `block in make_lambda'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:285:in `block in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:447:in `block in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:24:in `block (4 levels) in <module:Logging>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications.rb:164:in `block in instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications/instrumenter.rb:21:in `instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications.rb:164:in `instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:23:in `block (3 levels) in <module:Logging>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:44:in `block in tag_logger'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/tagged_logging.rb:69:in `block in tagged'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/tagged_logging.rb:26:in `tagged'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/tagged_logging.rb:69:in `tagged'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:44:in `tag_logger'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:20:in `block (2 levels) in <module:Logging>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `instance_exec'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `block in make_lambda'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:285:in `block in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:447:in `block in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:101:in `__run_callbacks__'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:750:in `_run_perform_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:90:in `run_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:33:in `perform_now'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:22:in `block in execute'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:126:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/railtie.rb:26:in `block (4 levels) in <class:Railtie>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:85:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:68:in `block in wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:81:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:67:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/railtie.rb:25:in `block (3 levels) in <class:Railtie>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `instance_exec'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `block in make_lambda'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:285:in `block in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:447:in `block in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:101:in `__run_callbacks__'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:750:in `_run_execute_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:90:in `run_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:20:in `execute'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/queue_adapters/sidekiq_adapter.rb:40:in `perform'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:199:in `execute_job'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:170:in `block (2 levels) in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/middleware/chain.rb:128:in `block in invoke'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/middleware/chain.rb:133:in `invoke'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:169:in `block in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:141:in `block (6 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/job_retry.rb:97:in `local'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:140:in `block (5 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/rails.rb:42:in `block in call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:85:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:68:in `block in wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:85:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:67:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/rails.rb:41:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:136:in `block (4 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:215:in `stats'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:131:in `block (3 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/job_logger.rb:7:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:130:in `block (2 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/job_retry.rb:72:in `global'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:129:in `block in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/logging.rb:44:in `with_context'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/logging.rb:38:in `with_job_hash_context'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:128:in `dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:168:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:85:in `process_one'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:73:in `run'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/util.rb:16:in `watchdog'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/util.rb:25:in `block in safe_thread'
2018-08-21T20:49:49.547Z 14838 TID-gmufs92z8 SendMailsJob JID-2947776ded23e995a0d43472 INFO: start
2018-08-21T20:49:49.622Z 14838 TID-gmufs92z8 SendMailsJob JID-2947776ded23e995a0d43472 INFO: fail: 0.075 sec
2018-08-21T20:49:49.622Z 14838 TID-gmufs92z8 WARN: {"context":"Job raised exception","job":{"class":"ActiveJob::QueueAdapters::SidekiqAdapter::JobWrapper","wrapped":"SendMailsJob","queue":"default","args":[{"job_class":"SendMailsJob","job_id":"1e1bb720-fb43-4319-9945-0413f26d13b2","queue_name":"default","priority":null,"arguments":[{"_aj_globalid":"gid://book-store/Book/10"}],"locale":"en"}],"retry":true,"jid":"2947776ded23e995a0d43472","created_at":1534884394.6657887,"enqueued_at":1534884589.5325592,"error_message":"undefined method `url' for nil:NilClass\nDid you mean?  URI","error_class":"NoMethodError","failed_at":1534884394.782486,"retry_count":3,"retried_at":1534884589.6103814},"jobstr":"{\"class\":\"ActiveJob::QueueAdapters::SidekiqAdapter::JobWrapper\",\"wrapped\":\"SendMailsJob\",\"queue\":\"default\",\"args\":[{\"job_class\":\"SendMailsJob\",\"job_id\":\"1e1bb720-fb43-4319-9945-0413f26d13b2\",\"queue_name\":\"default\",\"priority\":null,\"arguments\":[{\"_aj_globalid\":\"gid://book-store/Book/10\"}],\"locale\":\"en\"}],\"retry\":true,\"jid\":\"2947776ded23e995a0d43472\",\"created_at\":1534884394.6657887,\"enqueued_at\":1534884589.5325592,\"error_message\":\"undefined method `url' for nil:NilClass\\nDid you mean?  URI\",\"error_class\":\"NoMethodError\",\"failed_at\":1534884394.782486,\"retry_count\":2,\"retried_at\":1534884499.658637}"}
2018-08-21T20:49:49.622Z 14838 TID-gmufs92z8 WARN: NoMethodError: undefined method `url' for nil:NilClass
Did you mean?  URI
2018-08-21T20:49:49.622Z 14838 TID-gmufs92z8 WARN: /home/deploy/www/app/mailers/book_mailer.rb:8:in `send_book'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionpack-5.0.1/lib/abstract_controller/base.rb:188:in `process_action'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionpack-5.0.1/lib/abstract_controller/callbacks.rb:20:in `block in process_action'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:97:in `__run_callbacks__'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:90:in `run_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionpack-5.0.1/lib/abstract_controller/callbacks.rb:19:in `process_action'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionpack-5.0.1/lib/abstract_controller/base.rb:126:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/rescuable.rb:23:in `block in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/rescuable.rb:15:in `handle_exceptions'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/rescuable.rb:22:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionview-5.0.1/lib/action_view/rendering.rb:30:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/base.rb:595:in `block in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications.rb:164:in `block in instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications/instrumenter.rb:21:in `instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications.rb:164:in `instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/base.rb:594:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/message_delivery.rb:105:in `block in processed_mailer'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/message_delivery.rb:104:in `tap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/message_delivery.rb:104:in `processed_mailer'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/message_delivery.rb:27:in `__getobj__'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/2.3.0/delegate.rb:80:in `method_missing'
/home/deploy/www/app/jobs/send_mails_job.rb:6:in `perform'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:34:in `block in perform_now'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:126:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/i18n-0.8.0/lib/i18n.rb:257:in `with_locale'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/translation.rb:7:in `block (2 levels) in <module:Translation>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `instance_exec'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `block in make_lambda'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:285:in `block in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:447:in `block in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:24:in `block (4 levels) in <module:Logging>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications.rb:164:in `block in instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications/instrumenter.rb:21:in `instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications.rb:164:in `instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:23:in `block (3 levels) in <module:Logging>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:44:in `block in tag_logger'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/tagged_logging.rb:69:in `block in tagged'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/tagged_logging.rb:26:in `tagged'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/tagged_logging.rb:69:in `tagged'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:44:in `tag_logger'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:20:in `block (2 levels) in <module:Logging>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `instance_exec'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `block in make_lambda'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:285:in `block in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:447:in `block in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:101:in `__run_callbacks__'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:750:in `_run_perform_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:90:in `run_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:33:in `perform_now'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:22:in `block in execute'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:126:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/railtie.rb:26:in `block (4 levels) in <class:Railtie>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:85:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:68:in `block in wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:81:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:67:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/railtie.rb:25:in `block (3 levels) in <class:Railtie>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `instance_exec'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `block in make_lambda'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:285:in `block in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:447:in `block in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:101:in `__run_callbacks__'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:750:in `_run_execute_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:90:in `run_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:20:in `execute'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/queue_adapters/sidekiq_adapter.rb:40:in `perform'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:199:in `execute_job'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:170:in `block (2 levels) in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/middleware/chain.rb:128:in `block in invoke'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/middleware/chain.rb:133:in `invoke'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:169:in `block in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:141:in `block (6 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/job_retry.rb:97:in `local'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:140:in `block (5 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/rails.rb:42:in `block in call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:85:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:68:in `block in wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:85:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:67:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/rails.rb:41:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:136:in `block (4 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:215:in `stats'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:131:in `block (3 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/job_logger.rb:7:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:130:in `block (2 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/job_retry.rb:72:in `global'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:129:in `block in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/logging.rb:44:in `with_context'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/logging.rb:38:in `with_job_hash_context'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:128:in `dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:168:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:85:in `process_one'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:73:in `run'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/util.rb:16:in `watchdog'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/util.rb:25:in `block in safe_thread'
2018-08-21T20:52:08.081Z 14838 TID-gmufnf1oo SendMailsJob JID-2947776ded23e995a0d43472 INFO: start
2018-08-21T20:52:08.133Z 14838 TID-gmufnf1oo SendMailsJob JID-2947776ded23e995a0d43472 INFO: fail: 0.052 sec
2018-08-21T20:52:08.134Z 14838 TID-gmufnf1oo WARN: {"context":"Job raised exception","job":{"class":"ActiveJob::QueueAdapters::SidekiqAdapter::JobWrapper","wrapped":"SendMailsJob","queue":"default","args":[{"job_class":"SendMailsJob","job_id":"1e1bb720-fb43-4319-9945-0413f26d13b2","queue_name":"default","priority":null,"arguments":[{"_aj_globalid":"gid://book-store/Book/10"}],"locale":"en"}],"retry":true,"jid":"2947776ded23e995a0d43472","created_at":1534884394.6657887,"enqueued_at":1534884728.0753984,"error_message":"undefined method `url' for nil:NilClass\nDid you mean?  URI","error_class":"NoMethodError","failed_at":1534884394.782486,"retry_count":4,"retried_at":1534884728.1297464},"jobstr":"{\"class\":\"ActiveJob::QueueAdapters::SidekiqAdapter::JobWrapper\",\"wrapped\":\"SendMailsJob\",\"queue\":\"default\",\"args\":[{\"job_class\":\"SendMailsJob\",\"job_id\":\"1e1bb720-fb43-4319-9945-0413f26d13b2\",\"queue_name\":\"default\",\"priority\":null,\"arguments\":[{\"_aj_globalid\":\"gid://book-store/Book/10\"}],\"locale\":\"en\"}],\"retry\":true,\"jid\":\"2947776ded23e995a0d43472\",\"created_at\":1534884394.6657887,\"enqueued_at\":1534884728.0753984,\"error_message\":\"undefined method `url' for nil:NilClass\\nDid you mean?  URI\",\"error_class\":\"NoMethodError\",\"failed_at\":1534884394.782486,\"retry_count\":3,\"retried_at\":1534884589.6103814}"}
2018-08-21T20:52:08.138Z 14838 TID-gmufnf1oo WARN: NoMethodError: undefined method `url' for nil:NilClass
Did you mean?  URI
2018-08-21T20:52:08.139Z 14838 TID-gmufnf1oo WARN: /home/deploy/www/app/mailers/book_mailer.rb:8:in `send_book'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionpack-5.0.1/lib/abstract_controller/base.rb:188:in `process_action'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionpack-5.0.1/lib/abstract_controller/callbacks.rb:20:in `block in process_action'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:97:in `__run_callbacks__'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:90:in `run_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionpack-5.0.1/lib/abstract_controller/callbacks.rb:19:in `process_action'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionpack-5.0.1/lib/abstract_controller/base.rb:126:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/rescuable.rb:23:in `block in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/rescuable.rb:15:in `handle_exceptions'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/rescuable.rb:22:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionview-5.0.1/lib/action_view/rendering.rb:30:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/base.rb:595:in `block in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications.rb:164:in `block in instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications/instrumenter.rb:21:in `instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications.rb:164:in `instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/base.rb:594:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/message_delivery.rb:105:in `block in processed_mailer'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/message_delivery.rb:104:in `tap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/message_delivery.rb:104:in `processed_mailer'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/message_delivery.rb:27:in `__getobj__'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/2.3.0/delegate.rb:80:in `method_missing'
/home/deploy/www/app/jobs/send_mails_job.rb:6:in `perform'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:34:in `block in perform_now'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:126:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/i18n-0.8.0/lib/i18n.rb:257:in `with_locale'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/translation.rb:7:in `block (2 levels) in <module:Translation>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `instance_exec'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `block in make_lambda'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:285:in `block in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:447:in `block in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:24:in `block (4 levels) in <module:Logging>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications.rb:164:in `block in instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications/instrumenter.rb:21:in `instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications.rb:164:in `instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:23:in `block (3 levels) in <module:Logging>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:44:in `block in tag_logger'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/tagged_logging.rb:69:in `block in tagged'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/tagged_logging.rb:26:in `tagged'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/tagged_logging.rb:69:in `tagged'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:44:in `tag_logger'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:20:in `block (2 levels) in <module:Logging>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `instance_exec'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `block in make_lambda'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:285:in `block in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:447:in `block in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:101:in `__run_callbacks__'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:750:in `_run_perform_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:90:in `run_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:33:in `perform_now'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:22:in `block in execute'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:126:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/railtie.rb:26:in `block (4 levels) in <class:Railtie>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:85:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:68:in `block in wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:81:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:67:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/railtie.rb:25:in `block (3 levels) in <class:Railtie>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `instance_exec'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `block in make_lambda'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:285:in `block in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:447:in `block in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:101:in `__run_callbacks__'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:750:in `_run_execute_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:90:in `run_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:20:in `execute'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/queue_adapters/sidekiq_adapter.rb:40:in `perform'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:199:in `execute_job'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:170:in `block (2 levels) in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/middleware/chain.rb:128:in `block in invoke'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/middleware/chain.rb:133:in `invoke'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:169:in `block in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:141:in `block (6 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/job_retry.rb:97:in `local'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:140:in `block (5 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/rails.rb:42:in `block in call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:85:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:68:in `block in wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:85:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:67:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/rails.rb:41:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:136:in `block (4 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:215:in `stats'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:131:in `block (3 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/job_logger.rb:7:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:130:in `block (2 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/job_retry.rb:72:in `global'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:129:in `block in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/logging.rb:44:in `with_context'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/logging.rb:38:in `with_job_hash_context'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:128:in `dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:168:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:85:in `process_one'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:73:in `run'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/util.rb:16:in `watchdog'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/util.rb:25:in `block in safe_thread'
2018-08-21T20:57:39.533Z 14838 TID-gmufmxtj4 SendMailsJob JID-2947776ded23e995a0d43472 INFO: start
2018-08-21T20:57:39.557Z 14838 TID-gmufmxtj4 SendMailsJob JID-2947776ded23e995a0d43472 INFO: fail: 0.024 sec
2018-08-21T20:57:39.558Z 14838 TID-gmufmxtj4 WARN: {"context":"Job raised exception","job":{"class":"ActiveJob::QueueAdapters::SidekiqAdapter::JobWrapper","wrapped":"SendMailsJob","queue":"default","args":[{"job_class":"SendMailsJob","job_id":"1e1bb720-fb43-4319-9945-0413f26d13b2","queue_name":"default","priority":null,"arguments":[{"_aj_globalid":"gid://book-store/Book/10"}],"locale":"en"}],"retry":true,"jid":"2947776ded23e995a0d43472","created_at":1534884394.6657887,"enqueued_at":1534885059.5320778,"error_message":"Error while trying to deserialize arguments: Couldn't find Book with 'id'=10","error_class":"ActiveJob::DeserializationError","failed_at":1534884394.782486,"retry_count":5,"retried_at":1534885059.55651},"jobstr":"{\"class\":\"ActiveJob::QueueAdapters::SidekiqAdapter::JobWrapper\",\"wrapped\":\"SendMailsJob\",\"queue\":\"default\",\"args\":[{\"job_class\":\"SendMailsJob\",\"job_id\":\"1e1bb720-fb43-4319-9945-0413f26d13b2\",\"queue_name\":\"default\",\"priority\":null,\"arguments\":[{\"_aj_globalid\":\"gid://book-store/Book/10\"}],\"locale\":\"en\"}],\"retry\":true,\"jid\":\"2947776ded23e995a0d43472\",\"created_at\":1534884394.6657887,\"enqueued_at\":1534885059.5320778,\"error_message\":\"undefined method `url' for nil:NilClass\\nDid you mean?  URI\",\"error_class\":\"NoMethodError\",\"failed_at\":1534884394.782486,\"retry_count\":4,\"retried_at\":1534884728.1297464}"}
2018-08-21T20:57:39.558Z 14838 TID-gmufmxtj4 WARN: ActiveJob::DeserializationError: Error while trying to deserialize arguments: Couldn't find Book with 'id'=10
2018-08-21T20:57:39.558Z 14838 TID-gmufmxtj4 WARN: /home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activerecord-5.0.1/lib/active_record/relation/finder_methods.rb:353:in `raise_record_not_found_exception!'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activerecord-5.0.1/lib/active_record/relation/finder_methods.rb:479:in `find_one'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activerecord-5.0.1/lib/active_record/relation/finder_methods.rb:458:in `find_with_ids'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activerecord-5.0.1/lib/active_record/relation/finder_methods.rb:66:in `find'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activerecord-5.0.1/lib/active_record/querying.rb:3:in `find'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activerecord-5.0.1/lib/active_record/core.rb:151:in `find'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/globalid-0.3.7/lib/global_id/locator.rb:130:in `locate'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/globalid-0.3.7/lib/global_id/locator.rb:155:in `block in locate'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/globalid-0.3.7/lib/global_id/locator.rb:165:in `block in unscoped'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activerecord-5.0.1/lib/active_record/scoping/default.rb:35:in `block in unscoped'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activerecord-5.0.1/lib/active_record/relation.rb:351:in `scoping'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activerecord-5.0.1/lib/active_record/scoping/default.rb:35:in `unscoped'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/globalid-0.3.7/lib/global_id/locator.rb:165:in `unscoped'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/globalid-0.3.7/lib/global_id/locator.rb:155:in `locate'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/globalid-0.3.7/lib/global_id/locator.rb:17:in `locate'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/arguments.rb:111:in `deserialize_global_id'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/arguments.rb:97:in `deserialize_argument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/arguments.rb:51:in `block in deserialize'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/arguments.rb:51:in `map'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/arguments.rb:51:in `deserialize'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/core.rb:128:in `deserialize_arguments'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/core.rb:118:in `deserialize_arguments_if_needed'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:32:in `perform_now'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:22:in `block in execute'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:126:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/railtie.rb:26:in `block (4 levels) in <class:Railtie>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:85:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:68:in `block in wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:81:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:67:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/railtie.rb:25:in `block (3 levels) in <class:Railtie>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `instance_exec'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `block in make_lambda'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:285:in `block in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:447:in `block in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:101:in `__run_callbacks__'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:750:in `_run_execute_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:90:in `run_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:20:in `execute'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/queue_adapters/sidekiq_adapter.rb:40:in `perform'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:199:in `execute_job'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:170:in `block (2 levels) in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/middleware/chain.rb:128:in `block in invoke'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/middleware/chain.rb:133:in `invoke'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:169:in `block in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:141:in `block (6 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/job_retry.rb:97:in `local'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:140:in `block (5 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/rails.rb:42:in `block in call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:85:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:68:in `block in wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:85:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:67:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/rails.rb:41:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:136:in `block (4 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:215:in `stats'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:131:in `block (3 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/job_logger.rb:7:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:130:in `block (2 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/job_retry.rb:72:in `global'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:129:in `block in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/logging.rb:44:in `with_context'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/logging.rb:38:in `with_job_hash_context'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:128:in `dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:168:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:85:in `process_one'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:73:in `run'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/util.rb:16:in `watchdog'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/util.rb:25:in `block in safe_thread'
2018-08-21T20:59:22.131Z 14838 TID-gmufqdkhg SendMailsJob JID-95236a612130af4240e0fdad INFO: start
2018-08-21T20:59:22.189Z 14838 TID-gmufqdkhg SendMailsJob JID-95236a612130af4240e0fdad INFO: fail: 0.057 sec
2018-08-21T20:59:22.189Z 14838 TID-gmufqdkhg WARN: {"context":"Job raised exception","job":{"class":"ActiveJob::QueueAdapters::SidekiqAdapter::JobWrapper","wrapped":"SendMailsJob","queue":"default","args":[{"job_class":"SendMailsJob","job_id":"d036e0a2-07d4-4c37-9b26-3c981cc64b80","queue_name":"default","priority":null,"arguments":[{"_aj_globalid":"gid://book-store/Book/11"}],"locale":"en"}],"retry":true,"jid":"95236a612130af4240e0fdad","created_at":1534885162.1222718,"enqueued_at":1534885162.1287851,"error_message":"undefined method `url' for nil:NilClass\nDid you mean?  URI","error_class":"NoMethodError","failed_at":1534885162.1875215,"retry_count":0},"jobstr":"{\"class\":\"ActiveJob::QueueAdapters::SidekiqAdapter::JobWrapper\",\"wrapped\":\"SendMailsJob\",\"queue\":\"default\",\"args\":[{\"job_class\":\"SendMailsJob\",\"job_id\":\"d036e0a2-07d4-4c37-9b26-3c981cc64b80\",\"queue_name\":\"default\",\"priority\":null,\"arguments\":[{\"_aj_globalid\":\"gid://book-store/Book/11\"}],\"locale\":\"en\"}],\"retry\":true,\"jid\":\"95236a612130af4240e0fdad\",\"created_at\":1534885162.1222718,\"enqueued_at\":1534885162.1287851}"}
2018-08-21T20:59:22.190Z 14838 TID-gmufqdkhg WARN: NoMethodError: undefined method `url' for nil:NilClass
Did you mean?  URI
2018-08-21T20:59:22.190Z 14838 TID-gmufqdkhg WARN: /home/deploy/www/app/mailers/book_mailer.rb:8:in `send_book'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionpack-5.0.1/lib/abstract_controller/base.rb:188:in `process_action'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionpack-5.0.1/lib/abstract_controller/callbacks.rb:20:in `block in process_action'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:97:in `__run_callbacks__'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:90:in `run_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionpack-5.0.1/lib/abstract_controller/callbacks.rb:19:in `process_action'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionpack-5.0.1/lib/abstract_controller/base.rb:126:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/rescuable.rb:23:in `block in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/rescuable.rb:15:in `handle_exceptions'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/rescuable.rb:22:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionview-5.0.1/lib/action_view/rendering.rb:30:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/base.rb:595:in `block in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications.rb:164:in `block in instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications/instrumenter.rb:21:in `instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications.rb:164:in `instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/base.rb:594:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/message_delivery.rb:105:in `block in processed_mailer'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/message_delivery.rb:104:in `tap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/message_delivery.rb:104:in `processed_mailer'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/message_delivery.rb:27:in `__getobj__'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/2.3.0/delegate.rb:80:in `method_missing'
/home/deploy/www/app/jobs/send_mails_job.rb:6:in `perform'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:34:in `block in perform_now'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:126:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/i18n-0.8.0/lib/i18n.rb:257:in `with_locale'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/translation.rb:7:in `block (2 levels) in <module:Translation>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `instance_exec'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `block in make_lambda'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:285:in `block in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:447:in `block in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:24:in `block (4 levels) in <module:Logging>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications.rb:164:in `block in instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications/instrumenter.rb:21:in `instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications.rb:164:in `instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:23:in `block (3 levels) in <module:Logging>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:44:in `block in tag_logger'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/tagged_logging.rb:69:in `block in tagged'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/tagged_logging.rb:26:in `tagged'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/tagged_logging.rb:69:in `tagged'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:44:in `tag_logger'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:20:in `block (2 levels) in <module:Logging>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `instance_exec'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `block in make_lambda'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:285:in `block in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:447:in `block in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:101:in `__run_callbacks__'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:750:in `_run_perform_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:90:in `run_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:33:in `perform_now'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:22:in `block in execute'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:126:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/railtie.rb:26:in `block (4 levels) in <class:Railtie>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:85:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:68:in `block in wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:81:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:67:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/railtie.rb:25:in `block (3 levels) in <class:Railtie>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `instance_exec'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `block in make_lambda'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:285:in `block in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:447:in `block in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:101:in `__run_callbacks__'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:750:in `_run_execute_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:90:in `run_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:20:in `execute'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/queue_adapters/sidekiq_adapter.rb:40:in `perform'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:199:in `execute_job'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:170:in `block (2 levels) in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/middleware/chain.rb:128:in `block in invoke'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/middleware/chain.rb:133:in `invoke'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:169:in `block in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:141:in `block (6 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/job_retry.rb:97:in `local'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:140:in `block (5 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/rails.rb:42:in `block in call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:85:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:68:in `block in wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:85:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:67:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/rails.rb:41:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:136:in `block (4 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:215:in `stats'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:131:in `block (3 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/job_logger.rb:7:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:130:in `block (2 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/job_retry.rb:72:in `global'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:129:in `block in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/logging.rb:44:in `with_context'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/logging.rb:38:in `with_job_hash_context'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:128:in `dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:168:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:85:in `process_one'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:73:in `run'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/util.rb:16:in `watchdog'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/util.rb:25:in `block in safe_thread'
2018-08-21T20:59:30.998Z 14838 TID-gmufln314 SendMailsJob JID-1108c0f97b3b45c176d631d2 INFO: start
2018-08-21T20:59:31.030Z 14838 TID-gmufln314 SendMailsJob JID-1108c0f97b3b45c176d631d2 INFO: fail: 0.032 sec
2018-08-21T20:59:31.030Z 14838 TID-gmufln314 WARN: {"context":"Job raised exception","job":{"class":"ActiveJob::QueueAdapters::SidekiqAdapter::JobWrapper","wrapped":"SendMailsJob","queue":"default","args":[{"job_class":"SendMailsJob","job_id":"bcfeae89-a1a4-4e57-87f8-28a199e3280c","queue_name":"default","priority":null,"arguments":[{"_aj_globalid":"gid://book-store/Book/9"}],"locale":"en"}],"retry":true,"jid":"1108c0f97b3b45c176d631d2","created_at":1534882382.715988,"enqueued_at":1534885170.9972394,"error_message":"Error while trying to deserialize arguments: Couldn't find Book with 'id'=9","error_class":"ActiveJob::DeserializationError","failed_at":1534882382.7708082,"retry_count":7,"retried_at":1534885171.0225506},"jobstr":"{\"class\":\"ActiveJob::QueueAdapters::SidekiqAdapter::JobWrapper\",\"wrapped\":\"SendMailsJob\",\"queue\":\"default\",\"args\":[{\"job_class\":\"SendMailsJob\",\"job_id\":\"bcfeae89-a1a4-4e57-87f8-28a199e3280c\",\"queue_name\":\"default\",\"priority\":null,\"arguments\":[{\"_aj_globalid\":\"gid://book-store/Book/9\"}],\"locale\":\"en\"}],\"retry\":true,\"jid\":\"1108c0f97b3b45c176d631d2\",\"created_at\":1534882382.715988,\"enqueued_at\":1534885170.9972394,\"error_message\":\"undefined method `url' for nil:NilClass\\nDid you mean?  URI\",\"error_class\":\"NoMethodError\",\"failed_at\":1534882382.7708082,\"retry_count\":6,\"retried_at\":1534883747.592339}"}
2018-08-21T20:59:31.030Z 14838 TID-gmufln314 WARN: ActiveJob::DeserializationError: Error while trying to deserialize arguments: Couldn't find Book with 'id'=9
2018-08-21T20:59:31.031Z 14838 TID-gmufln314 WARN: /home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activerecord-5.0.1/lib/active_record/relation/finder_methods.rb:353:in `raise_record_not_found_exception!'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activerecord-5.0.1/lib/active_record/relation/finder_methods.rb:479:in `find_one'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activerecord-5.0.1/lib/active_record/relation/finder_methods.rb:458:in `find_with_ids'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activerecord-5.0.1/lib/active_record/relation/finder_methods.rb:66:in `find'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activerecord-5.0.1/lib/active_record/querying.rb:3:in `find'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activerecord-5.0.1/lib/active_record/core.rb:151:in `find'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/globalid-0.3.7/lib/global_id/locator.rb:130:in `locate'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/globalid-0.3.7/lib/global_id/locator.rb:155:in `block in locate'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/globalid-0.3.7/lib/global_id/locator.rb:165:in `block in unscoped'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activerecord-5.0.1/lib/active_record/scoping/default.rb:35:in `block in unscoped'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activerecord-5.0.1/lib/active_record/relation.rb:351:in `scoping'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activerecord-5.0.1/lib/active_record/scoping/default.rb:35:in `unscoped'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/globalid-0.3.7/lib/global_id/locator.rb:165:in `unscoped'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/globalid-0.3.7/lib/global_id/locator.rb:155:in `locate'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/globalid-0.3.7/lib/global_id/locator.rb:17:in `locate'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/arguments.rb:111:in `deserialize_global_id'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/arguments.rb:97:in `deserialize_argument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/arguments.rb:51:in `block in deserialize'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/arguments.rb:51:in `map'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/arguments.rb:51:in `deserialize'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/core.rb:128:in `deserialize_arguments'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/core.rb:118:in `deserialize_arguments_if_needed'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:32:in `perform_now'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:22:in `block in execute'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:126:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/railtie.rb:26:in `block (4 levels) in <class:Railtie>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:85:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:68:in `block in wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:81:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:67:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/railtie.rb:25:in `block (3 levels) in <class:Railtie>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `instance_exec'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `block in make_lambda'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:285:in `block in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:447:in `block in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:101:in `__run_callbacks__'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:750:in `_run_execute_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:90:in `run_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:20:in `execute'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/queue_adapters/sidekiq_adapter.rb:40:in `perform'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:199:in `execute_job'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:170:in `block (2 levels) in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/middleware/chain.rb:128:in `block in invoke'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/middleware/chain.rb:133:in `invoke'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:169:in `block in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:141:in `block (6 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/job_retry.rb:97:in `local'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:140:in `block (5 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/rails.rb:42:in `block in call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:85:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:68:in `block in wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:85:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:67:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/rails.rb:41:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:136:in `block (4 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:215:in `stats'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:131:in `block (3 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/job_logger.rb:7:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:130:in `block (2 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/job_retry.rb:72:in `global'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:129:in `block in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/logging.rb:44:in `with_context'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/logging.rb:38:in `with_job_hash_context'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:128:in `dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:168:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:85:in `process_one'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:73:in `run'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/util.rb:16:in `watchdog'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/util.rb:25:in `block in safe_thread'
2018-08-21T20:59:51.059Z 14838 TID-gmufreejs SendMailsJob JID-95236a612130af4240e0fdad INFO: start
2018-08-21T20:59:51.098Z 14838 TID-gmufreejs SendMailsJob JID-95236a612130af4240e0fdad INFO: fail: 0.039 sec
2018-08-21T20:59:51.098Z 14838 TID-gmufreejs WARN: {"context":"Job raised exception","job":{"class":"ActiveJob::QueueAdapters::SidekiqAdapter::JobWrapper","wrapped":"SendMailsJob","queue":"default","args":[{"job_class":"SendMailsJob","job_id":"d036e0a2-07d4-4c37-9b26-3c981cc64b80","queue_name":"default","priority":null,"arguments":[{"_aj_globalid":"gid://book-store/Book/11"}],"locale":"en"}],"retry":true,"jid":"95236a612130af4240e0fdad","created_at":1534885162.1222718,"enqueued_at":1534885191.0551949,"error_message":"undefined method `url' for nil:NilClass\nDid you mean?  URI","error_class":"NoMethodError","failed_at":1534885162.1875215,"retry_count":1,"retried_at":1534885191.0961876},"jobstr":"{\"class\":\"ActiveJob::QueueAdapters::SidekiqAdapter::JobWrapper\",\"wrapped\":\"SendMailsJob\",\"queue\":\"default\",\"args\":[{\"job_class\":\"SendMailsJob\",\"job_id\":\"d036e0a2-07d4-4c37-9b26-3c981cc64b80\",\"queue_name\":\"default\",\"priority\":null,\"arguments\":[{\"_aj_globalid\":\"gid://book-store/Book/11\"}],\"locale\":\"en\"}],\"retry\":true,\"jid\":\"95236a612130af4240e0fdad\",\"created_at\":1534885162.1222718,\"enqueued_at\":1534885191.0551949,\"error_message\":\"undefined method `url' for nil:NilClass\\nDid you mean?  URI\",\"error_class\":\"NoMethodError\",\"failed_at\":1534885162.1875215,\"retry_count\":0}"}
2018-08-21T20:59:51.100Z 14838 TID-gmufreejs WARN: NoMethodError: undefined method `url' for nil:NilClass
Did you mean?  URI
2018-08-21T20:59:51.100Z 14838 TID-gmufreejs WARN: /home/deploy/www/app/mailers/book_mailer.rb:8:in `send_book'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionpack-5.0.1/lib/abstract_controller/base.rb:188:in `process_action'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionpack-5.0.1/lib/abstract_controller/callbacks.rb:20:in `block in process_action'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:97:in `__run_callbacks__'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:90:in `run_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionpack-5.0.1/lib/abstract_controller/callbacks.rb:19:in `process_action'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionpack-5.0.1/lib/abstract_controller/base.rb:126:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/rescuable.rb:23:in `block in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/rescuable.rb:15:in `handle_exceptions'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/rescuable.rb:22:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionview-5.0.1/lib/action_view/rendering.rb:30:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/base.rb:595:in `block in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications.rb:164:in `block in instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications/instrumenter.rb:21:in `instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications.rb:164:in `instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/base.rb:594:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/message_delivery.rb:105:in `block in processed_mailer'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/message_delivery.rb:104:in `tap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/message_delivery.rb:104:in `processed_mailer'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/message_delivery.rb:27:in `__getobj__'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/2.3.0/delegate.rb:80:in `method_missing'
/home/deploy/www/app/jobs/send_mails_job.rb:6:in `perform'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:34:in `block in perform_now'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:126:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/i18n-0.8.0/lib/i18n.rb:257:in `with_locale'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/translation.rb:7:in `block (2 levels) in <module:Translation>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `instance_exec'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `block in make_lambda'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:285:in `block in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:447:in `block in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:24:in `block (4 levels) in <module:Logging>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications.rb:164:in `block in instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications/instrumenter.rb:21:in `instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications.rb:164:in `instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:23:in `block (3 levels) in <module:Logging>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:44:in `block in tag_logger'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/tagged_logging.rb:69:in `block in tagged'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/tagged_logging.rb:26:in `tagged'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/tagged_logging.rb:69:in `tagged'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:44:in `tag_logger'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:20:in `block (2 levels) in <module:Logging>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `instance_exec'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `block in make_lambda'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:285:in `block in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:447:in `block in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:101:in `__run_callbacks__'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:750:in `_run_perform_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:90:in `run_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:33:in `perform_now'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:22:in `block in execute'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:126:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/railtie.rb:26:in `block (4 levels) in <class:Railtie>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:85:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:68:in `block in wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:81:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:67:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/railtie.rb:25:in `block (3 levels) in <class:Railtie>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `instance_exec'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `block in make_lambda'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:285:in `block in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:447:in `block in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:101:in `__run_callbacks__'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:750:in `_run_execute_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:90:in `run_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:20:in `execute'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/queue_adapters/sidekiq_adapter.rb:40:in `perform'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:199:in `execute_job'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:170:in `block (2 levels) in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/middleware/chain.rb:128:in `block in invoke'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/middleware/chain.rb:133:in `invoke'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:169:in `block in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:141:in `block (6 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/job_retry.rb:97:in `local'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:140:in `block (5 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/rails.rb:42:in `block in call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:85:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:68:in `block in wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:85:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:67:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/rails.rb:41:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:136:in `block (4 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:215:in `stats'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:131:in `block (3 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/job_logger.rb:7:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:130:in `block (2 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/job_retry.rb:72:in `global'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:129:in `block in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/logging.rb:44:in `with_context'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/logging.rb:38:in `with_job_hash_context'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:128:in `dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:168:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:85:in `process_one'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:73:in `run'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/util.rb:16:in `watchdog'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/util.rb:25:in `block in safe_thread'
2018-08-21T21:00:57.702Z 14838 TID-gmufnjzzk SendMailsJob JID-95236a612130af4240e0fdad INFO: start
2018-08-21T21:00:57.745Z 14838 TID-gmufnjzzk SendMailsJob JID-95236a612130af4240e0fdad INFO: fail: 0.042 sec
2018-08-21T21:00:57.745Z 14838 TID-gmufnjzzk WARN: {"context":"Job raised exception","job":{"class":"ActiveJob::QueueAdapters::SidekiqAdapter::JobWrapper","wrapped":"SendMailsJob","queue":"default","args":[{"job_class":"SendMailsJob","job_id":"d036e0a2-07d4-4c37-9b26-3c981cc64b80","queue_name":"default","priority":null,"arguments":[{"_aj_globalid":"gid://book-store/Book/11"}],"locale":"en"}],"retry":true,"jid":"95236a612130af4240e0fdad","created_at":1534885162.1222718,"enqueued_at":1534885257.7014377,"error_message":"undefined method `url' for nil:NilClass\nDid you mean?  URI","error_class":"NoMethodError","failed_at":1534885162.1875215,"retry_count":2,"retried_at":1534885257.7385247},"jobstr":"{\"class\":\"ActiveJob::QueueAdapters::SidekiqAdapter::JobWrapper\",\"wrapped\":\"SendMailsJob\",\"queue\":\"default\",\"args\":[{\"job_class\":\"SendMailsJob\",\"job_id\":\"d036e0a2-07d4-4c37-9b26-3c981cc64b80\",\"queue_name\":\"default\",\"priority\":null,\"arguments\":[{\"_aj_globalid\":\"gid://book-store/Book/11\"}],\"locale\":\"en\"}],\"retry\":true,\"jid\":\"95236a612130af4240e0fdad\",\"created_at\":1534885162.1222718,\"enqueued_at\":1534885257.7014377,\"error_message\":\"undefined method `url' for nil:NilClass\\nDid you mean?  URI\",\"error_class\":\"NoMethodError\",\"failed_at\":1534885162.1875215,\"retry_count\":1,\"retried_at\":1534885191.0961876}"}
2018-08-21T21:00:57.746Z 14838 TID-gmufnjzzk WARN: NoMethodError: undefined method `url' for nil:NilClass
Did you mean?  URI
2018-08-21T21:00:57.746Z 14838 TID-gmufnjzzk WARN: /home/deploy/www/app/mailers/book_mailer.rb:8:in `send_book'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionpack-5.0.1/lib/abstract_controller/base.rb:188:in `process_action'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionpack-5.0.1/lib/abstract_controller/callbacks.rb:20:in `block in process_action'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:97:in `__run_callbacks__'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:90:in `run_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionpack-5.0.1/lib/abstract_controller/callbacks.rb:19:in `process_action'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionpack-5.0.1/lib/abstract_controller/base.rb:126:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/rescuable.rb:23:in `block in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/rescuable.rb:15:in `handle_exceptions'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/rescuable.rb:22:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionview-5.0.1/lib/action_view/rendering.rb:30:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/base.rb:595:in `block in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications.rb:164:in `block in instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications/instrumenter.rb:21:in `instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications.rb:164:in `instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/base.rb:594:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/message_delivery.rb:105:in `block in processed_mailer'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/message_delivery.rb:104:in `tap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/message_delivery.rb:104:in `processed_mailer'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/message_delivery.rb:27:in `__getobj__'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/2.3.0/delegate.rb:80:in `method_missing'
/home/deploy/www/app/jobs/send_mails_job.rb:6:in `perform'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:34:in `block in perform_now'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:126:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/i18n-0.8.0/lib/i18n.rb:257:in `with_locale'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/translation.rb:7:in `block (2 levels) in <module:Translation>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `instance_exec'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `block in make_lambda'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:285:in `block in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:447:in `block in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:24:in `block (4 levels) in <module:Logging>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications.rb:164:in `block in instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications/instrumenter.rb:21:in `instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications.rb:164:in `instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:23:in `block (3 levels) in <module:Logging>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:44:in `block in tag_logger'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/tagged_logging.rb:69:in `block in tagged'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/tagged_logging.rb:26:in `tagged'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/tagged_logging.rb:69:in `tagged'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:44:in `tag_logger'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:20:in `block (2 levels) in <module:Logging>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `instance_exec'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `block in make_lambda'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:285:in `block in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:447:in `block in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:101:in `__run_callbacks__'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:750:in `_run_perform_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:90:in `run_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:33:in `perform_now'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:22:in `block in execute'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:126:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/railtie.rb:26:in `block (4 levels) in <class:Railtie>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:85:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:68:in `block in wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:81:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:67:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/railtie.rb:25:in `block (3 levels) in <class:Railtie>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `instance_exec'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `block in make_lambda'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:285:in `block in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:447:in `block in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:101:in `__run_callbacks__'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:750:in `_run_execute_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:90:in `run_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:20:in `execute'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/queue_adapters/sidekiq_adapter.rb:40:in `perform'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:199:in `execute_job'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:170:in `block (2 levels) in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/middleware/chain.rb:128:in `block in invoke'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/middleware/chain.rb:133:in `invoke'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:169:in `block in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:141:in `block (6 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/job_retry.rb:97:in `local'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:140:in `block (5 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/rails.rb:42:in `block in call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:85:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:68:in `block in wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:85:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:67:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/rails.rb:41:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:136:in `block (4 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:215:in `stats'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:131:in `block (3 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/job_logger.rb:7:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:130:in `block (2 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/job_retry.rb:72:in `global'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:129:in `block in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/logging.rb:44:in `with_context'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/logging.rb:38:in `with_job_hash_context'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:128:in `dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:168:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:85:in `process_one'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:73:in `run'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/util.rb:16:in `watchdog'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/util.rb:25:in `block in safe_thread'
2018-08-21T21:02:38.729Z 14838 TID-gmufog27s SendMailsJob JID-95236a612130af4240e0fdad INFO: start
2018-08-21T21:02:38.767Z 14838 TID-gmufog27s SendMailsJob JID-95236a612130af4240e0fdad INFO: fail: 0.037 sec
2018-08-21T21:02:38.773Z 14838 TID-gmufog27s WARN: {"context":"Job raised exception","job":{"class":"ActiveJob::QueueAdapters::SidekiqAdapter::JobWrapper","wrapped":"SendMailsJob","queue":"default","args":[{"job_class":"SendMailsJob","job_id":"d036e0a2-07d4-4c37-9b26-3c981cc64b80","queue_name":"default","priority":null,"arguments":[{"_aj_globalid":"gid://book-store/Book/11"}],"locale":"en"}],"retry":true,"jid":"95236a612130af4240e0fdad","created_at":1534885162.1222718,"enqueued_at":1534885358.728387,"error_message":"undefined method `url' for nil:NilClass\nDid you mean?  URI","error_class":"NoMethodError","failed_at":1534885162.1875215,"retry_count":3,"retried_at":1534885358.7650652},"jobstr":"{\"class\":\"ActiveJob::QueueAdapters::SidekiqAdapter::JobWrapper\",\"wrapped\":\"SendMailsJob\",\"queue\":\"default\",\"args\":[{\"job_class\":\"SendMailsJob\",\"job_id\":\"d036e0a2-07d4-4c37-9b26-3c981cc64b80\",\"queue_name\":\"default\",\"priority\":null,\"arguments\":[{\"_aj_globalid\":\"gid://book-store/Book/11\"}],\"locale\":\"en\"}],\"retry\":true,\"jid\":\"95236a612130af4240e0fdad\",\"created_at\":1534885162.1222718,\"enqueued_at\":1534885358.728387,\"error_message\":\"undefined method `url' for nil:NilClass\\nDid you mean?  URI\",\"error_class\":\"NoMethodError\",\"failed_at\":1534885162.1875215,\"retry_count\":2,\"retried_at\":1534885257.7385247}"}
2018-08-21T21:02:38.773Z 14838 TID-gmufog27s WARN: NoMethodError: undefined method `url' for nil:NilClass
Did you mean?  URI
2018-08-21T21:02:38.774Z 14838 TID-gmufog27s WARN: /home/deploy/www/app/mailers/book_mailer.rb:8:in `send_book'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionpack-5.0.1/lib/abstract_controller/base.rb:188:in `process_action'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionpack-5.0.1/lib/abstract_controller/callbacks.rb:20:in `block in process_action'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:97:in `__run_callbacks__'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:90:in `run_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionpack-5.0.1/lib/abstract_controller/callbacks.rb:19:in `process_action'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionpack-5.0.1/lib/abstract_controller/base.rb:126:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/rescuable.rb:23:in `block in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/rescuable.rb:15:in `handle_exceptions'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/rescuable.rb:22:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionview-5.0.1/lib/action_view/rendering.rb:30:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/base.rb:595:in `block in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications.rb:164:in `block in instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications/instrumenter.rb:21:in `instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications.rb:164:in `instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/base.rb:594:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/message_delivery.rb:105:in `block in processed_mailer'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/message_delivery.rb:104:in `tap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/message_delivery.rb:104:in `processed_mailer'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/message_delivery.rb:27:in `__getobj__'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/2.3.0/delegate.rb:80:in `method_missing'
/home/deploy/www/app/jobs/send_mails_job.rb:6:in `perform'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:34:in `block in perform_now'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:126:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/i18n-0.8.0/lib/i18n.rb:257:in `with_locale'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/translation.rb:7:in `block (2 levels) in <module:Translation>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `instance_exec'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `block in make_lambda'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:285:in `block in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:447:in `block in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:24:in `block (4 levels) in <module:Logging>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications.rb:164:in `block in instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications/instrumenter.rb:21:in `instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications.rb:164:in `instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:23:in `block (3 levels) in <module:Logging>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:44:in `block in tag_logger'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/tagged_logging.rb:69:in `block in tagged'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/tagged_logging.rb:26:in `tagged'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/tagged_logging.rb:69:in `tagged'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:44:in `tag_logger'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:20:in `block (2 levels) in <module:Logging>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `instance_exec'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `block in make_lambda'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:285:in `block in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:447:in `block in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:101:in `__run_callbacks__'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:750:in `_run_perform_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:90:in `run_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:33:in `perform_now'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:22:in `block in execute'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:126:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/railtie.rb:26:in `block (4 levels) in <class:Railtie>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:85:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:68:in `block in wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:81:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:67:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/railtie.rb:25:in `block (3 levels) in <class:Railtie>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `instance_exec'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `block in make_lambda'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:285:in `block in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:447:in `block in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:101:in `__run_callbacks__'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:750:in `_run_execute_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:90:in `run_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:20:in `execute'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/queue_adapters/sidekiq_adapter.rb:40:in `perform'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:199:in `execute_job'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:170:in `block (2 levels) in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/middleware/chain.rb:128:in `block in invoke'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/middleware/chain.rb:133:in `invoke'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:169:in `block in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:141:in `block (6 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/job_retry.rb:97:in `local'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:140:in `block (5 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/rails.rb:42:in `block in call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:85:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:68:in `block in wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:85:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:67:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/rails.rb:41:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:136:in `block (4 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:215:in `stats'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:131:in `block (3 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/job_logger.rb:7:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:130:in `block (2 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/job_retry.rb:72:in `global'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:129:in `block in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/logging.rb:44:in `with_context'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/logging.rb:38:in `with_job_hash_context'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:128:in `dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:168:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:85:in `process_one'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:73:in `run'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/util.rb:16:in `watchdog'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/util.rb:25:in `block in safe_thread'
2018-08-21T21:06:20.857Z 14838 TID-gmufmvw0c SendMailsJob JID-95236a612130af4240e0fdad INFO: start
2018-08-21T21:06:20.904Z 14838 TID-gmufmvw0c SendMailsJob JID-95236a612130af4240e0fdad INFO: fail: 0.046 sec
2018-08-21T21:06:20.905Z 14838 TID-gmufmvw0c WARN: {"context":"Job raised exception","job":{"class":"ActiveJob::QueueAdapters::SidekiqAdapter::JobWrapper","wrapped":"SendMailsJob","queue":"default","args":[{"job_class":"SendMailsJob","job_id":"d036e0a2-07d4-4c37-9b26-3c981cc64b80","queue_name":"default","priority":null,"arguments":[{"_aj_globalid":"gid://book-store/Book/11"}],"locale":"en"}],"retry":true,"jid":"95236a612130af4240e0fdad","created_at":1534885162.1222718,"enqueued_at":1534885580.8474793,"error_message":"undefined method `url' for nil:NilClass\nDid you mean?  URI","error_class":"NoMethodError","failed_at":1534885162.1875215,"retry_count":4,"retried_at":1534885580.9016793},"jobstr":"{\"class\":\"ActiveJob::QueueAdapters::SidekiqAdapter::JobWrapper\",\"wrapped\":\"SendMailsJob\",\"queue\":\"default\",\"args\":[{\"job_class\":\"SendMailsJob\",\"job_id\":\"d036e0a2-07d4-4c37-9b26-3c981cc64b80\",\"queue_name\":\"default\",\"priority\":null,\"arguments\":[{\"_aj_globalid\":\"gid://book-store/Book/11\"}],\"locale\":\"en\"}],\"retry\":true,\"jid\":\"95236a612130af4240e0fdad\",\"created_at\":1534885162.1222718,\"enqueued_at\":1534885580.8474793,\"error_message\":\"undefined method `url' for nil:NilClass\\nDid you mean?  URI\",\"error_class\":\"NoMethodError\",\"failed_at\":1534885162.1875215,\"retry_count\":3,\"retried_at\":1534885358.7650652}"}
2018-08-21T21:06:20.906Z 14838 TID-gmufmvw0c WARN: NoMethodError: undefined method `url' for nil:NilClass
Did you mean?  URI
2018-08-21T21:06:20.907Z 14838 TID-gmufmvw0c WARN: /home/deploy/www/app/mailers/book_mailer.rb:8:in `send_book'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionpack-5.0.1/lib/abstract_controller/base.rb:188:in `process_action'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionpack-5.0.1/lib/abstract_controller/callbacks.rb:20:in `block in process_action'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:97:in `__run_callbacks__'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:90:in `run_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionpack-5.0.1/lib/abstract_controller/callbacks.rb:19:in `process_action'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionpack-5.0.1/lib/abstract_controller/base.rb:126:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/rescuable.rb:23:in `block in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/rescuable.rb:15:in `handle_exceptions'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/rescuable.rb:22:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionview-5.0.1/lib/action_view/rendering.rb:30:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/base.rb:595:in `block in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications.rb:164:in `block in instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications/instrumenter.rb:21:in `instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications.rb:164:in `instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/base.rb:594:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/message_delivery.rb:105:in `block in processed_mailer'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/message_delivery.rb:104:in `tap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/message_delivery.rb:104:in `processed_mailer'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/message_delivery.rb:27:in `__getobj__'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/2.3.0/delegate.rb:80:in `method_missing'
/home/deploy/www/app/jobs/send_mails_job.rb:6:in `perform'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:34:in `block in perform_now'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:126:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/i18n-0.8.0/lib/i18n.rb:257:in `with_locale'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/translation.rb:7:in `block (2 levels) in <module:Translation>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `instance_exec'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `block in make_lambda'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:285:in `block in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:447:in `block in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:24:in `block (4 levels) in <module:Logging>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications.rb:164:in `block in instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications/instrumenter.rb:21:in `instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications.rb:164:in `instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:23:in `block (3 levels) in <module:Logging>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:44:in `block in tag_logger'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/tagged_logging.rb:69:in `block in tagged'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/tagged_logging.rb:26:in `tagged'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/tagged_logging.rb:69:in `tagged'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:44:in `tag_logger'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:20:in `block (2 levels) in <module:Logging>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `instance_exec'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `block in make_lambda'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:285:in `block in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:447:in `block in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:101:in `__run_callbacks__'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:750:in `_run_perform_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:90:in `run_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:33:in `perform_now'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:22:in `block in execute'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:126:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/railtie.rb:26:in `block (4 levels) in <class:Railtie>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:85:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:68:in `block in wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:81:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:67:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/railtie.rb:25:in `block (3 levels) in <class:Railtie>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `instance_exec'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `block in make_lambda'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:285:in `block in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:447:in `block in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:101:in `__run_callbacks__'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:750:in `_run_execute_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:90:in `run_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:20:in `execute'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/queue_adapters/sidekiq_adapter.rb:40:in `perform'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:199:in `execute_job'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:170:in `block (2 levels) in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/middleware/chain.rb:128:in `block in invoke'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/middleware/chain.rb:133:in `invoke'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:169:in `block in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:141:in `block (6 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/job_retry.rb:97:in `local'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:140:in `block (5 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/rails.rb:42:in `block in call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:85:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:68:in `block in wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:85:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:67:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/rails.rb:41:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:136:in `block (4 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:215:in `stats'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:131:in `block (3 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/job_logger.rb:7:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:130:in `block (2 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/job_retry.rb:72:in `global'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:129:in `block in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/logging.rb:44:in `with_context'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/logging.rb:38:in `with_job_hash_context'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:128:in `dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:168:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:85:in `process_one'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:73:in `run'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/util.rb:16:in `watchdog'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/util.rb:25:in `block in safe_thread'
2018-08-21T21:09:17.214Z 14838 TID-gmufp6pbk SendMailsJob JID-2947776ded23e995a0d43472 INFO: start
2018-08-21T21:09:17.236Z 14838 TID-gmufp6pbk SendMailsJob JID-2947776ded23e995a0d43472 INFO: fail: 0.022 sec
2018-08-21T21:09:17.237Z 14838 TID-gmufp6pbk WARN: {"context":"Job raised exception","job":{"class":"ActiveJob::QueueAdapters::SidekiqAdapter::JobWrapper","wrapped":"SendMailsJob","queue":"default","args":[{"job_class":"SendMailsJob","job_id":"1e1bb720-fb43-4319-9945-0413f26d13b2","queue_name":"default","priority":null,"arguments":[{"_aj_globalid":"gid://book-store/Book/10"}],"locale":"en"}],"retry":true,"jid":"2947776ded23e995a0d43472","created_at":1534884394.6657887,"enqueued_at":1534885757.212409,"error_message":"Error while trying to deserialize arguments: Couldn't find Book with 'id'=10","error_class":"ActiveJob::DeserializationError","failed_at":1534884394.782486,"retry_count":6,"retried_at":1534885757.2353408},"jobstr":"{\"class\":\"ActiveJob::QueueAdapters::SidekiqAdapter::JobWrapper\",\"wrapped\":\"SendMailsJob\",\"queue\":\"default\",\"args\":[{\"job_class\":\"SendMailsJob\",\"job_id\":\"1e1bb720-fb43-4319-9945-0413f26d13b2\",\"queue_name\":\"default\",\"priority\":null,\"arguments\":[{\"_aj_globalid\":\"gid://book-store/Book/10\"}],\"locale\":\"en\"}],\"retry\":true,\"jid\":\"2947776ded23e995a0d43472\",\"created_at\":1534884394.6657887,\"enqueued_at\":1534885757.212409,\"error_message\":\"Error while trying to deserialize arguments: Couldn't find Book with 'id'=10\",\"error_class\":\"ActiveJob::DeserializationError\",\"failed_at\":1534884394.782486,\"retry_count\":5,\"retried_at\":1534885059.55651}"}
2018-08-21T21:09:17.237Z 14838 TID-gmufp6pbk WARN: ActiveJob::DeserializationError: Error while trying to deserialize arguments: Couldn't find Book with 'id'=10
2018-08-21T21:09:17.237Z 14838 TID-gmufp6pbk WARN: /home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activerecord-5.0.1/lib/active_record/relation/finder_methods.rb:353:in `raise_record_not_found_exception!'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activerecord-5.0.1/lib/active_record/relation/finder_methods.rb:479:in `find_one'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activerecord-5.0.1/lib/active_record/relation/finder_methods.rb:458:in `find_with_ids'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activerecord-5.0.1/lib/active_record/relation/finder_methods.rb:66:in `find'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activerecord-5.0.1/lib/active_record/querying.rb:3:in `find'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activerecord-5.0.1/lib/active_record/core.rb:151:in `find'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/globalid-0.3.7/lib/global_id/locator.rb:130:in `locate'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/globalid-0.3.7/lib/global_id/locator.rb:155:in `block in locate'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/globalid-0.3.7/lib/global_id/locator.rb:165:in `block in unscoped'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activerecord-5.0.1/lib/active_record/scoping/default.rb:35:in `block in unscoped'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activerecord-5.0.1/lib/active_record/relation.rb:351:in `scoping'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activerecord-5.0.1/lib/active_record/scoping/default.rb:35:in `unscoped'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/globalid-0.3.7/lib/global_id/locator.rb:165:in `unscoped'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/globalid-0.3.7/lib/global_id/locator.rb:155:in `locate'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/globalid-0.3.7/lib/global_id/locator.rb:17:in `locate'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/arguments.rb:111:in `deserialize_global_id'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/arguments.rb:97:in `deserialize_argument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/arguments.rb:51:in `block in deserialize'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/arguments.rb:51:in `map'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/arguments.rb:51:in `deserialize'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/core.rb:128:in `deserialize_arguments'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/core.rb:118:in `deserialize_arguments_if_needed'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:32:in `perform_now'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:22:in `block in execute'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:126:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/railtie.rb:26:in `block (4 levels) in <class:Railtie>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:85:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:68:in `block in wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:81:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:67:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/railtie.rb:25:in `block (3 levels) in <class:Railtie>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `instance_exec'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `block in make_lambda'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:285:in `block in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:447:in `block in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:101:in `__run_callbacks__'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:750:in `_run_execute_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:90:in `run_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:20:in `execute'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/queue_adapters/sidekiq_adapter.rb:40:in `perform'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:199:in `execute_job'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:170:in `block (2 levels) in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/middleware/chain.rb:128:in `block in invoke'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/middleware/chain.rb:133:in `invoke'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:169:in `block in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:141:in `block (6 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/job_retry.rb:97:in `local'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:140:in `block (5 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/rails.rb:42:in `block in call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:85:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:68:in `block in wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:85:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:67:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/rails.rb:41:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:136:in `block (4 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:215:in `stats'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:131:in `block (3 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/job_logger.rb:7:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:130:in `block (2 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/job_retry.rb:72:in `global'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:129:in `block in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/logging.rb:44:in `with_context'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/logging.rb:38:in `with_job_hash_context'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:128:in `dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:168:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:85:in `process_one'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:73:in `run'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/util.rb:16:in `watchdog'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/util.rb:25:in `block in safe_thread'
2018-08-21T21:12:04.538Z 14838 TID-gmufqfpec SendMailsJob JID-95236a612130af4240e0fdad INFO: start
2018-08-21T21:12:04.587Z 14838 TID-gmufqfpec SendMailsJob JID-95236a612130af4240e0fdad INFO: fail: 0.049 sec
2018-08-21T21:12:04.587Z 14838 TID-gmufqfpec WARN: {"context":"Job raised exception","job":{"class":"ActiveJob::QueueAdapters::SidekiqAdapter::JobWrapper","wrapped":"SendMailsJob","queue":"default","args":[{"job_class":"SendMailsJob","job_id":"d036e0a2-07d4-4c37-9b26-3c981cc64b80","queue_name":"default","priority":null,"arguments":[{"_aj_globalid":"gid://book-store/Book/11"}],"locale":"en"}],"retry":true,"jid":"95236a612130af4240e0fdad","created_at":1534885162.1222718,"enqueued_at":1534885924.5369284,"error_message":"undefined method `url' for nil:NilClass\nDid you mean?  URI","error_class":"NoMethodError","failed_at":1534885162.1875215,"retry_count":5,"retried_at":1534885924.586066},"jobstr":"{\"class\":\"ActiveJob::QueueAdapters::SidekiqAdapter::JobWrapper\",\"wrapped\":\"SendMailsJob\",\"queue\":\"default\",\"args\":[{\"job_class\":\"SendMailsJob\",\"job_id\":\"d036e0a2-07d4-4c37-9b26-3c981cc64b80\",\"queue_name\":\"default\",\"priority\":null,\"arguments\":[{\"_aj_globalid\":\"gid://book-store/Book/11\"}],\"locale\":\"en\"}],\"retry\":true,\"jid\":\"95236a612130af4240e0fdad\",\"created_at\":1534885162.1222718,\"enqueued_at\":1534885924.5369284,\"error_message\":\"undefined method `url' for nil:NilClass\\nDid you mean?  URI\",\"error_class\":\"NoMethodError\",\"failed_at\":1534885162.1875215,\"retry_count\":4,\"retried_at\":1534885580.9016793}"}
2018-08-21T21:12:04.588Z 14838 TID-gmufqfpec WARN: NoMethodError: undefined method `url' for nil:NilClass
Did you mean?  URI
2018-08-21T21:12:04.588Z 14838 TID-gmufqfpec WARN: /home/deploy/www/app/mailers/book_mailer.rb:8:in `send_book'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionpack-5.0.1/lib/abstract_controller/base.rb:188:in `process_action'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionpack-5.0.1/lib/abstract_controller/callbacks.rb:20:in `block in process_action'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:97:in `__run_callbacks__'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:90:in `run_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionpack-5.0.1/lib/abstract_controller/callbacks.rb:19:in `process_action'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionpack-5.0.1/lib/abstract_controller/base.rb:126:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/rescuable.rb:23:in `block in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/rescuable.rb:15:in `handle_exceptions'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/rescuable.rb:22:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionview-5.0.1/lib/action_view/rendering.rb:30:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/base.rb:595:in `block in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications.rb:164:in `block in instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications/instrumenter.rb:21:in `instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications.rb:164:in `instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/base.rb:594:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/message_delivery.rb:105:in `block in processed_mailer'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/message_delivery.rb:104:in `tap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/message_delivery.rb:104:in `processed_mailer'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/message_delivery.rb:27:in `__getobj__'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/2.3.0/delegate.rb:80:in `method_missing'
/home/deploy/www/app/jobs/send_mails_job.rb:6:in `perform'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:34:in `block in perform_now'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:126:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/i18n-0.8.0/lib/i18n.rb:257:in `with_locale'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/translation.rb:7:in `block (2 levels) in <module:Translation>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `instance_exec'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `block in make_lambda'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:285:in `block in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:447:in `block in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:24:in `block (4 levels) in <module:Logging>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications.rb:164:in `block in instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications/instrumenter.rb:21:in `instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications.rb:164:in `instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:23:in `block (3 levels) in <module:Logging>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:44:in `block in tag_logger'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/tagged_logging.rb:69:in `block in tagged'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/tagged_logging.rb:26:in `tagged'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/tagged_logging.rb:69:in `tagged'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:44:in `tag_logger'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:20:in `block (2 levels) in <module:Logging>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `instance_exec'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `block in make_lambda'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:285:in `block in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:447:in `block in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:101:in `__run_callbacks__'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:750:in `_run_perform_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:90:in `run_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:33:in `perform_now'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:22:in `block in execute'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:126:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/railtie.rb:26:in `block (4 levels) in <class:Railtie>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:85:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:68:in `block in wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:81:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:67:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/railtie.rb:25:in `block (3 levels) in <class:Railtie>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `instance_exec'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `block in make_lambda'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:285:in `block in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:447:in `block in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:101:in `__run_callbacks__'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:750:in `_run_execute_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:90:in `run_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:20:in `execute'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/queue_adapters/sidekiq_adapter.rb:40:in `perform'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:199:in `execute_job'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:170:in `block (2 levels) in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/middleware/chain.rb:128:in `block in invoke'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/middleware/chain.rb:133:in `invoke'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:169:in `block in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:141:in `block (6 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/job_retry.rb:97:in `local'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:140:in `block (5 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/rails.rb:42:in `block in call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:85:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:68:in `block in wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:85:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:67:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/rails.rb:41:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:136:in `block (4 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:215:in `stats'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:131:in `block (3 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/job_logger.rb:7:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:130:in `block (2 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/job_retry.rb:72:in `global'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:129:in `block in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/logging.rb:44:in `with_context'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/logging.rb:38:in `with_job_hash_context'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:128:in `dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:168:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:85:in `process_one'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:73:in `run'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/util.rb:16:in `watchdog'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/util.rb:25:in `block in safe_thread'
2018-08-21T21:24:50.522Z 14838 TID-gmufdy1a4 SendMailsJob JID-95236a612130af4240e0fdad INFO: start
2018-08-21T21:24:50.571Z 14838 TID-gmufdy1a4 SendMailsJob JID-95236a612130af4240e0fdad INFO: fail: 0.049 sec
2018-08-21T21:24:50.571Z 14838 TID-gmufdy1a4 WARN: {"context":"Job raised exception","job":{"class":"ActiveJob::QueueAdapters::SidekiqAdapter::JobWrapper","wrapped":"SendMailsJob","queue":"default","args":[{"job_class":"SendMailsJob","job_id":"d036e0a2-07d4-4c37-9b26-3c981cc64b80","queue_name":"default","priority":null,"arguments":[{"_aj_globalid":"gid://book-store/Book/11"}],"locale":"en"}],"retry":true,"jid":"95236a612130af4240e0fdad","created_at":1534885162.1222718,"enqueued_at":1534886690.5197968,"error_message":"undefined method `url' for nil:NilClass\nDid you mean?  URI","error_class":"NoMethodError","failed_at":1534885162.1875215,"retry_count":6,"retried_at":1534886690.5696766},"jobstr":"{\"class\":\"ActiveJob::QueueAdapters::SidekiqAdapter::JobWrapper\",\"wrapped\":\"SendMailsJob\",\"queue\":\"default\",\"args\":[{\"job_class\":\"SendMailsJob\",\"job_id\":\"d036e0a2-07d4-4c37-9b26-3c981cc64b80\",\"queue_name\":\"default\",\"priority\":null,\"arguments\":[{\"_aj_globalid\":\"gid://book-store/Book/11\"}],\"locale\":\"en\"}],\"retry\":true,\"jid\":\"95236a612130af4240e0fdad\",\"created_at\":1534885162.1222718,\"enqueued_at\":1534886690.5197968,\"error_message\":\"undefined method `url' for nil:NilClass\\nDid you mean?  URI\",\"error_class\":\"NoMethodError\",\"failed_at\":1534885162.1875215,\"retry_count\":5,\"retried_at\":1534885924.586066}"}
2018-08-21T21:24:50.572Z 14838 TID-gmufdy1a4 WARN: NoMethodError: undefined method `url' for nil:NilClass
Did you mean?  URI
2018-08-21T21:24:50.573Z 14838 TID-gmufdy1a4 WARN: /home/deploy/www/app/mailers/book_mailer.rb:8:in `send_book'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionpack-5.0.1/lib/abstract_controller/base.rb:188:in `process_action'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionpack-5.0.1/lib/abstract_controller/callbacks.rb:20:in `block in process_action'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:97:in `__run_callbacks__'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:90:in `run_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionpack-5.0.1/lib/abstract_controller/callbacks.rb:19:in `process_action'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionpack-5.0.1/lib/abstract_controller/base.rb:126:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/rescuable.rb:23:in `block in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/rescuable.rb:15:in `handle_exceptions'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/rescuable.rb:22:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionview-5.0.1/lib/action_view/rendering.rb:30:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/base.rb:595:in `block in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications.rb:164:in `block in instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications/instrumenter.rb:21:in `instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications.rb:164:in `instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/base.rb:594:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/message_delivery.rb:105:in `block in processed_mailer'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/message_delivery.rb:104:in `tap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/message_delivery.rb:104:in `processed_mailer'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/message_delivery.rb:27:in `__getobj__'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/2.3.0/delegate.rb:80:in `method_missing'
/home/deploy/www/app/jobs/send_mails_job.rb:6:in `perform'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:34:in `block in perform_now'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:126:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/i18n-0.8.0/lib/i18n.rb:257:in `with_locale'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/translation.rb:7:in `block (2 levels) in <module:Translation>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `instance_exec'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `block in make_lambda'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:285:in `block in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:447:in `block in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:24:in `block (4 levels) in <module:Logging>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications.rb:164:in `block in instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications/instrumenter.rb:21:in `instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications.rb:164:in `instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:23:in `block (3 levels) in <module:Logging>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:44:in `block in tag_logger'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/tagged_logging.rb:69:in `block in tagged'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/tagged_logging.rb:26:in `tagged'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/tagged_logging.rb:69:in `tagged'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:44:in `tag_logger'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:20:in `block (2 levels) in <module:Logging>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `instance_exec'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `block in make_lambda'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:285:in `block in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:447:in `block in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:101:in `__run_callbacks__'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:750:in `_run_perform_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:90:in `run_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:33:in `perform_now'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:22:in `block in execute'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:126:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/railtie.rb:26:in `block (4 levels) in <class:Railtie>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:85:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:68:in `block in wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:81:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:67:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/railtie.rb:25:in `block (3 levels) in <class:Railtie>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `instance_exec'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `block in make_lambda'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:285:in `block in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:447:in `block in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:101:in `__run_callbacks__'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:750:in `_run_execute_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:90:in `run_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:20:in `execute'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/queue_adapters/sidekiq_adapter.rb:40:in `perform'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:199:in `execute_job'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:170:in `block (2 levels) in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/middleware/chain.rb:128:in `block in invoke'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/middleware/chain.rb:133:in `invoke'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:169:in `block in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:141:in `block (6 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/job_retry.rb:97:in `local'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:140:in `block (5 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/rails.rb:42:in `block in call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:85:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:68:in `block in wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:85:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:67:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/rails.rb:41:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:136:in `block (4 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:215:in `stats'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:131:in `block (3 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/job_logger.rb:7:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:130:in `block (2 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/job_retry.rb:72:in `global'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:129:in `block in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/logging.rb:44:in `with_context'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/logging.rb:38:in `with_job_hash_context'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:128:in `dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:168:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:85:in `process_one'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:73:in `run'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/util.rb:16:in `watchdog'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/util.rb:25:in `block in safe_thread'
2018-08-21T21:31:27.908Z 14838 TID-gmufm4i0s SendMailsJob JID-2947776ded23e995a0d43472 INFO: start
2018-08-21T21:31:27.931Z 14838 TID-gmufm4i0s SendMailsJob JID-2947776ded23e995a0d43472 INFO: fail: 0.023 sec
2018-08-21T21:31:27.931Z 14838 TID-gmufm4i0s WARN: {"context":"Job raised exception","job":{"class":"ActiveJob::QueueAdapters::SidekiqAdapter::JobWrapper","wrapped":"SendMailsJob","queue":"default","args":[{"job_class":"SendMailsJob","job_id":"1e1bb720-fb43-4319-9945-0413f26d13b2","queue_name":"default","priority":null,"arguments":[{"_aj_globalid":"gid://book-store/Book/10"}],"locale":"en"}],"retry":true,"jid":"2947776ded23e995a0d43472","created_at":1534884394.6657887,"enqueued_at":1534887087.9064891,"error_message":"Error while trying to deserialize arguments: Couldn't find Book with 'id'=10","error_class":"ActiveJob::DeserializationError","failed_at":1534884394.782486,"retry_count":7,"retried_at":1534887087.9303255},"jobstr":"{\"class\":\"ActiveJob::QueueAdapters::SidekiqAdapter::JobWrapper\",\"wrapped\":\"SendMailsJob\",\"queue\":\"default\",\"args\":[{\"job_class\":\"SendMailsJob\",\"job_id\":\"1e1bb720-fb43-4319-9945-0413f26d13b2\",\"queue_name\":\"default\",\"priority\":null,\"arguments\":[{\"_aj_globalid\":\"gid://book-store/Book/10\"}],\"locale\":\"en\"}],\"retry\":true,\"jid\":\"2947776ded23e995a0d43472\",\"created_at\":1534884394.6657887,\"enqueued_at\":1534887087.9064891,\"error_message\":\"Error while trying to deserialize arguments: Couldn't find Book with 'id'=10\",\"error_class\":\"ActiveJob::DeserializationError\",\"failed_at\":1534884394.782486,\"retry_count\":6,\"retried_at\":1534885757.2353408}"}
2018-08-21T21:31:27.931Z 14838 TID-gmufm4i0s WARN: ActiveJob::DeserializationError: Error while trying to deserialize arguments: Couldn't find Book with 'id'=10
2018-08-21T21:31:27.931Z 14838 TID-gmufm4i0s WARN: /home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activerecord-5.0.1/lib/active_record/relation/finder_methods.rb:353:in `raise_record_not_found_exception!'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activerecord-5.0.1/lib/active_record/relation/finder_methods.rb:479:in `find_one'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activerecord-5.0.1/lib/active_record/relation/finder_methods.rb:458:in `find_with_ids'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activerecord-5.0.1/lib/active_record/relation/finder_methods.rb:66:in `find'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activerecord-5.0.1/lib/active_record/querying.rb:3:in `find'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activerecord-5.0.1/lib/active_record/core.rb:151:in `find'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/globalid-0.3.7/lib/global_id/locator.rb:130:in `locate'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/globalid-0.3.7/lib/global_id/locator.rb:155:in `block in locate'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/globalid-0.3.7/lib/global_id/locator.rb:165:in `block in unscoped'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activerecord-5.0.1/lib/active_record/scoping/default.rb:35:in `block in unscoped'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activerecord-5.0.1/lib/active_record/relation.rb:351:in `scoping'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activerecord-5.0.1/lib/active_record/scoping/default.rb:35:in `unscoped'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/globalid-0.3.7/lib/global_id/locator.rb:165:in `unscoped'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/globalid-0.3.7/lib/global_id/locator.rb:155:in `locate'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/globalid-0.3.7/lib/global_id/locator.rb:17:in `locate'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/arguments.rb:111:in `deserialize_global_id'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/arguments.rb:97:in `deserialize_argument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/arguments.rb:51:in `block in deserialize'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/arguments.rb:51:in `map'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/arguments.rb:51:in `deserialize'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/core.rb:128:in `deserialize_arguments'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/core.rb:118:in `deserialize_arguments_if_needed'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:32:in `perform_now'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:22:in `block in execute'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:126:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/railtie.rb:26:in `block (4 levels) in <class:Railtie>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:85:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:68:in `block in wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:81:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:67:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/railtie.rb:25:in `block (3 levels) in <class:Railtie>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `instance_exec'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `block in make_lambda'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:285:in `block in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:447:in `block in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:101:in `__run_callbacks__'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:750:in `_run_execute_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:90:in `run_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:20:in `execute'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/queue_adapters/sidekiq_adapter.rb:40:in `perform'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:199:in `execute_job'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:170:in `block (2 levels) in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/middleware/chain.rb:128:in `block in invoke'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/middleware/chain.rb:133:in `invoke'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:169:in `block in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:141:in `block (6 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/job_retry.rb:97:in `local'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:140:in `block (5 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/rails.rb:42:in `block in call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:85:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:68:in `block in wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:85:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:67:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/rails.rb:41:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:136:in `block (4 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:215:in `stats'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:131:in `block (3 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/job_logger.rb:7:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:130:in `block (2 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/job_retry.rb:72:in `global'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:129:in `block in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/logging.rb:44:in `with_context'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/logging.rb:38:in `with_job_hash_context'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:128:in `dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:168:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:85:in `process_one'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:73:in `run'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/util.rb:16:in `watchdog'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/util.rb:25:in `block in safe_thread'
2018-08-21T21:42:40.426Z 14838 TID-gmufprbcc SendMailsJob JID-1108c0f97b3b45c176d631d2 INFO: start
2018-08-21T21:42:40.458Z 14838 TID-gmufprbcc SendMailsJob JID-1108c0f97b3b45c176d631d2 INFO: fail: 0.032 sec
2018-08-21T21:42:40.458Z 14838 TID-gmufprbcc WARN: {"context":"Job raised exception","job":{"class":"ActiveJob::QueueAdapters::SidekiqAdapter::JobWrapper","wrapped":"SendMailsJob","queue":"default","args":[{"job_class":"SendMailsJob","job_id":"bcfeae89-a1a4-4e57-87f8-28a199e3280c","queue_name":"default","priority":null,"arguments":[{"_aj_globalid":"gid://book-store/Book/9"}],"locale":"en"}],"retry":true,"jid":"1108c0f97b3b45c176d631d2","created_at":1534882382.715988,"enqueued_at":1534887760.4249904,"error_message":"Error while trying to deserialize arguments: Couldn't find Book with 'id'=9","error_class":"ActiveJob::DeserializationError","failed_at":1534882382.7708082,"retry_count":8,"retried_at":1534887760.449246},"jobstr":"{\"class\":\"ActiveJob::QueueAdapters::SidekiqAdapter::JobWrapper\",\"wrapped\":\"SendMailsJob\",\"queue\":\"default\",\"args\":[{\"job_class\":\"SendMailsJob\",\"job_id\":\"bcfeae89-a1a4-4e57-87f8-28a199e3280c\",\"queue_name\":\"default\",\"priority\":null,\"arguments\":[{\"_aj_globalid\":\"gid://book-store/Book/9\"}],\"locale\":\"en\"}],\"retry\":true,\"jid\":\"1108c0f97b3b45c176d631d2\",\"created_at\":1534882382.715988,\"enqueued_at\":1534887760.4249904,\"error_message\":\"Error while trying to deserialize arguments: Couldn't find Book with 'id'=9\",\"error_class\":\"ActiveJob::DeserializationError\",\"failed_at\":1534882382.7708082,\"retry_count\":7,\"retried_at\":1534885171.0225506}"}
2018-08-21T21:42:40.458Z 14838 TID-gmufprbcc WARN: ActiveJob::DeserializationError: Error while trying to deserialize arguments: Couldn't find Book with 'id'=9
2018-08-21T21:42:40.458Z 14838 TID-gmufprbcc WARN: /home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activerecord-5.0.1/lib/active_record/relation/finder_methods.rb:353:in `raise_record_not_found_exception!'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activerecord-5.0.1/lib/active_record/relation/finder_methods.rb:479:in `find_one'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activerecord-5.0.1/lib/active_record/relation/finder_methods.rb:458:in `find_with_ids'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activerecord-5.0.1/lib/active_record/relation/finder_methods.rb:66:in `find'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activerecord-5.0.1/lib/active_record/querying.rb:3:in `find'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activerecord-5.0.1/lib/active_record/core.rb:151:in `find'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/globalid-0.3.7/lib/global_id/locator.rb:130:in `locate'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/globalid-0.3.7/lib/global_id/locator.rb:155:in `block in locate'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/globalid-0.3.7/lib/global_id/locator.rb:165:in `block in unscoped'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activerecord-5.0.1/lib/active_record/scoping/default.rb:35:in `block in unscoped'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activerecord-5.0.1/lib/active_record/relation.rb:351:in `scoping'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activerecord-5.0.1/lib/active_record/scoping/default.rb:35:in `unscoped'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/globalid-0.3.7/lib/global_id/locator.rb:165:in `unscoped'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/globalid-0.3.7/lib/global_id/locator.rb:155:in `locate'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/globalid-0.3.7/lib/global_id/locator.rb:17:in `locate'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/arguments.rb:111:in `deserialize_global_id'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/arguments.rb:97:in `deserialize_argument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/arguments.rb:51:in `block in deserialize'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/arguments.rb:51:in `map'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/arguments.rb:51:in `deserialize'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/core.rb:128:in `deserialize_arguments'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/core.rb:118:in `deserialize_arguments_if_needed'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:32:in `perform_now'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:22:in `block in execute'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:126:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/railtie.rb:26:in `block (4 levels) in <class:Railtie>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:85:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:68:in `block in wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:81:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:67:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/railtie.rb:25:in `block (3 levels) in <class:Railtie>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `instance_exec'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `block in make_lambda'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:285:in `block in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:447:in `block in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:101:in `__run_callbacks__'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:750:in `_run_execute_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:90:in `run_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:20:in `execute'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/queue_adapters/sidekiq_adapter.rb:40:in `perform'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:199:in `execute_job'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:170:in `block (2 levels) in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/middleware/chain.rb:128:in `block in invoke'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/middleware/chain.rb:133:in `invoke'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:169:in `block in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:141:in `block (6 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/job_retry.rb:97:in `local'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:140:in `block (5 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/rails.rb:42:in `block in call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:85:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:68:in `block in wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:85:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:67:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/rails.rb:41:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:136:in `block (4 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:215:in `stats'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:131:in `block (3 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/job_logger.rb:7:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:130:in `block (2 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/job_retry.rb:72:in `global'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:129:in `block in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/logging.rb:44:in `with_context'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/logging.rb:38:in `with_job_hash_context'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:128:in `dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:168:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:85:in `process_one'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:73:in `run'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/util.rb:16:in `watchdog'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/util.rb:25:in `block in safe_thread'
2018-08-21T21:49:22.831Z 14838 TID-gmufqbpc8 SendMailsJob JID-95236a612130af4240e0fdad INFO: start
2018-08-21T21:49:22.879Z 14838 TID-gmufqbpc8 SendMailsJob JID-95236a612130af4240e0fdad INFO: fail: 0.049 sec
2018-08-21T21:49:22.880Z 14838 TID-gmufqbpc8 WARN: {"context":"Job raised exception","job":{"class":"ActiveJob::QueueAdapters::SidekiqAdapter::JobWrapper","wrapped":"SendMailsJob","queue":"default","args":[{"job_class":"SendMailsJob","job_id":"d036e0a2-07d4-4c37-9b26-3c981cc64b80","queue_name":"default","priority":null,"arguments":[{"_aj_globalid":"gid://book-store/Book/11"}],"locale":"en"}],"retry":true,"jid":"95236a612130af4240e0fdad","created_at":1534885162.1222718,"enqueued_at":1534888162.8212347,"error_message":"undefined method `url' for nil:NilClass\nDid you mean?  URI","error_class":"NoMethodError","failed_at":1534885162.1875215,"retry_count":7,"retried_at":1534888162.8788302},"jobstr":"{\"class\":\"ActiveJob::QueueAdapters::SidekiqAdapter::JobWrapper\",\"wrapped\":\"SendMailsJob\",\"queue\":\"default\",\"args\":[{\"job_class\":\"SendMailsJob\",\"job_id\":\"d036e0a2-07d4-4c37-9b26-3c981cc64b80\",\"queue_name\":\"default\",\"priority\":null,\"arguments\":[{\"_aj_globalid\":\"gid://book-store/Book/11\"}],\"locale\":\"en\"}],\"retry\":true,\"jid\":\"95236a612130af4240e0fdad\",\"created_at\":1534885162.1222718,\"enqueued_at\":1534888162.8212347,\"error_message\":\"undefined method `url' for nil:NilClass\\nDid you mean?  URI\",\"error_class\":\"NoMethodError\",\"failed_at\":1534885162.1875215,\"retry_count\":6,\"retried_at\":1534886690.5696766}"}
2018-08-21T21:49:22.880Z 14838 TID-gmufqbpc8 WARN: NoMethodError: undefined method `url' for nil:NilClass
Did you mean?  URI
2018-08-21T21:49:22.880Z 14838 TID-gmufqbpc8 WARN: /home/deploy/www/app/mailers/book_mailer.rb:8:in `send_book'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionpack-5.0.1/lib/abstract_controller/base.rb:188:in `process_action'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionpack-5.0.1/lib/abstract_controller/callbacks.rb:20:in `block in process_action'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:97:in `__run_callbacks__'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:90:in `run_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionpack-5.0.1/lib/abstract_controller/callbacks.rb:19:in `process_action'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionpack-5.0.1/lib/abstract_controller/base.rb:126:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/rescuable.rb:23:in `block in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/rescuable.rb:15:in `handle_exceptions'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/rescuable.rb:22:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionview-5.0.1/lib/action_view/rendering.rb:30:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/base.rb:595:in `block in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications.rb:164:in `block in instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications/instrumenter.rb:21:in `instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications.rb:164:in `instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/base.rb:594:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/message_delivery.rb:105:in `block in processed_mailer'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/message_delivery.rb:104:in `tap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/message_delivery.rb:104:in `processed_mailer'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/message_delivery.rb:27:in `__getobj__'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/2.3.0/delegate.rb:80:in `method_missing'
/home/deploy/www/app/jobs/send_mails_job.rb:6:in `perform'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:34:in `block in perform_now'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:126:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/i18n-0.8.0/lib/i18n.rb:257:in `with_locale'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/translation.rb:7:in `block (2 levels) in <module:Translation>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `instance_exec'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `block in make_lambda'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:285:in `block in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:447:in `block in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:24:in `block (4 levels) in <module:Logging>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications.rb:164:in `block in instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications/instrumenter.rb:21:in `instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications.rb:164:in `instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:23:in `block (3 levels) in <module:Logging>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:44:in `block in tag_logger'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/tagged_logging.rb:69:in `block in tagged'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/tagged_logging.rb:26:in `tagged'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/tagged_logging.rb:69:in `tagged'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:44:in `tag_logger'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:20:in `block (2 levels) in <module:Logging>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `instance_exec'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `block in make_lambda'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:285:in `block in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:447:in `block in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:101:in `__run_callbacks__'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:750:in `_run_perform_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:90:in `run_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:33:in `perform_now'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:22:in `block in execute'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:126:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/railtie.rb:26:in `block (4 levels) in <class:Railtie>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:85:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:68:in `block in wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:81:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:67:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/railtie.rb:25:in `block (3 levels) in <class:Railtie>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `instance_exec'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `block in make_lambda'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:285:in `block in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:447:in `block in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:101:in `__run_callbacks__'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:750:in `_run_execute_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:90:in `run_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:20:in `execute'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/queue_adapters/sidekiq_adapter.rb:40:in `perform'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:199:in `execute_job'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:170:in `block (2 levels) in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/middleware/chain.rb:128:in `block in invoke'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/middleware/chain.rb:133:in `invoke'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:169:in `block in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:141:in `block (6 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/job_retry.rb:97:in `local'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:140:in `block (5 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/rails.rb:42:in `block in call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:85:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:68:in `block in wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:85:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:67:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/rails.rb:41:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:136:in `block (4 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:215:in `stats'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:131:in `block (3 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/job_logger.rb:7:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:130:in `block (2 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/job_retry.rb:72:in `global'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:129:in `block in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/logging.rb:44:in `with_context'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/logging.rb:38:in `with_job_hash_context'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:128:in `dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:168:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:85:in `process_one'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:73:in `run'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/util.rb:16:in `watchdog'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/util.rb:25:in `block in safe_thread'
2018-08-21T22:14:16.026Z 14838 TID-gmufmezjc SendMailsJob JID-2947776ded23e995a0d43472 INFO: start
2018-08-21T22:14:16.047Z 14838 TID-gmufmezjc SendMailsJob JID-2947776ded23e995a0d43472 INFO: fail: 0.021 sec
2018-08-21T22:14:16.048Z 14838 TID-gmufmezjc WARN: {"context":"Job raised exception","job":{"class":"ActiveJob::QueueAdapters::SidekiqAdapter::JobWrapper","wrapped":"SendMailsJob","queue":"default","args":[{"job_class":"SendMailsJob","job_id":"1e1bb720-fb43-4319-9945-0413f26d13b2","queue_name":"default","priority":null,"arguments":[{"_aj_globalid":"gid://book-store/Book/10"}],"locale":"en"}],"retry":true,"jid":"2947776ded23e995a0d43472","created_at":1534884394.6657887,"enqueued_at":1534889656.0244706,"error_message":"Error while trying to deserialize arguments: Couldn't find Book with 'id'=10","error_class":"ActiveJob::DeserializationError","failed_at":1534884394.782486,"retry_count":8,"retried_at":1534889656.0461693},"jobstr":"{\"class\":\"ActiveJob::QueueAdapters::SidekiqAdapter::JobWrapper\",\"wrapped\":\"SendMailsJob\",\"queue\":\"default\",\"args\":[{\"job_class\":\"SendMailsJob\",\"job_id\":\"1e1bb720-fb43-4319-9945-0413f26d13b2\",\"queue_name\":\"default\",\"priority\":null,\"arguments\":[{\"_aj_globalid\":\"gid://book-store/Book/10\"}],\"locale\":\"en\"}],\"retry\":true,\"jid\":\"2947776ded23e995a0d43472\",\"created_at\":1534884394.6657887,\"enqueued_at\":1534889656.0244706,\"error_message\":\"Error while trying to deserialize arguments: Couldn't find Book with 'id'=10\",\"error_class\":\"ActiveJob::DeserializationError\",\"failed_at\":1534884394.782486,\"retry_count\":7,\"retried_at\":1534887087.9303255}"}
2018-08-21T22:14:16.048Z 14838 TID-gmufmezjc WARN: ActiveJob::DeserializationError: Error while trying to deserialize arguments: Couldn't find Book with 'id'=10
2018-08-21T22:14:16.048Z 14838 TID-gmufmezjc WARN: /home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activerecord-5.0.1/lib/active_record/relation/finder_methods.rb:353:in `raise_record_not_found_exception!'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activerecord-5.0.1/lib/active_record/relation/finder_methods.rb:479:in `find_one'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activerecord-5.0.1/lib/active_record/relation/finder_methods.rb:458:in `find_with_ids'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activerecord-5.0.1/lib/active_record/relation/finder_methods.rb:66:in `find'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activerecord-5.0.1/lib/active_record/querying.rb:3:in `find'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activerecord-5.0.1/lib/active_record/core.rb:151:in `find'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/globalid-0.3.7/lib/global_id/locator.rb:130:in `locate'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/globalid-0.3.7/lib/global_id/locator.rb:155:in `block in locate'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/globalid-0.3.7/lib/global_id/locator.rb:165:in `block in unscoped'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activerecord-5.0.1/lib/active_record/scoping/default.rb:35:in `block in unscoped'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activerecord-5.0.1/lib/active_record/relation.rb:351:in `scoping'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activerecord-5.0.1/lib/active_record/scoping/default.rb:35:in `unscoped'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/globalid-0.3.7/lib/global_id/locator.rb:165:in `unscoped'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/globalid-0.3.7/lib/global_id/locator.rb:155:in `locate'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/globalid-0.3.7/lib/global_id/locator.rb:17:in `locate'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/arguments.rb:111:in `deserialize_global_id'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/arguments.rb:97:in `deserialize_argument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/arguments.rb:51:in `block in deserialize'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/arguments.rb:51:in `map'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/arguments.rb:51:in `deserialize'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/core.rb:128:in `deserialize_arguments'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/core.rb:118:in `deserialize_arguments_if_needed'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:32:in `perform_now'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:22:in `block in execute'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:126:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/railtie.rb:26:in `block (4 levels) in <class:Railtie>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:85:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:68:in `block in wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:81:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:67:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/railtie.rb:25:in `block (3 levels) in <class:Railtie>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `instance_exec'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `block in make_lambda'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:285:in `block in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:447:in `block in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:101:in `__run_callbacks__'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:750:in `_run_execute_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:90:in `run_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:20:in `execute'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/queue_adapters/sidekiq_adapter.rb:40:in `perform'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:199:in `execute_job'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:170:in `block (2 levels) in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/middleware/chain.rb:128:in `block in invoke'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/middleware/chain.rb:133:in `invoke'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:169:in `block in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:141:in `block (6 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/job_retry.rb:97:in `local'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:140:in `block (5 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/rails.rb:42:in `block in call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:85:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:68:in `block in wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:85:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:67:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/rails.rb:41:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:136:in `block (4 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:215:in `stats'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:131:in `block (3 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/job_logger.rb:7:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:130:in `block (2 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/job_retry.rb:72:in `global'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:129:in `block in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/logging.rb:44:in `with_context'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/logging.rb:38:in `with_job_hash_context'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:128:in `dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:168:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:85:in `process_one'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:73:in `run'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/util.rb:16:in `watchdog'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/util.rb:25:in `block in safe_thread'
2018-08-21T22:30:23.213Z 14838 TID-gmufmeihg SendMailsJob JID-95236a612130af4240e0fdad INFO: start
2018-08-21T22:30:23.268Z 14838 TID-gmufmeihg SendMailsJob JID-95236a612130af4240e0fdad INFO: fail: 0.055 sec
2018-08-21T22:30:23.269Z 14838 TID-gmufmeihg WARN: {"context":"Job raised exception","job":{"class":"ActiveJob::QueueAdapters::SidekiqAdapter::JobWrapper","wrapped":"SendMailsJob","queue":"default","args":[{"job_class":"SendMailsJob","job_id":"d036e0a2-07d4-4c37-9b26-3c981cc64b80","queue_name":"default","priority":null,"arguments":[{"_aj_globalid":"gid://book-store/Book/11"}],"locale":"en"}],"retry":true,"jid":"95236a612130af4240e0fdad","created_at":1534885162.1222718,"enqueued_at":1534890623.211978,"error_message":"undefined method `url' for nil:NilClass\nDid you mean?  URI","error_class":"NoMethodError","failed_at":1534885162.1875215,"retry_count":8,"retried_at":1534890623.2664797},"jobstr":"{\"class\":\"ActiveJob::QueueAdapters::SidekiqAdapter::JobWrapper\",\"wrapped\":\"SendMailsJob\",\"queue\":\"default\",\"args\":[{\"job_class\":\"SendMailsJob\",\"job_id\":\"d036e0a2-07d4-4c37-9b26-3c981cc64b80\",\"queue_name\":\"default\",\"priority\":null,\"arguments\":[{\"_aj_globalid\":\"gid://book-store/Book/11\"}],\"locale\":\"en\"}],\"retry\":true,\"jid\":\"95236a612130af4240e0fdad\",\"created_at\":1534885162.1222718,\"enqueued_at\":1534890623.211978,\"error_message\":\"undefined method `url' for nil:NilClass\\nDid you mean?  URI\",\"error_class\":\"NoMethodError\",\"failed_at\":1534885162.1875215,\"retry_count\":7,\"retried_at\":1534888162.8788302}"}
2018-08-21T22:30:23.269Z 14838 TID-gmufmeihg WARN: NoMethodError: undefined method `url' for nil:NilClass
Did you mean?  URI
2018-08-21T22:30:23.270Z 14838 TID-gmufmeihg WARN: /home/deploy/www/app/mailers/book_mailer.rb:8:in `send_book'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionpack-5.0.1/lib/abstract_controller/base.rb:188:in `process_action'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionpack-5.0.1/lib/abstract_controller/callbacks.rb:20:in `block in process_action'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:97:in `__run_callbacks__'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:90:in `run_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionpack-5.0.1/lib/abstract_controller/callbacks.rb:19:in `process_action'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionpack-5.0.1/lib/abstract_controller/base.rb:126:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/rescuable.rb:23:in `block in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/rescuable.rb:15:in `handle_exceptions'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/rescuable.rb:22:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionview-5.0.1/lib/action_view/rendering.rb:30:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/base.rb:595:in `block in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications.rb:164:in `block in instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications/instrumenter.rb:21:in `instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications.rb:164:in `instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/base.rb:594:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/message_delivery.rb:105:in `block in processed_mailer'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/message_delivery.rb:104:in `tap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/message_delivery.rb:104:in `processed_mailer'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/message_delivery.rb:27:in `__getobj__'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/2.3.0/delegate.rb:80:in `method_missing'
/home/deploy/www/app/jobs/send_mails_job.rb:6:in `perform'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:34:in `block in perform_now'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:126:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/i18n-0.8.0/lib/i18n.rb:257:in `with_locale'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/translation.rb:7:in `block (2 levels) in <module:Translation>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `instance_exec'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `block in make_lambda'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:285:in `block in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:447:in `block in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:24:in `block (4 levels) in <module:Logging>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications.rb:164:in `block in instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications/instrumenter.rb:21:in `instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications.rb:164:in `instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:23:in `block (3 levels) in <module:Logging>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:44:in `block in tag_logger'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/tagged_logging.rb:69:in `block in tagged'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/tagged_logging.rb:26:in `tagged'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/tagged_logging.rb:69:in `tagged'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:44:in `tag_logger'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:20:in `block (2 levels) in <module:Logging>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `instance_exec'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `block in make_lambda'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:285:in `block in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:447:in `block in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:101:in `__run_callbacks__'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:750:in `_run_perform_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:90:in `run_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:33:in `perform_now'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:22:in `block in execute'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:126:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/railtie.rb:26:in `block (4 levels) in <class:Railtie>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:85:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:68:in `block in wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:81:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:67:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/railtie.rb:25:in `block (3 levels) in <class:Railtie>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `instance_exec'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `block in make_lambda'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:285:in `block in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:447:in `block in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:101:in `__run_callbacks__'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:750:in `_run_execute_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:90:in `run_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:20:in `execute'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/queue_adapters/sidekiq_adapter.rb:40:in `perform'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:199:in `execute_job'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:170:in `block (2 levels) in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/middleware/chain.rb:128:in `block in invoke'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/middleware/chain.rb:133:in `invoke'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:169:in `block in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:141:in `block (6 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/job_retry.rb:97:in `local'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:140:in `block (5 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/rails.rb:42:in `block in call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:85:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:68:in `block in wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:85:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:67:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/rails.rb:41:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:136:in `block (4 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:215:in `stats'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:131:in `block (3 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/job_logger.rb:7:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:130:in `block (2 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/job_retry.rb:72:in `global'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:129:in `block in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/logging.rb:44:in `with_context'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/logging.rb:38:in `with_job_hash_context'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:128:in `dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:168:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:85:in `process_one'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:73:in `run'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/util.rb:16:in `watchdog'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/util.rb:25:in `block in safe_thread'
2018-08-21T22:53:45.831Z 14838 TID-gmuf2ppeg SendMailsJob JID-1108c0f97b3b45c176d631d2 INFO: start
2018-08-21T22:53:45.864Z 14838 TID-gmuf2ppeg SendMailsJob JID-1108c0f97b3b45c176d631d2 INFO: fail: 0.033 sec
2018-08-21T22:53:45.865Z 14838 TID-gmuf2ppeg WARN: {"context":"Job raised exception","job":{"class":"ActiveJob::QueueAdapters::SidekiqAdapter::JobWrapper","wrapped":"SendMailsJob","queue":"default","args":[{"job_class":"SendMailsJob","job_id":"bcfeae89-a1a4-4e57-87f8-28a199e3280c","queue_name":"default","priority":null,"arguments":[{"_aj_globalid":"gid://book-store/Book/9"}],"locale":"en"}],"retry":true,"jid":"1108c0f97b3b45c176d631d2","created_at":1534882382.715988,"enqueued_at":1534892025.830028,"error_message":"Error while trying to deserialize arguments: Couldn't find Book with 'id'=9","error_class":"ActiveJob::DeserializationError","failed_at":1534882382.7708082,"retry_count":9,"retried_at":1534892025.8637002},"jobstr":"{\"class\":\"ActiveJob::QueueAdapters::SidekiqAdapter::JobWrapper\",\"wrapped\":\"SendMailsJob\",\"queue\":\"default\",\"args\":[{\"job_class\":\"SendMailsJob\",\"job_id\":\"bcfeae89-a1a4-4e57-87f8-28a199e3280c\",\"queue_name\":\"default\",\"priority\":null,\"arguments\":[{\"_aj_globalid\":\"gid://book-store/Book/9\"}],\"locale\":\"en\"}],\"retry\":true,\"jid\":\"1108c0f97b3b45c176d631d2\",\"created_at\":1534882382.715988,\"enqueued_at\":1534892025.830028,\"error_message\":\"Error while trying to deserialize arguments: Couldn't find Book with 'id'=9\",\"error_class\":\"ActiveJob::DeserializationError\",\"failed_at\":1534882382.7708082,\"retry_count\":8,\"retried_at\":1534887760.449246}"}
2018-08-21T22:53:45.865Z 14838 TID-gmuf2ppeg WARN: ActiveJob::DeserializationError: Error while trying to deserialize arguments: Couldn't find Book with 'id'=9
2018-08-21T22:53:45.866Z 14838 TID-gmuf2ppeg WARN: /home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activerecord-5.0.1/lib/active_record/relation/finder_methods.rb:353:in `raise_record_not_found_exception!'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activerecord-5.0.1/lib/active_record/relation/finder_methods.rb:479:in `find_one'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activerecord-5.0.1/lib/active_record/relation/finder_methods.rb:458:in `find_with_ids'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activerecord-5.0.1/lib/active_record/relation/finder_methods.rb:66:in `find'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activerecord-5.0.1/lib/active_record/querying.rb:3:in `find'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activerecord-5.0.1/lib/active_record/core.rb:151:in `find'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/globalid-0.3.7/lib/global_id/locator.rb:130:in `locate'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/globalid-0.3.7/lib/global_id/locator.rb:155:in `block in locate'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/globalid-0.3.7/lib/global_id/locator.rb:165:in `block in unscoped'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activerecord-5.0.1/lib/active_record/scoping/default.rb:35:in `block in unscoped'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activerecord-5.0.1/lib/active_record/relation.rb:351:in `scoping'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activerecord-5.0.1/lib/active_record/scoping/default.rb:35:in `unscoped'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/globalid-0.3.7/lib/global_id/locator.rb:165:in `unscoped'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/globalid-0.3.7/lib/global_id/locator.rb:155:in `locate'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/globalid-0.3.7/lib/global_id/locator.rb:17:in `locate'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/arguments.rb:111:in `deserialize_global_id'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/arguments.rb:97:in `deserialize_argument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/arguments.rb:51:in `block in deserialize'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/arguments.rb:51:in `map'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/arguments.rb:51:in `deserialize'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/core.rb:128:in `deserialize_arguments'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/core.rb:118:in `deserialize_arguments_if_needed'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:32:in `perform_now'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:22:in `block in execute'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:126:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/railtie.rb:26:in `block (4 levels) in <class:Railtie>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:85:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:68:in `block in wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:81:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:67:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/railtie.rb:25:in `block (3 levels) in <class:Railtie>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `instance_exec'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `block in make_lambda'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:285:in `block in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:447:in `block in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:101:in `__run_callbacks__'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:750:in `_run_execute_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:90:in `run_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:20:in `execute'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/queue_adapters/sidekiq_adapter.rb:40:in `perform'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:199:in `execute_job'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:170:in `block (2 levels) in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/middleware/chain.rb:128:in `block in invoke'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/middleware/chain.rb:133:in `invoke'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:169:in `block in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:141:in `block (6 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/job_retry.rb:97:in `local'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:140:in `block (5 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/rails.rb:42:in `block in call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:85:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:68:in `block in wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:85:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:67:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/rails.rb:41:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:136:in `block (4 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:215:in `stats'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:131:in `block (3 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/job_logger.rb:7:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:130:in `block (2 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/job_retry.rb:72:in `global'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:129:in `block in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/logging.rb:44:in `with_context'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/logging.rb:38:in `with_job_hash_context'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:128:in `dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:168:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:85:in `process_one'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:73:in `run'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/util.rb:16:in `watchdog'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/util.rb:25:in `block in safe_thread'
2018-08-21T23:24:24.725Z 14838 TID-gmufc64zk SendMailsJob JID-2947776ded23e995a0d43472 INFO: start
2018-08-21T23:24:24.751Z 14838 TID-gmufc64zk SendMailsJob JID-2947776ded23e995a0d43472 INFO: fail: 0.026 sec
2018-08-21T23:24:24.753Z 14838 TID-gmufc64zk WARN: {"context":"Job raised exception","job":{"class":"ActiveJob::QueueAdapters::SidekiqAdapter::JobWrapper","wrapped":"SendMailsJob","queue":"default","args":[{"job_class":"SendMailsJob","job_id":"1e1bb720-fb43-4319-9945-0413f26d13b2","queue_name":"default","priority":null,"arguments":[{"_aj_globalid":"gid://book-store/Book/10"}],"locale":"en"}],"retry":true,"jid":"2947776ded23e995a0d43472","created_at":1534884394.6657887,"enqueued_at":1534893864.723287,"error_message":"Error while trying to deserialize arguments: Couldn't find Book with 'id'=10","error_class":"ActiveJob::DeserializationError","failed_at":1534884394.782486,"retry_count":9,"retried_at":1534893864.748789},"jobstr":"{\"class\":\"ActiveJob::QueueAdapters::SidekiqAdapter::JobWrapper\",\"wrapped\":\"SendMailsJob\",\"queue\":\"default\",\"args\":[{\"job_class\":\"SendMailsJob\",\"job_id\":\"1e1bb720-fb43-4319-9945-0413f26d13b2\",\"queue_name\":\"default\",\"priority\":null,\"arguments\":[{\"_aj_globalid\":\"gid://book-store/Book/10\"}],\"locale\":\"en\"}],\"retry\":true,\"jid\":\"2947776ded23e995a0d43472\",\"created_at\":1534884394.6657887,\"enqueued_at\":1534893864.723287,\"error_message\":\"Error while trying to deserialize arguments: Couldn't find Book with 'id'=10\",\"error_class\":\"ActiveJob::DeserializationError\",\"failed_at\":1534884394.782486,\"retry_count\":8,\"retried_at\":1534889656.0461693}"}
2018-08-21T23:24:24.757Z 14838 TID-gmufc64zk WARN: ActiveJob::DeserializationError: Error while trying to deserialize arguments: Couldn't find Book with 'id'=10
2018-08-21T23:24:24.757Z 14838 TID-gmufc64zk WARN: /home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activerecord-5.0.1/lib/active_record/relation/finder_methods.rb:353:in `raise_record_not_found_exception!'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activerecord-5.0.1/lib/active_record/relation/finder_methods.rb:479:in `find_one'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activerecord-5.0.1/lib/active_record/relation/finder_methods.rb:458:in `find_with_ids'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activerecord-5.0.1/lib/active_record/relation/finder_methods.rb:66:in `find'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activerecord-5.0.1/lib/active_record/querying.rb:3:in `find'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activerecord-5.0.1/lib/active_record/core.rb:151:in `find'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/globalid-0.3.7/lib/global_id/locator.rb:130:in `locate'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/globalid-0.3.7/lib/global_id/locator.rb:155:in `block in locate'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/globalid-0.3.7/lib/global_id/locator.rb:165:in `block in unscoped'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activerecord-5.0.1/lib/active_record/scoping/default.rb:35:in `block in unscoped'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activerecord-5.0.1/lib/active_record/relation.rb:351:in `scoping'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activerecord-5.0.1/lib/active_record/scoping/default.rb:35:in `unscoped'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/globalid-0.3.7/lib/global_id/locator.rb:165:in `unscoped'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/globalid-0.3.7/lib/global_id/locator.rb:155:in `locate'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/globalid-0.3.7/lib/global_id/locator.rb:17:in `locate'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/arguments.rb:111:in `deserialize_global_id'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/arguments.rb:97:in `deserialize_argument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/arguments.rb:51:in `block in deserialize'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/arguments.rb:51:in `map'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/arguments.rb:51:in `deserialize'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/core.rb:128:in `deserialize_arguments'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/core.rb:118:in `deserialize_arguments_if_needed'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:32:in `perform_now'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:22:in `block in execute'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:126:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/railtie.rb:26:in `block (4 levels) in <class:Railtie>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:85:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:68:in `block in wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:81:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:67:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/railtie.rb:25:in `block (3 levels) in <class:Railtie>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `instance_exec'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `block in make_lambda'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:285:in `block in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:447:in `block in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:101:in `__run_callbacks__'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:750:in `_run_execute_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:90:in `run_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:20:in `execute'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/queue_adapters/sidekiq_adapter.rb:40:in `perform'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:199:in `execute_job'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:170:in `block (2 levels) in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/middleware/chain.rb:128:in `block in invoke'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/middleware/chain.rb:133:in `invoke'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:169:in `block in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:141:in `block (6 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/job_retry.rb:97:in `local'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:140:in `block (5 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/rails.rb:42:in `block in call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:85:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:68:in `block in wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:85:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:67:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/rails.rb:41:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:136:in `block (4 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:215:in `stats'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:131:in `block (3 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/job_logger.rb:7:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:130:in `block (2 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/job_retry.rb:72:in `global'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:129:in `block in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/logging.rb:44:in `with_context'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/logging.rb:38:in `with_job_hash_context'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:128:in `dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:168:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:85:in `process_one'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:73:in `run'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/util.rb:16:in `watchdog'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/util.rb:25:in `block in safe_thread'
2018-08-21T23:43:09.314Z 14838 TID-gmufcmrro SendMailsJob JID-95236a612130af4240e0fdad INFO: start
2018-08-21T23:43:09.359Z 14838 TID-gmufcmrro SendMailsJob JID-95236a612130af4240e0fdad INFO: fail: 0.045 sec
2018-08-21T23:43:09.362Z 14838 TID-gmufcmrro WARN: {"context":"Job raised exception","job":{"class":"ActiveJob::QueueAdapters::SidekiqAdapter::JobWrapper","wrapped":"SendMailsJob","queue":"default","args":[{"job_class":"SendMailsJob","job_id":"d036e0a2-07d4-4c37-9b26-3c981cc64b80","queue_name":"default","priority":null,"arguments":[{"_aj_globalid":"gid://book-store/Book/11"}],"locale":"en"}],"retry":true,"jid":"95236a612130af4240e0fdad","created_at":1534885162.1222718,"enqueued_at":1534894989.3040042,"error_message":"undefined method `url' for nil:NilClass\nDid you mean?  URI","error_class":"NoMethodError","failed_at":1534885162.1875215,"retry_count":9,"retried_at":1534894989.3541355},"jobstr":"{\"class\":\"ActiveJob::QueueAdapters::SidekiqAdapter::JobWrapper\",\"wrapped\":\"SendMailsJob\",\"queue\":\"default\",\"args\":[{\"job_class\":\"SendMailsJob\",\"job_id\":\"d036e0a2-07d4-4c37-9b26-3c981cc64b80\",\"queue_name\":\"default\",\"priority\":null,\"arguments\":[{\"_aj_globalid\":\"gid://book-store/Book/11\"}],\"locale\":\"en\"}],\"retry\":true,\"jid\":\"95236a612130af4240e0fdad\",\"created_at\":1534885162.1222718,\"enqueued_at\":1534894989.3040042,\"error_message\":\"undefined method `url' for nil:NilClass\\nDid you mean?  URI\",\"error_class\":\"NoMethodError\",\"failed_at\":1534885162.1875215,\"retry_count\":8,\"retried_at\":1534890623.2664797}"}
2018-08-21T23:43:09.362Z 14838 TID-gmufcmrro WARN: NoMethodError: undefined method `url' for nil:NilClass
Did you mean?  URI
2018-08-21T23:43:09.363Z 14838 TID-gmufcmrro WARN: /home/deploy/www/app/mailers/book_mailer.rb:8:in `send_book'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionpack-5.0.1/lib/abstract_controller/base.rb:188:in `process_action'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionpack-5.0.1/lib/abstract_controller/callbacks.rb:20:in `block in process_action'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:97:in `__run_callbacks__'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:90:in `run_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionpack-5.0.1/lib/abstract_controller/callbacks.rb:19:in `process_action'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionpack-5.0.1/lib/abstract_controller/base.rb:126:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/rescuable.rb:23:in `block in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/rescuable.rb:15:in `handle_exceptions'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/rescuable.rb:22:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionview-5.0.1/lib/action_view/rendering.rb:30:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/base.rb:595:in `block in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications.rb:164:in `block in instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications/instrumenter.rb:21:in `instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications.rb:164:in `instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/base.rb:594:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/message_delivery.rb:105:in `block in processed_mailer'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/message_delivery.rb:104:in `tap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/message_delivery.rb:104:in `processed_mailer'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/message_delivery.rb:27:in `__getobj__'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/2.3.0/delegate.rb:80:in `method_missing'
/home/deploy/www/app/jobs/send_mails_job.rb:6:in `perform'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:34:in `block in perform_now'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:126:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/i18n-0.8.0/lib/i18n.rb:257:in `with_locale'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/translation.rb:7:in `block (2 levels) in <module:Translation>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `instance_exec'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `block in make_lambda'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:285:in `block in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:447:in `block in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:24:in `block (4 levels) in <module:Logging>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications.rb:164:in `block in instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications/instrumenter.rb:21:in `instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications.rb:164:in `instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:23:in `block (3 levels) in <module:Logging>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:44:in `block in tag_logger'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/tagged_logging.rb:69:in `block in tagged'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/tagged_logging.rb:26:in `tagged'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/tagged_logging.rb:69:in `tagged'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:44:in `tag_logger'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:20:in `block (2 levels) in <module:Logging>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `instance_exec'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `block in make_lambda'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:285:in `block in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:447:in `block in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:101:in `__run_callbacks__'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:750:in `_run_perform_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:90:in `run_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:33:in `perform_now'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:22:in `block in execute'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:126:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/railtie.rb:26:in `block (4 levels) in <class:Railtie>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:85:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:68:in `block in wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:81:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:67:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/railtie.rb:25:in `block (3 levels) in <class:Railtie>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `instance_exec'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `block in make_lambda'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:285:in `block in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:447:in `block in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:101:in `__run_callbacks__'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:750:in `_run_execute_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:90:in `run_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:20:in `execute'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/queue_adapters/sidekiq_adapter.rb:40:in `perform'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:199:in `execute_job'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:170:in `block (2 levels) in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/middleware/chain.rb:128:in `block in invoke'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/middleware/chain.rb:133:in `invoke'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:169:in `block in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:141:in `block (6 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/job_retry.rb:97:in `local'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:140:in `block (5 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/rails.rb:42:in `block in call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:85:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:68:in `block in wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:85:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:67:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/rails.rb:41:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:136:in `block (4 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:215:in `stats'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:131:in `block (3 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/job_logger.rb:7:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:130:in `block (2 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/job_retry.rb:72:in `global'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:129:in `block in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/logging.rb:44:in `with_context'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/logging.rb:38:in `with_job_hash_context'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:128:in `dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:168:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:85:in `process_one'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:73:in `run'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/util.rb:16:in `watchdog'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/util.rb:25:in `block in safe_thread'
2018-08-22T00:33:12.901Z 14838 TID-gmuflic74 SendMailsJob JID-3b3a9201cc692b9b207c584f INFO: start
2018-08-22T00:33:12.955Z 14838 TID-gmuflic74 SendMailsJob JID-3b3a9201cc692b9b207c584f INFO: fail: 0.054 sec
2018-08-22T00:33:12.961Z 14838 TID-gmuflic74 WARN: {"context":"Job raised exception","job":{"class":"ActiveJob::QueueAdapters::SidekiqAdapter::JobWrapper","wrapped":"SendMailsJob","queue":"default","args":[{"job_class":"SendMailsJob","job_id":"92f57ef4-74f2-42ed-908d-aa42c584e98c","queue_name":"default","priority":null,"arguments":[{"_aj_globalid":"gid://book-store/Book/8"}],"locale":"en"}],"retry":true,"jid":"3b3a9201cc692b9b207c584f","created_at":1534856265.6621265,"enqueued_at":1534897992.8950775,"error_message":"undefined method `url' for nil:NilClass\nDid you mean?  URI","error_class":"NoMethodError","failed_at":1534856266.2488687,"retry_count":12,"retried_at":1534897992.9536767},"jobstr":"{\"class\":\"ActiveJob::QueueAdapters::SidekiqAdapter::JobWrapper\",\"wrapped\":\"SendMailsJob\",\"queue\":\"default\",\"args\":[{\"job_class\":\"SendMailsJob\",\"job_id\":\"92f57ef4-74f2-42ed-908d-aa42c584e98c\",\"queue_name\":\"default\",\"priority\":null,\"arguments\":[{\"_aj_globalid\":\"gid://book-store/Book/8\"}],\"locale\":\"en\"}],\"retry\":true,\"jid\":\"3b3a9201cc692b9b207c584f\",\"created_at\":1534856265.6621265,\"enqueued_at\":1534897992.8950775,\"error_message\":\"undefined method `url' for nil:NilClass\\nDid you mean?  URI\",\"error_class\":\"NoMethodError\",\"failed_at\":1534856266.2488687,\"retry_count\":11,\"retried_at\":1534882983.9213462}"}
2018-08-22T00:33:12.962Z 14838 TID-gmuflic74 WARN: NoMethodError: undefined method `url' for nil:NilClass
Did you mean?  URI
2018-08-22T00:33:12.962Z 14838 TID-gmuflic74 WARN: /home/deploy/www/app/mailers/book_mailer.rb:8:in `send_book'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionpack-5.0.1/lib/abstract_controller/base.rb:188:in `process_action'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionpack-5.0.1/lib/abstract_controller/callbacks.rb:20:in `block in process_action'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:97:in `__run_callbacks__'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:90:in `run_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionpack-5.0.1/lib/abstract_controller/callbacks.rb:19:in `process_action'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionpack-5.0.1/lib/abstract_controller/base.rb:126:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/rescuable.rb:23:in `block in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/rescuable.rb:15:in `handle_exceptions'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/rescuable.rb:22:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionview-5.0.1/lib/action_view/rendering.rb:30:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/base.rb:595:in `block in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications.rb:164:in `block in instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications/instrumenter.rb:21:in `instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications.rb:164:in `instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/base.rb:594:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/message_delivery.rb:105:in `block in processed_mailer'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/message_delivery.rb:104:in `tap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/message_delivery.rb:104:in `processed_mailer'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/message_delivery.rb:27:in `__getobj__'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/2.3.0/delegate.rb:80:in `method_missing'
/home/deploy/www/app/jobs/send_mails_job.rb:6:in `perform'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:34:in `block in perform_now'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:126:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/i18n-0.8.0/lib/i18n.rb:257:in `with_locale'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/translation.rb:7:in `block (2 levels) in <module:Translation>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `instance_exec'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `block in make_lambda'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:285:in `block in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:447:in `block in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:24:in `block (4 levels) in <module:Logging>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications.rb:164:in `block in instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications/instrumenter.rb:21:in `instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications.rb:164:in `instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:23:in `block (3 levels) in <module:Logging>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:44:in `block in tag_logger'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/tagged_logging.rb:69:in `block in tagged'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/tagged_logging.rb:26:in `tagged'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/tagged_logging.rb:69:in `tagged'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:44:in `tag_logger'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:20:in `block (2 levels) in <module:Logging>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `instance_exec'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `block in make_lambda'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:285:in `block in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:447:in `block in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:101:in `__run_callbacks__'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:750:in `_run_perform_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:90:in `run_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:33:in `perform_now'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:22:in `block in execute'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:126:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/railtie.rb:26:in `block (4 levels) in <class:Railtie>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:85:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:68:in `block in wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:81:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:67:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/railtie.rb:25:in `block (3 levels) in <class:Railtie>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `instance_exec'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `block in make_lambda'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:285:in `block in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:447:in `block in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:101:in `__run_callbacks__'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:750:in `_run_execute_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:90:in `run_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:20:in `execute'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/queue_adapters/sidekiq_adapter.rb:40:in `perform'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:199:in `execute_job'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:170:in `block (2 levels) in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/middleware/chain.rb:128:in `block in invoke'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/middleware/chain.rb:133:in `invoke'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:169:in `block in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:141:in `block (6 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/job_retry.rb:97:in `local'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:140:in `block (5 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/rails.rb:42:in `block in call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:85:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:68:in `block in wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:85:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:67:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/rails.rb:41:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:136:in `block (4 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:215:in `stats'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:131:in `block (3 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/job_logger.rb:7:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:130:in `block (2 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/job_retry.rb:72:in `global'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:129:in `block in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/logging.rb:44:in `with_context'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/logging.rb:38:in `with_job_hash_context'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:128:in `dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:168:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:85:in `process_one'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:73:in `run'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/util.rb:16:in `watchdog'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/util.rb:25:in `block in safe_thread'
2018-08-22T00:46:28.486Z 14838 TID-gmufp8uk4 SendMailsJob JID-1108c0f97b3b45c176d631d2 INFO: start
2018-08-22T00:46:28.519Z 14838 TID-gmufp8uk4 SendMailsJob JID-1108c0f97b3b45c176d631d2 INFO: fail: 0.033 sec
2018-08-22T00:46:28.519Z 14838 TID-gmufp8uk4 WARN: {"context":"Job raised exception","job":{"class":"ActiveJob::QueueAdapters::SidekiqAdapter::JobWrapper","wrapped":"SendMailsJob","queue":"default","args":[{"job_class":"SendMailsJob","job_id":"bcfeae89-a1a4-4e57-87f8-28a199e3280c","queue_name":"default","priority":null,"arguments":[{"_aj_globalid":"gid://book-store/Book/9"}],"locale":"en"}],"retry":true,"jid":"1108c0f97b3b45c176d631d2","created_at":1534882382.715988,"enqueued_at":1534898788.478524,"error_message":"Error while trying to deserialize arguments: Couldn't find Book with 'id'=9","error_class":"ActiveJob::DeserializationError","failed_at":1534882382.7708082,"retry_count":10,"retried_at":1534898788.5149748},"jobstr":"{\"class\":\"ActiveJob::QueueAdapters::SidekiqAdapter::JobWrapper\",\"wrapped\":\"SendMailsJob\",\"queue\":\"default\",\"args\":[{\"job_class\":\"SendMailsJob\",\"job_id\":\"bcfeae89-a1a4-4e57-87f8-28a199e3280c\",\"queue_name\":\"default\",\"priority\":null,\"arguments\":[{\"_aj_globalid\":\"gid://book-store/Book/9\"}],\"locale\":\"en\"}],\"retry\":true,\"jid\":\"1108c0f97b3b45c176d631d2\",\"created_at\":1534882382.715988,\"enqueued_at\":1534898788.478524,\"error_message\":\"Error while trying to deserialize arguments: Couldn't find Book with 'id'=9\",\"error_class\":\"ActiveJob::DeserializationError\",\"failed_at\":1534882382.7708082,\"retry_count\":9,\"retried_at\":1534892025.8637002}"}
2018-08-22T00:46:28.519Z 14838 TID-gmufp8uk4 WARN: ActiveJob::DeserializationError: Error while trying to deserialize arguments: Couldn't find Book with 'id'=9
2018-08-22T00:46:28.519Z 14838 TID-gmufp8uk4 WARN: /home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activerecord-5.0.1/lib/active_record/relation/finder_methods.rb:353:in `raise_record_not_found_exception!'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activerecord-5.0.1/lib/active_record/relation/finder_methods.rb:479:in `find_one'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activerecord-5.0.1/lib/active_record/relation/finder_methods.rb:458:in `find_with_ids'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activerecord-5.0.1/lib/active_record/relation/finder_methods.rb:66:in `find'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activerecord-5.0.1/lib/active_record/querying.rb:3:in `find'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activerecord-5.0.1/lib/active_record/core.rb:151:in `find'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/globalid-0.3.7/lib/global_id/locator.rb:130:in `locate'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/globalid-0.3.7/lib/global_id/locator.rb:155:in `block in locate'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/globalid-0.3.7/lib/global_id/locator.rb:165:in `block in unscoped'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activerecord-5.0.1/lib/active_record/scoping/default.rb:35:in `block in unscoped'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activerecord-5.0.1/lib/active_record/relation.rb:351:in `scoping'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activerecord-5.0.1/lib/active_record/scoping/default.rb:35:in `unscoped'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/globalid-0.3.7/lib/global_id/locator.rb:165:in `unscoped'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/globalid-0.3.7/lib/global_id/locator.rb:155:in `locate'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/globalid-0.3.7/lib/global_id/locator.rb:17:in `locate'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/arguments.rb:111:in `deserialize_global_id'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/arguments.rb:97:in `deserialize_argument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/arguments.rb:51:in `block in deserialize'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/arguments.rb:51:in `map'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/arguments.rb:51:in `deserialize'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/core.rb:128:in `deserialize_arguments'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/core.rb:118:in `deserialize_arguments_if_needed'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:32:in `perform_now'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:22:in `block in execute'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:126:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/railtie.rb:26:in `block (4 levels) in <class:Railtie>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:85:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:68:in `block in wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:81:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:67:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/railtie.rb:25:in `block (3 levels) in <class:Railtie>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `instance_exec'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `block in make_lambda'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:285:in `block in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:447:in `block in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:101:in `__run_callbacks__'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:750:in `_run_execute_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:90:in `run_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:20:in `execute'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/queue_adapters/sidekiq_adapter.rb:40:in `perform'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:199:in `execute_job'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:170:in `block (2 levels) in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/middleware/chain.rb:128:in `block in invoke'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/middleware/chain.rb:133:in `invoke'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:169:in `block in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:141:in `block (6 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/job_retry.rb:97:in `local'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:140:in `block (5 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/rails.rb:42:in `block in call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:85:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:68:in `block in wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:85:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:67:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/rails.rb:41:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:136:in `block (4 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:215:in `stats'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:131:in `block (3 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/job_logger.rb:7:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:130:in `block (2 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/job_retry.rb:72:in `global'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:129:in `block in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/logging.rb:44:in `with_context'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/logging.rb:38:in `with_job_hash_context'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:128:in `dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:168:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:85:in `process_one'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:73:in `run'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/util.rb:16:in `watchdog'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/util.rb:25:in `block in safe_thread'
2018-08-22T01:17:12.765Z 14838 TID-gmufpgswg SendMailsJob JID-2947776ded23e995a0d43472 INFO: start
2018-08-22T01:17:12.786Z 14838 TID-gmufpgswg SendMailsJob JID-2947776ded23e995a0d43472 INFO: fail: 0.021 sec
2018-08-22T01:17:12.786Z 14838 TID-gmufpgswg WARN: {"context":"Job raised exception","job":{"class":"ActiveJob::QueueAdapters::SidekiqAdapter::JobWrapper","wrapped":"SendMailsJob","queue":"default","args":[{"job_class":"SendMailsJob","job_id":"1e1bb720-fb43-4319-9945-0413f26d13b2","queue_name":"default","priority":null,"arguments":[{"_aj_globalid":"gid://book-store/Book/10"}],"locale":"en"}],"retry":true,"jid":"2947776ded23e995a0d43472","created_at":1534884394.6657887,"enqueued_at":1534900632.7638423,"error_message":"Error while trying to deserialize arguments: Couldn't find Book with 'id'=10","error_class":"ActiveJob::DeserializationError","failed_at":1534884394.782486,"retry_count":10,"retried_at":1534900632.7860138},"jobstr":"{\"class\":\"ActiveJob::QueueAdapters::SidekiqAdapter::JobWrapper\",\"wrapped\":\"SendMailsJob\",\"queue\":\"default\",\"args\":[{\"job_class\":\"SendMailsJob\",\"job_id\":\"1e1bb720-fb43-4319-9945-0413f26d13b2\",\"queue_name\":\"default\",\"priority\":null,\"arguments\":[{\"_aj_globalid\":\"gid://book-store/Book/10\"}],\"locale\":\"en\"}],\"retry\":true,\"jid\":\"2947776ded23e995a0d43472\",\"created_at\":1534884394.6657887,\"enqueued_at\":1534900632.7638423,\"error_message\":\"Error while trying to deserialize arguments: Couldn't find Book with 'id'=10\",\"error_class\":\"ActiveJob::DeserializationError\",\"failed_at\":1534884394.782486,\"retry_count\":9,\"retried_at\":1534893864.748789}"}
2018-08-22T01:17:12.787Z 14838 TID-gmufpgswg WARN: ActiveJob::DeserializationError: Error while trying to deserialize arguments: Couldn't find Book with 'id'=10
2018-08-22T01:17:12.787Z 14838 TID-gmufpgswg WARN: /home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activerecord-5.0.1/lib/active_record/relation/finder_methods.rb:353:in `raise_record_not_found_exception!'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activerecord-5.0.1/lib/active_record/relation/finder_methods.rb:479:in `find_one'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activerecord-5.0.1/lib/active_record/relation/finder_methods.rb:458:in `find_with_ids'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activerecord-5.0.1/lib/active_record/relation/finder_methods.rb:66:in `find'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activerecord-5.0.1/lib/active_record/querying.rb:3:in `find'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activerecord-5.0.1/lib/active_record/core.rb:151:in `find'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/globalid-0.3.7/lib/global_id/locator.rb:130:in `locate'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/globalid-0.3.7/lib/global_id/locator.rb:155:in `block in locate'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/globalid-0.3.7/lib/global_id/locator.rb:165:in `block in unscoped'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activerecord-5.0.1/lib/active_record/scoping/default.rb:35:in `block in unscoped'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activerecord-5.0.1/lib/active_record/relation.rb:351:in `scoping'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activerecord-5.0.1/lib/active_record/scoping/default.rb:35:in `unscoped'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/globalid-0.3.7/lib/global_id/locator.rb:165:in `unscoped'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/globalid-0.3.7/lib/global_id/locator.rb:155:in `locate'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/globalid-0.3.7/lib/global_id/locator.rb:17:in `locate'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/arguments.rb:111:in `deserialize_global_id'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/arguments.rb:97:in `deserialize_argument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/arguments.rb:51:in `block in deserialize'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/arguments.rb:51:in `map'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/arguments.rb:51:in `deserialize'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/core.rb:128:in `deserialize_arguments'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/core.rb:118:in `deserialize_arguments_if_needed'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:32:in `perform_now'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:22:in `block in execute'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:126:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/railtie.rb:26:in `block (4 levels) in <class:Railtie>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:85:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:68:in `block in wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:81:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:67:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/railtie.rb:25:in `block (3 levels) in <class:Railtie>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `instance_exec'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `block in make_lambda'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:285:in `block in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:447:in `block in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:101:in `__run_callbacks__'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:750:in `_run_execute_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:90:in `run_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:20:in `execute'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/queue_adapters/sidekiq_adapter.rb:40:in `perform'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:199:in `execute_job'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:170:in `block (2 levels) in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/middleware/chain.rb:128:in `block in invoke'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/middleware/chain.rb:133:in `invoke'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:169:in `block in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:141:in `block (6 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/job_retry.rb:97:in `local'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:140:in `block (5 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/rails.rb:42:in `block in call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:85:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:68:in `block in wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:85:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:67:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/rails.rb:41:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:136:in `block (4 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:215:in `stats'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:131:in `block (3 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/job_logger.rb:7:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:130:in `block (2 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/job_retry.rb:72:in `global'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:129:in `block in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/logging.rb:44:in `with_context'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/logging.rb:38:in `with_job_hash_context'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:128:in `dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:168:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:85:in `process_one'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:73:in `run'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/util.rb:16:in `watchdog'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/util.rb:25:in `block in safe_thread'
2018-08-22T01:33:43.651Z 14838 TID-gmufm3lec SendMailsJob JID-95236a612130af4240e0fdad INFO: start
2018-08-22T01:33:43.705Z 14838 TID-gmufm3lec SendMailsJob JID-95236a612130af4240e0fdad INFO: fail: 0.054 sec
2018-08-22T01:33:43.705Z 14838 TID-gmufm3lec WARN: {"context":"Job raised exception","job":{"class":"ActiveJob::QueueAdapters::SidekiqAdapter::JobWrapper","wrapped":"SendMailsJob","queue":"default","args":[{"job_class":"SendMailsJob","job_id":"d036e0a2-07d4-4c37-9b26-3c981cc64b80","queue_name":"default","priority":null,"arguments":[{"_aj_globalid":"gid://book-store/Book/11"}],"locale":"en"}],"retry":true,"jid":"95236a612130af4240e0fdad","created_at":1534885162.1222718,"enqueued_at":1534901623.6499188,"error_message":"undefined method `url' for nil:NilClass\nDid you mean?  URI","error_class":"NoMethodError","failed_at":1534885162.1875215,"retry_count":10,"retried_at":1534901623.6967158},"jobstr":"{\"class\":\"ActiveJob::QueueAdapters::SidekiqAdapter::JobWrapper\",\"wrapped\":\"SendMailsJob\",\"queue\":\"default\",\"args\":[{\"job_class\":\"SendMailsJob\",\"job_id\":\"d036e0a2-07d4-4c37-9b26-3c981cc64b80\",\"queue_name\":\"default\",\"priority\":null,\"arguments\":[{\"_aj_globalid\":\"gid://book-store/Book/11\"}],\"locale\":\"en\"}],\"retry\":true,\"jid\":\"95236a612130af4240e0fdad\",\"created_at\":1534885162.1222718,\"enqueued_at\":1534901623.6499188,\"error_message\":\"undefined method `url' for nil:NilClass\\nDid you mean?  URI\",\"error_class\":\"NoMethodError\",\"failed_at\":1534885162.1875215,\"retry_count\":9,\"retried_at\":1534894989.3541355}"}
2018-08-22T01:33:43.705Z 14838 TID-gmufm3lec WARN: NoMethodError: undefined method `url' for nil:NilClass
Did you mean?  URI
2018-08-22T01:33:43.706Z 14838 TID-gmufm3lec WARN: /home/deploy/www/app/mailers/book_mailer.rb:8:in `send_book'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionpack-5.0.1/lib/abstract_controller/base.rb:188:in `process_action'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionpack-5.0.1/lib/abstract_controller/callbacks.rb:20:in `block in process_action'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:97:in `__run_callbacks__'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:90:in `run_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionpack-5.0.1/lib/abstract_controller/callbacks.rb:19:in `process_action'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionpack-5.0.1/lib/abstract_controller/base.rb:126:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/rescuable.rb:23:in `block in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/rescuable.rb:15:in `handle_exceptions'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/rescuable.rb:22:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionview-5.0.1/lib/action_view/rendering.rb:30:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/base.rb:595:in `block in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications.rb:164:in `block in instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications/instrumenter.rb:21:in `instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications.rb:164:in `instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/base.rb:594:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/message_delivery.rb:105:in `block in processed_mailer'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/message_delivery.rb:104:in `tap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/message_delivery.rb:104:in `processed_mailer'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/message_delivery.rb:27:in `__getobj__'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/2.3.0/delegate.rb:80:in `method_missing'
/home/deploy/www/app/jobs/send_mails_job.rb:6:in `perform'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:34:in `block in perform_now'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:126:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/i18n-0.8.0/lib/i18n.rb:257:in `with_locale'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/translation.rb:7:in `block (2 levels) in <module:Translation>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `instance_exec'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `block in make_lambda'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:285:in `block in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:447:in `block in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:24:in `block (4 levels) in <module:Logging>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications.rb:164:in `block in instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications/instrumenter.rb:21:in `instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications.rb:164:in `instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:23:in `block (3 levels) in <module:Logging>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:44:in `block in tag_logger'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/tagged_logging.rb:69:in `block in tagged'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/tagged_logging.rb:26:in `tagged'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/tagged_logging.rb:69:in `tagged'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:44:in `tag_logger'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:20:in `block (2 levels) in <module:Logging>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `instance_exec'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `block in make_lambda'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:285:in `block in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:447:in `block in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:101:in `__run_callbacks__'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:750:in `_run_perform_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:90:in `run_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:33:in `perform_now'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:22:in `block in execute'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:126:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/railtie.rb:26:in `block (4 levels) in <class:Railtie>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:85:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:68:in `block in wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:81:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:67:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/railtie.rb:25:in `block (3 levels) in <class:Railtie>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `instance_exec'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `block in make_lambda'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:285:in `block in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:447:in `block in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:101:in `__run_callbacks__'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:750:in `_run_execute_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:90:in `run_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:20:in `execute'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/queue_adapters/sidekiq_adapter.rb:40:in `perform'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:199:in `execute_job'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:170:in `block (2 levels) in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/middleware/chain.rb:128:in `block in invoke'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/middleware/chain.rb:133:in `invoke'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:169:in `block in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:141:in `block (6 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/job_retry.rb:97:in `local'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:140:in `block (5 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/rails.rb:42:in `block in call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:85:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:68:in `block in wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:85:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:67:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/rails.rb:41:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:136:in `block (4 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:215:in `stats'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:131:in `block (3 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/job_logger.rb:7:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:130:in `block (2 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/job_retry.rb:72:in `global'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:129:in `block in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/logging.rb:44:in `with_context'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/logging.rb:38:in `with_job_hash_context'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:128:in `dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:168:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:85:in `process_one'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:73:in `run'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/util.rb:16:in `watchdog'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/util.rb:25:in `block in safe_thread'
2018-08-22T03:34:57.383Z 14838 TID-gmufdqzu8 SendMailsJob JID-1108c0f97b3b45c176d631d2 INFO: start
2018-08-22T03:34:57.404Z 14838 TID-gmufdqzu8 SendMailsJob JID-1108c0f97b3b45c176d631d2 INFO: fail: 0.021 sec
2018-08-22T03:34:57.405Z 14838 TID-gmufdqzu8 WARN: {"context":"Job raised exception","job":{"class":"ActiveJob::QueueAdapters::SidekiqAdapter::JobWrapper","wrapped":"SendMailsJob","queue":"default","args":[{"job_class":"SendMailsJob","job_id":"bcfeae89-a1a4-4e57-87f8-28a199e3280c","queue_name":"default","priority":null,"arguments":[{"_aj_globalid":"gid://book-store/Book/9"}],"locale":"en"}],"retry":true,"jid":"1108c0f97b3b45c176d631d2","created_at":1534882382.715988,"enqueued_at":1534908897.3824563,"error_message":"Error while trying to deserialize arguments: Couldn't find Book with 'id'=9","error_class":"ActiveJob::DeserializationError","failed_at":1534882382.7708082,"retry_count":11,"retried_at":1534908897.4039853},"jobstr":"{\"class\":\"ActiveJob::QueueAdapters::SidekiqAdapter::JobWrapper\",\"wrapped\":\"SendMailsJob\",\"queue\":\"default\",\"args\":[{\"job_class\":\"SendMailsJob\",\"job_id\":\"bcfeae89-a1a4-4e57-87f8-28a199e3280c\",\"queue_name\":\"default\",\"priority\":null,\"arguments\":[{\"_aj_globalid\":\"gid://book-store/Book/9\"}],\"locale\":\"en\"}],\"retry\":true,\"jid\":\"1108c0f97b3b45c176d631d2\",\"created_at\":1534882382.715988,\"enqueued_at\":1534908897.3824563,\"error_message\":\"Error while trying to deserialize arguments: Couldn't find Book with 'id'=9\",\"error_class\":\"ActiveJob::DeserializationError\",\"failed_at\":1534882382.7708082,\"retry_count\":10,\"retried_at\":1534898788.5149748}"}
2018-08-22T03:34:57.405Z 14838 TID-gmufdqzu8 WARN: ActiveJob::DeserializationError: Error while trying to deserialize arguments: Couldn't find Book with 'id'=9
2018-08-22T03:34:57.405Z 14838 TID-gmufdqzu8 WARN: /home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activerecord-5.0.1/lib/active_record/relation/finder_methods.rb:353:in `raise_record_not_found_exception!'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activerecord-5.0.1/lib/active_record/relation/finder_methods.rb:479:in `find_one'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activerecord-5.0.1/lib/active_record/relation/finder_methods.rb:458:in `find_with_ids'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activerecord-5.0.1/lib/active_record/relation/finder_methods.rb:66:in `find'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activerecord-5.0.1/lib/active_record/querying.rb:3:in `find'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activerecord-5.0.1/lib/active_record/core.rb:151:in `find'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/globalid-0.3.7/lib/global_id/locator.rb:130:in `locate'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/globalid-0.3.7/lib/global_id/locator.rb:155:in `block in locate'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/globalid-0.3.7/lib/global_id/locator.rb:165:in `block in unscoped'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activerecord-5.0.1/lib/active_record/scoping/default.rb:35:in `block in unscoped'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activerecord-5.0.1/lib/active_record/relation.rb:351:in `scoping'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activerecord-5.0.1/lib/active_record/scoping/default.rb:35:in `unscoped'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/globalid-0.3.7/lib/global_id/locator.rb:165:in `unscoped'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/globalid-0.3.7/lib/global_id/locator.rb:155:in `locate'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/globalid-0.3.7/lib/global_id/locator.rb:17:in `locate'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/arguments.rb:111:in `deserialize_global_id'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/arguments.rb:97:in `deserialize_argument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/arguments.rb:51:in `block in deserialize'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/arguments.rb:51:in `map'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/arguments.rb:51:in `deserialize'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/core.rb:128:in `deserialize_arguments'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/core.rb:118:in `deserialize_arguments_if_needed'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:32:in `perform_now'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:22:in `block in execute'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:126:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/railtie.rb:26:in `block (4 levels) in <class:Railtie>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:85:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:68:in `block in wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:81:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:67:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/railtie.rb:25:in `block (3 levels) in <class:Railtie>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `instance_exec'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `block in make_lambda'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:285:in `block in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:447:in `block in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:101:in `__run_callbacks__'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:750:in `_run_execute_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:90:in `run_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:20:in `execute'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/queue_adapters/sidekiq_adapter.rb:40:in `perform'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:199:in `execute_job'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:170:in `block (2 levels) in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/middleware/chain.rb:128:in `block in invoke'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/middleware/chain.rb:133:in `invoke'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:169:in `block in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:141:in `block (6 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/job_retry.rb:97:in `local'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:140:in `block (5 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/rails.rb:42:in `block in call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:85:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:68:in `block in wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:85:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:67:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/rails.rb:41:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:136:in `block (4 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:215:in `stats'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:131:in `block (3 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/job_logger.rb:7:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:130:in `block (2 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/job_retry.rb:72:in `global'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:129:in `block in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/logging.rb:44:in `with_context'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/logging.rb:38:in `with_job_hash_context'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:128:in `dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:168:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:85:in `process_one'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:73:in `run'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/util.rb:16:in `watchdog'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/util.rb:25:in `block in safe_thread'
2018-08-22T04:06:20.786Z 14838 TID-gmufn23l8 SendMailsJob JID-2947776ded23e995a0d43472 INFO: start
2018-08-22T04:06:20.807Z 14838 TID-gmufn23l8 SendMailsJob JID-2947776ded23e995a0d43472 INFO: fail: 0.021 sec
2018-08-22T04:06:20.807Z 14838 TID-gmufn23l8 WARN: {"context":"Job raised exception","job":{"class":"ActiveJob::QueueAdapters::SidekiqAdapter::JobWrapper","wrapped":"SendMailsJob","queue":"default","args":[{"job_class":"SendMailsJob","job_id":"1e1bb720-fb43-4319-9945-0413f26d13b2","queue_name":"default","priority":null,"arguments":[{"_aj_globalid":"gid://book-store/Book/10"}],"locale":"en"}],"retry":true,"jid":"2947776ded23e995a0d43472","created_at":1534884394.6657887,"enqueued_at":1534910780.783403,"error_message":"Error while trying to deserialize arguments: Couldn't find Book with 'id'=10","error_class":"ActiveJob::DeserializationError","failed_at":1534884394.782486,"retry_count":11,"retried_at":1534910780.8048978},"jobstr":"{\"class\":\"ActiveJob::QueueAdapters::SidekiqAdapter::JobWrapper\",\"wrapped\":\"SendMailsJob\",\"queue\":\"default\",\"args\":[{\"job_class\":\"SendMailsJob\",\"job_id\":\"1e1bb720-fb43-4319-9945-0413f26d13b2\",\"queue_name\":\"default\",\"priority\":null,\"arguments\":[{\"_aj_globalid\":\"gid://book-store/Book/10\"}],\"locale\":\"en\"}],\"retry\":true,\"jid\":\"2947776ded23e995a0d43472\",\"created_at\":1534884394.6657887,\"enqueued_at\":1534910780.783403,\"error_message\":\"Error while trying to deserialize arguments: Couldn't find Book with 'id'=10\",\"error_class\":\"ActiveJob::DeserializationError\",\"failed_at\":1534884394.782486,\"retry_count\":10,\"retried_at\":1534900632.7860138}"}
2018-08-22T04:06:20.807Z 14838 TID-gmufn23l8 WARN: ActiveJob::DeserializationError: Error while trying to deserialize arguments: Couldn't find Book with 'id'=10
2018-08-22T04:06:20.808Z 14838 TID-gmufn23l8 WARN: /home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activerecord-5.0.1/lib/active_record/relation/finder_methods.rb:353:in `raise_record_not_found_exception!'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activerecord-5.0.1/lib/active_record/relation/finder_methods.rb:479:in `find_one'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activerecord-5.0.1/lib/active_record/relation/finder_methods.rb:458:in `find_with_ids'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activerecord-5.0.1/lib/active_record/relation/finder_methods.rb:66:in `find'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activerecord-5.0.1/lib/active_record/querying.rb:3:in `find'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activerecord-5.0.1/lib/active_record/core.rb:151:in `find'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/globalid-0.3.7/lib/global_id/locator.rb:130:in `locate'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/globalid-0.3.7/lib/global_id/locator.rb:155:in `block in locate'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/globalid-0.3.7/lib/global_id/locator.rb:165:in `block in unscoped'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activerecord-5.0.1/lib/active_record/scoping/default.rb:35:in `block in unscoped'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activerecord-5.0.1/lib/active_record/relation.rb:351:in `scoping'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activerecord-5.0.1/lib/active_record/scoping/default.rb:35:in `unscoped'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/globalid-0.3.7/lib/global_id/locator.rb:165:in `unscoped'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/globalid-0.3.7/lib/global_id/locator.rb:155:in `locate'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/globalid-0.3.7/lib/global_id/locator.rb:17:in `locate'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/arguments.rb:111:in `deserialize_global_id'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/arguments.rb:97:in `deserialize_argument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/arguments.rb:51:in `block in deserialize'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/arguments.rb:51:in `map'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/arguments.rb:51:in `deserialize'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/core.rb:128:in `deserialize_arguments'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/core.rb:118:in `deserialize_arguments_if_needed'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:32:in `perform_now'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:22:in `block in execute'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:126:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/railtie.rb:26:in `block (4 levels) in <class:Railtie>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:85:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:68:in `block in wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:81:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:67:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/railtie.rb:25:in `block (3 levels) in <class:Railtie>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `instance_exec'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `block in make_lambda'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:285:in `block in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:447:in `block in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:101:in `__run_callbacks__'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:750:in `_run_execute_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:90:in `run_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:20:in `execute'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/queue_adapters/sidekiq_adapter.rb:40:in `perform'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:199:in `execute_job'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:170:in `block (2 levels) in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/middleware/chain.rb:128:in `block in invoke'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/middleware/chain.rb:133:in `invoke'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:169:in `block in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:141:in `block (6 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/job_retry.rb:97:in `local'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:140:in `block (5 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/rails.rb:42:in `block in call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:85:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:68:in `block in wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:85:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:67:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/rails.rb:41:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:136:in `block (4 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:215:in `stats'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:131:in `block (3 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/job_logger.rb:7:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:130:in `block (2 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/job_retry.rb:72:in `global'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:129:in `block in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/logging.rb:44:in `with_context'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/logging.rb:38:in `with_job_hash_context'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:128:in `dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:168:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:85:in `process_one'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:73:in `run'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/util.rb:16:in `watchdog'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/util.rb:25:in `block in safe_thread'
2018-08-22T04:25:54.026Z 14838 TID-gmufs3rbs SendMailsJob JID-95236a612130af4240e0fdad INFO: start
2018-08-22T04:25:54.070Z 14838 TID-gmufs3rbs SendMailsJob JID-95236a612130af4240e0fdad INFO: fail: 0.044 sec
2018-08-22T04:25:54.071Z 14838 TID-gmufs3rbs WARN: {"context":"Job raised exception","job":{"class":"ActiveJob::QueueAdapters::SidekiqAdapter::JobWrapper","wrapped":"SendMailsJob","queue":"default","args":[{"job_class":"SendMailsJob","job_id":"d036e0a2-07d4-4c37-9b26-3c981cc64b80","queue_name":"default","priority":null,"arguments":[{"_aj_globalid":"gid://book-store/Book/11"}],"locale":"en"}],"retry":true,"jid":"95236a612130af4240e0fdad","created_at":1534885162.1222718,"enqueued_at":1534911954.0223083,"error_message":"undefined method `url' for nil:NilClass\nDid you mean?  URI","error_class":"NoMethodError","failed_at":1534885162.1875215,"retry_count":11,"retried_at":1534911954.0686786},"jobstr":"{\"class\":\"ActiveJob::QueueAdapters::SidekiqAdapter::JobWrapper\",\"wrapped\":\"SendMailsJob\",\"queue\":\"default\",\"args\":[{\"job_class\":\"SendMailsJob\",\"job_id\":\"d036e0a2-07d4-4c37-9b26-3c981cc64b80\",\"queue_name\":\"default\",\"priority\":null,\"arguments\":[{\"_aj_globalid\":\"gid://book-store/Book/11\"}],\"locale\":\"en\"}],\"retry\":true,\"jid\":\"95236a612130af4240e0fdad\",\"created_at\":1534885162.1222718,\"enqueued_at\":1534911954.0223083,\"error_message\":\"undefined method `url' for nil:NilClass\\nDid you mean?  URI\",\"error_class\":\"NoMethodError\",\"failed_at\":1534885162.1875215,\"retry_count\":10,\"retried_at\":1534901623.6967158}"}
2018-08-22T04:25:54.071Z 14838 TID-gmufs3rbs WARN: NoMethodError: undefined method `url' for nil:NilClass
Did you mean?  URI
2018-08-22T04:25:54.071Z 14838 TID-gmufs3rbs WARN: /home/deploy/www/app/mailers/book_mailer.rb:8:in `send_book'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionpack-5.0.1/lib/abstract_controller/base.rb:188:in `process_action'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionpack-5.0.1/lib/abstract_controller/callbacks.rb:20:in `block in process_action'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:97:in `__run_callbacks__'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:90:in `run_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionpack-5.0.1/lib/abstract_controller/callbacks.rb:19:in `process_action'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionpack-5.0.1/lib/abstract_controller/base.rb:126:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/rescuable.rb:23:in `block in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/rescuable.rb:15:in `handle_exceptions'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/rescuable.rb:22:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionview-5.0.1/lib/action_view/rendering.rb:30:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/base.rb:595:in `block in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications.rb:164:in `block in instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications/instrumenter.rb:21:in `instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications.rb:164:in `instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/base.rb:594:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/message_delivery.rb:105:in `block in processed_mailer'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/message_delivery.rb:104:in `tap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/message_delivery.rb:104:in `processed_mailer'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/message_delivery.rb:27:in `__getobj__'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/2.3.0/delegate.rb:80:in `method_missing'
/home/deploy/www/app/jobs/send_mails_job.rb:6:in `perform'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:34:in `block in perform_now'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:126:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/i18n-0.8.0/lib/i18n.rb:257:in `with_locale'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/translation.rb:7:in `block (2 levels) in <module:Translation>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `instance_exec'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `block in make_lambda'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:285:in `block in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:447:in `block in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:24:in `block (4 levels) in <module:Logging>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications.rb:164:in `block in instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications/instrumenter.rb:21:in `instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications.rb:164:in `instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:23:in `block (3 levels) in <module:Logging>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:44:in `block in tag_logger'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/tagged_logging.rb:69:in `block in tagged'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/tagged_logging.rb:26:in `tagged'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/tagged_logging.rb:69:in `tagged'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:44:in `tag_logger'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:20:in `block (2 levels) in <module:Logging>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `instance_exec'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `block in make_lambda'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:285:in `block in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:447:in `block in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:101:in `__run_callbacks__'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:750:in `_run_perform_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:90:in `run_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:33:in `perform_now'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:22:in `block in execute'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:126:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/railtie.rb:26:in `block (4 levels) in <class:Railtie>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:85:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:68:in `block in wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:81:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:67:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/railtie.rb:25:in `block (3 levels) in <class:Railtie>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `instance_exec'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `block in make_lambda'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:285:in `block in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:447:in `block in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:101:in `__run_callbacks__'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:750:in `_run_execute_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:90:in `run_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:20:in `execute'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/queue_adapters/sidekiq_adapter.rb:40:in `perform'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:199:in `execute_job'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:170:in `block (2 levels) in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/middleware/chain.rb:128:in `block in invoke'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/middleware/chain.rb:133:in `invoke'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:169:in `block in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:141:in `block (6 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/job_retry.rb:97:in `local'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:140:in `block (5 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/rails.rb:42:in `block in call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:85:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:68:in `block in wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:85:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:67:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/rails.rb:41:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:136:in `block (4 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:215:in `stats'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:131:in `block (3 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/job_logger.rb:7:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:130:in `block (2 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/job_retry.rb:72:in `global'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:129:in `block in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/logging.rb:44:in `with_context'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/logging.rb:38:in `with_job_hash_context'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:128:in `dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:168:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:85:in `process_one'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:73:in `run'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/util.rb:16:in `watchdog'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/util.rb:25:in `block in safe_thread'
2018-08-22T06:23:51.710Z 14838 TID-gmufovb3s SendMailsJob JID-3b3a9201cc692b9b207c584f INFO: start
2018-08-22T06:23:51.767Z 14838 TID-gmufovb3s SendMailsJob JID-3b3a9201cc692b9b207c584f INFO: fail: 0.057 sec
2018-08-22T06:23:51.767Z 14838 TID-gmufovb3s WARN: {"context":"Job raised exception","job":{"class":"ActiveJob::QueueAdapters::SidekiqAdapter::JobWrapper","wrapped":"SendMailsJob","queue":"default","args":[{"job_class":"SendMailsJob","job_id":"92f57ef4-74f2-42ed-908d-aa42c584e98c","queue_name":"default","priority":null,"arguments":[{"_aj_globalid":"gid://book-store/Book/8"}],"locale":"en"}],"retry":true,"jid":"3b3a9201cc692b9b207c584f","created_at":1534856265.6621265,"enqueued_at":1534919031.708676,"error_message":"undefined method `url' for nil:NilClass\nDid you mean?  URI","error_class":"NoMethodError","failed_at":1534856266.2488687,"retry_count":13,"retried_at":1534919031.7661507},"jobstr":"{\"class\":\"ActiveJob::QueueAdapters::SidekiqAdapter::JobWrapper\",\"wrapped\":\"SendMailsJob\",\"queue\":\"default\",\"args\":[{\"job_class\":\"SendMailsJob\",\"job_id\":\"92f57ef4-74f2-42ed-908d-aa42c584e98c\",\"queue_name\":\"default\",\"priority\":null,\"arguments\":[{\"_aj_globalid\":\"gid://book-store/Book/8\"}],\"locale\":\"en\"}],\"retry\":true,\"jid\":\"3b3a9201cc692b9b207c584f\",\"created_at\":1534856265.6621265,\"enqueued_at\":1534919031.708676,\"error_message\":\"undefined method `url' for nil:NilClass\\nDid you mean?  URI\",\"error_class\":\"NoMethodError\",\"failed_at\":1534856266.2488687,\"retry_count\":12,\"retried_at\":1534897992.9536767}"}
2018-08-22T06:23:51.768Z 14838 TID-gmufovb3s WARN: NoMethodError: undefined method `url' for nil:NilClass
Did you mean?  URI
2018-08-22T06:23:51.768Z 14838 TID-gmufovb3s WARN: /home/deploy/www/app/mailers/book_mailer.rb:8:in `send_book'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionpack-5.0.1/lib/abstract_controller/base.rb:188:in `process_action'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionpack-5.0.1/lib/abstract_controller/callbacks.rb:20:in `block in process_action'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:97:in `__run_callbacks__'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:90:in `run_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionpack-5.0.1/lib/abstract_controller/callbacks.rb:19:in `process_action'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionpack-5.0.1/lib/abstract_controller/base.rb:126:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/rescuable.rb:23:in `block in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/rescuable.rb:15:in `handle_exceptions'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/rescuable.rb:22:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionview-5.0.1/lib/action_view/rendering.rb:30:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/base.rb:595:in `block in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications.rb:164:in `block in instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications/instrumenter.rb:21:in `instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications.rb:164:in `instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/base.rb:594:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/message_delivery.rb:105:in `block in processed_mailer'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/message_delivery.rb:104:in `tap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/message_delivery.rb:104:in `processed_mailer'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/message_delivery.rb:27:in `__getobj__'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/2.3.0/delegate.rb:80:in `method_missing'
/home/deploy/www/app/jobs/send_mails_job.rb:6:in `perform'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:34:in `block in perform_now'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:126:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/i18n-0.8.0/lib/i18n.rb:257:in `with_locale'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/translation.rb:7:in `block (2 levels) in <module:Translation>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `instance_exec'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `block in make_lambda'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:285:in `block in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:447:in `block in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:24:in `block (4 levels) in <module:Logging>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications.rb:164:in `block in instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications/instrumenter.rb:21:in `instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications.rb:164:in `instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:23:in `block (3 levels) in <module:Logging>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:44:in `block in tag_logger'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/tagged_logging.rb:69:in `block in tagged'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/tagged_logging.rb:26:in `tagged'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/tagged_logging.rb:69:in `tagged'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:44:in `tag_logger'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:20:in `block (2 levels) in <module:Logging>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `instance_exec'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `block in make_lambda'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:285:in `block in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:447:in `block in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:101:in `__run_callbacks__'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:750:in `_run_perform_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:90:in `run_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:33:in `perform_now'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:22:in `block in execute'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:126:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/railtie.rb:26:in `block (4 levels) in <class:Railtie>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:85:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:68:in `block in wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:81:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:67:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/railtie.rb:25:in `block (3 levels) in <class:Railtie>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `instance_exec'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `block in make_lambda'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:285:in `block in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:447:in `block in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:101:in `__run_callbacks__'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:750:in `_run_execute_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:90:in `run_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:20:in `execute'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/queue_adapters/sidekiq_adapter.rb:40:in `perform'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:199:in `execute_job'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:170:in `block (2 levels) in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/middleware/chain.rb:128:in `block in invoke'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/middleware/chain.rb:133:in `invoke'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:169:in `block in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:141:in `block (6 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/job_retry.rb:97:in `local'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:140:in `block (5 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/rails.rb:42:in `block in call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:85:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:68:in `block in wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:85:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:67:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/rails.rb:41:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:136:in `block (4 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:215:in `stats'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:131:in `block (3 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/job_logger.rb:7:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:130:in `block (2 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/job_retry.rb:72:in `global'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:129:in `block in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/logging.rb:44:in `with_context'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/logging.rb:38:in `with_job_hash_context'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:128:in `dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:168:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:85:in `process_one'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:73:in `run'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/util.rb:16:in `watchdog'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/util.rb:25:in `block in safe_thread'
2018-08-22T07:44:23.610Z 14838 TID-gmufoywck SendMailsJob JID-1108c0f97b3b45c176d631d2 INFO: start
2018-08-22T07:44:23.640Z 14838 TID-gmufoywck SendMailsJob JID-1108c0f97b3b45c176d631d2 INFO: fail: 0.03 sec
2018-08-22T07:44:23.642Z 14838 TID-gmufoywck WARN: {"context":"Job raised exception","job":{"class":"ActiveJob::QueueAdapters::SidekiqAdapter::JobWrapper","wrapped":"SendMailsJob","queue":"default","args":[{"job_class":"SendMailsJob","job_id":"bcfeae89-a1a4-4e57-87f8-28a199e3280c","queue_name":"default","priority":null,"arguments":[{"_aj_globalid":"gid://book-store/Book/9"}],"locale":"en"}],"retry":true,"jid":"1108c0f97b3b45c176d631d2","created_at":1534882382.715988,"enqueued_at":1534923863.6064982,"error_message":"Error while trying to deserialize arguments: Couldn't find Book with 'id'=9","error_class":"ActiveJob::DeserializationError","failed_at":1534882382.7708082,"retry_count":12,"retried_at":1534923863.6393733},"jobstr":"{\"class\":\"ActiveJob::QueueAdapters::SidekiqAdapter::JobWrapper\",\"wrapped\":\"SendMailsJob\",\"queue\":\"default\",\"args\":[{\"job_class\":\"SendMailsJob\",\"job_id\":\"bcfeae89-a1a4-4e57-87f8-28a199e3280c\",\"queue_name\":\"default\",\"priority\":null,\"arguments\":[{\"_aj_globalid\":\"gid://book-store/Book/9\"}],\"locale\":\"en\"}],\"retry\":true,\"jid\":\"1108c0f97b3b45c176d631d2\",\"created_at\":1534882382.715988,\"enqueued_at\":1534923863.6064982,\"error_message\":\"Error while trying to deserialize arguments: Couldn't find Book with 'id'=9\",\"error_class\":\"ActiveJob::DeserializationError\",\"failed_at\":1534882382.7708082,\"retry_count\":11,\"retried_at\":1534908897.4039853}"}
2018-08-22T07:44:23.643Z 14838 TID-gmufoywck WARN: ActiveJob::DeserializationError: Error while trying to deserialize arguments: Couldn't find Book with 'id'=9
2018-08-22T07:44:23.644Z 14838 TID-gmufoywck WARN: /home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activerecord-5.0.1/lib/active_record/relation/finder_methods.rb:353:in `raise_record_not_found_exception!'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activerecord-5.0.1/lib/active_record/relation/finder_methods.rb:479:in `find_one'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activerecord-5.0.1/lib/active_record/relation/finder_methods.rb:458:in `find_with_ids'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activerecord-5.0.1/lib/active_record/relation/finder_methods.rb:66:in `find'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activerecord-5.0.1/lib/active_record/querying.rb:3:in `find'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activerecord-5.0.1/lib/active_record/core.rb:151:in `find'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/globalid-0.3.7/lib/global_id/locator.rb:130:in `locate'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/globalid-0.3.7/lib/global_id/locator.rb:155:in `block in locate'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/globalid-0.3.7/lib/global_id/locator.rb:165:in `block in unscoped'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activerecord-5.0.1/lib/active_record/scoping/default.rb:35:in `block in unscoped'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activerecord-5.0.1/lib/active_record/relation.rb:351:in `scoping'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activerecord-5.0.1/lib/active_record/scoping/default.rb:35:in `unscoped'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/globalid-0.3.7/lib/global_id/locator.rb:165:in `unscoped'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/globalid-0.3.7/lib/global_id/locator.rb:155:in `locate'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/globalid-0.3.7/lib/global_id/locator.rb:17:in `locate'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/arguments.rb:111:in `deserialize_global_id'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/arguments.rb:97:in `deserialize_argument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/arguments.rb:51:in `block in deserialize'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/arguments.rb:51:in `map'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/arguments.rb:51:in `deserialize'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/core.rb:128:in `deserialize_arguments'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/core.rb:118:in `deserialize_arguments_if_needed'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:32:in `perform_now'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:22:in `block in execute'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:126:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/railtie.rb:26:in `block (4 levels) in <class:Railtie>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:85:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:68:in `block in wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:81:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:67:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/railtie.rb:25:in `block (3 levels) in <class:Railtie>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `instance_exec'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `block in make_lambda'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:285:in `block in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:447:in `block in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:101:in `__run_callbacks__'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:750:in `_run_execute_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:90:in `run_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:20:in `execute'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/queue_adapters/sidekiq_adapter.rb:40:in `perform'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:199:in `execute_job'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:170:in `block (2 levels) in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/middleware/chain.rb:128:in `block in invoke'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/middleware/chain.rb:133:in `invoke'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:169:in `block in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:141:in `block (6 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/job_retry.rb:97:in `local'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:140:in `block (5 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/rails.rb:42:in `block in call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:85:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:68:in `block in wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:85:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:67:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/rails.rb:41:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:136:in `block (4 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:215:in `stats'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:131:in `block (3 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/job_logger.rb:7:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:130:in `block (2 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/job_retry.rb:72:in `global'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:129:in `block in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/logging.rb:44:in `with_context'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/logging.rb:38:in `with_job_hash_context'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:128:in `dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:168:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:85:in `process_one'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:73:in `run'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/util.rb:16:in `watchdog'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/util.rb:25:in `block in safe_thread'
2018-08-22T08:15:54.832Z 14838 TID-gmufr4bnw SendMailsJob JID-2947776ded23e995a0d43472 INFO: start
2018-08-22T08:15:54.866Z 14838 TID-gmufr4bnw SendMailsJob JID-2947776ded23e995a0d43472 INFO: fail: 0.034 sec
2018-08-22T08:15:54.867Z 14838 TID-gmufr4bnw WARN: {"context":"Job raised exception","job":{"class":"ActiveJob::QueueAdapters::SidekiqAdapter::JobWrapper","wrapped":"SendMailsJob","queue":"default","args":[{"job_class":"SendMailsJob","job_id":"1e1bb720-fb43-4319-9945-0413f26d13b2","queue_name":"default","priority":null,"arguments":[{"_aj_globalid":"gid://book-store/Book/10"}],"locale":"en"}],"retry":true,"jid":"2947776ded23e995a0d43472","created_at":1534884394.6657887,"enqueued_at":1534925754.8316455,"error_message":"Error while trying to deserialize arguments: Couldn't find Book with 'id'=10","error_class":"ActiveJob::DeserializationError","failed_at":1534884394.782486,"retry_count":12,"retried_at":1534925754.8630464},"jobstr":"{\"class\":\"ActiveJob::QueueAdapters::SidekiqAdapter::JobWrapper\",\"wrapped\":\"SendMailsJob\",\"queue\":\"default\",\"args\":[{\"job_class\":\"SendMailsJob\",\"job_id\":\"1e1bb720-fb43-4319-9945-0413f26d13b2\",\"queue_name\":\"default\",\"priority\":null,\"arguments\":[{\"_aj_globalid\":\"gid://book-store/Book/10\"}],\"locale\":\"en\"}],\"retry\":true,\"jid\":\"2947776ded23e995a0d43472\",\"created_at\":1534884394.6657887,\"enqueued_at\":1534925754.8316455,\"error_message\":\"Error while trying to deserialize arguments: Couldn't find Book with 'id'=10\",\"error_class\":\"ActiveJob::DeserializationError\",\"failed_at\":1534884394.782486,\"retry_count\":11,\"retried_at\":1534910780.8048978}"}
2018-08-22T08:15:54.867Z 14838 TID-gmufr4bnw WARN: ActiveJob::DeserializationError: Error while trying to deserialize arguments: Couldn't find Book with 'id'=10
2018-08-22T08:15:54.867Z 14838 TID-gmufr4bnw WARN: /home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activerecord-5.0.1/lib/active_record/relation/finder_methods.rb:353:in `raise_record_not_found_exception!'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activerecord-5.0.1/lib/active_record/relation/finder_methods.rb:479:in `find_one'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activerecord-5.0.1/lib/active_record/relation/finder_methods.rb:458:in `find_with_ids'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activerecord-5.0.1/lib/active_record/relation/finder_methods.rb:66:in `find'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activerecord-5.0.1/lib/active_record/querying.rb:3:in `find'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activerecord-5.0.1/lib/active_record/core.rb:151:in `find'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/globalid-0.3.7/lib/global_id/locator.rb:130:in `locate'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/globalid-0.3.7/lib/global_id/locator.rb:155:in `block in locate'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/globalid-0.3.7/lib/global_id/locator.rb:165:in `block in unscoped'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activerecord-5.0.1/lib/active_record/scoping/default.rb:35:in `block in unscoped'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activerecord-5.0.1/lib/active_record/relation.rb:351:in `scoping'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activerecord-5.0.1/lib/active_record/scoping/default.rb:35:in `unscoped'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/globalid-0.3.7/lib/global_id/locator.rb:165:in `unscoped'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/globalid-0.3.7/lib/global_id/locator.rb:155:in `locate'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/globalid-0.3.7/lib/global_id/locator.rb:17:in `locate'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/arguments.rb:111:in `deserialize_global_id'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/arguments.rb:97:in `deserialize_argument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/arguments.rb:51:in `block in deserialize'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/arguments.rb:51:in `map'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/arguments.rb:51:in `deserialize'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/core.rb:128:in `deserialize_arguments'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/core.rb:118:in `deserialize_arguments_if_needed'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:32:in `perform_now'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:22:in `block in execute'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:126:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/railtie.rb:26:in `block (4 levels) in <class:Railtie>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:85:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:68:in `block in wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:81:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:67:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/railtie.rb:25:in `block (3 levels) in <class:Railtie>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `instance_exec'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `block in make_lambda'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:285:in `block in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:447:in `block in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:101:in `__run_callbacks__'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:750:in `_run_execute_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:90:in `run_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:20:in `execute'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/queue_adapters/sidekiq_adapter.rb:40:in `perform'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:199:in `execute_job'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:170:in `block (2 levels) in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/middleware/chain.rb:128:in `block in invoke'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/middleware/chain.rb:133:in `invoke'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:169:in `block in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:141:in `block (6 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/job_retry.rb:97:in `local'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:140:in `block (5 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/rails.rb:42:in `block in call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:85:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:68:in `block in wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:85:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:67:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/rails.rb:41:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:136:in `block (4 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:215:in `stats'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:131:in `block (3 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/job_logger.rb:7:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:130:in `block (2 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/job_retry.rb:72:in `global'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:129:in `block in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/logging.rb:44:in `with_context'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/logging.rb:38:in `with_job_hash_context'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:128:in `dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:168:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:85:in `process_one'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:73:in `run'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/util.rb:16:in `watchdog'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/util.rb:25:in `block in safe_thread'
2018-08-22T08:31:15.098Z 14838 TID-gmuff6w54 SendMailsJob JID-95236a612130af4240e0fdad INFO: start
2018-08-22T08:31:15.156Z 14838 TID-gmuff6w54 SendMailsJob JID-95236a612130af4240e0fdad INFO: fail: 0.058 sec
2018-08-22T08:31:15.156Z 14838 TID-gmuff6w54 WARN: {"context":"Job raised exception","job":{"class":"ActiveJob::QueueAdapters::SidekiqAdapter::JobWrapper","wrapped":"SendMailsJob","queue":"default","args":[{"job_class":"SendMailsJob","job_id":"d036e0a2-07d4-4c37-9b26-3c981cc64b80","queue_name":"default","priority":null,"arguments":[{"_aj_globalid":"gid://book-store/Book/11"}],"locale":"en"}],"retry":true,"jid":"95236a612130af4240e0fdad","created_at":1534885162.1222718,"enqueued_at":1534926675.0891693,"error_message":"undefined method `url' for nil:NilClass\nDid you mean?  URI","error_class":"NoMethodError","failed_at":1534885162.1875215,"retry_count":12,"retried_at":1534926675.1507623},"jobstr":"{\"class\":\"ActiveJob::QueueAdapters::SidekiqAdapter::JobWrapper\",\"wrapped\":\"SendMailsJob\",\"queue\":\"default\",\"args\":[{\"job_class\":\"SendMailsJob\",\"job_id\":\"d036e0a2-07d4-4c37-9b26-3c981cc64b80\",\"queue_name\":\"default\",\"priority\":null,\"arguments\":[{\"_aj_globalid\":\"gid://book-store/Book/11\"}],\"locale\":\"en\"}],\"retry\":true,\"jid\":\"95236a612130af4240e0fdad\",\"created_at\":1534885162.1222718,\"enqueued_at\":1534926675.0891693,\"error_message\":\"undefined method `url' for nil:NilClass\\nDid you mean?  URI\",\"error_class\":\"NoMethodError\",\"failed_at\":1534885162.1875215,\"retry_count\":11,\"retried_at\":1534911954.0686786}"}
2018-08-22T08:31:15.157Z 14838 TID-gmuff6w54 WARN: NoMethodError: undefined method `url' for nil:NilClass
Did you mean?  URI
2018-08-22T08:31:15.157Z 14838 TID-gmuff6w54 WARN: /home/deploy/www/app/mailers/book_mailer.rb:8:in `send_book'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionpack-5.0.1/lib/abstract_controller/base.rb:188:in `process_action'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionpack-5.0.1/lib/abstract_controller/callbacks.rb:20:in `block in process_action'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:97:in `__run_callbacks__'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:90:in `run_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionpack-5.0.1/lib/abstract_controller/callbacks.rb:19:in `process_action'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionpack-5.0.1/lib/abstract_controller/base.rb:126:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/rescuable.rb:23:in `block in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/rescuable.rb:15:in `handle_exceptions'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/rescuable.rb:22:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionview-5.0.1/lib/action_view/rendering.rb:30:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/base.rb:595:in `block in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications.rb:164:in `block in instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications/instrumenter.rb:21:in `instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications.rb:164:in `instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/base.rb:594:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/message_delivery.rb:105:in `block in processed_mailer'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/message_delivery.rb:104:in `tap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/message_delivery.rb:104:in `processed_mailer'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/message_delivery.rb:27:in `__getobj__'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/2.3.0/delegate.rb:80:in `method_missing'
/home/deploy/www/app/jobs/send_mails_job.rb:6:in `perform'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:34:in `block in perform_now'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:126:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/i18n-0.8.0/lib/i18n.rb:257:in `with_locale'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/translation.rb:7:in `block (2 levels) in <module:Translation>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `instance_exec'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `block in make_lambda'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:285:in `block in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:447:in `block in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:24:in `block (4 levels) in <module:Logging>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications.rb:164:in `block in instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications/instrumenter.rb:21:in `instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications.rb:164:in `instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:23:in `block (3 levels) in <module:Logging>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:44:in `block in tag_logger'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/tagged_logging.rb:69:in `block in tagged'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/tagged_logging.rb:26:in `tagged'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/tagged_logging.rb:69:in `tagged'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:44:in `tag_logger'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:20:in `block (2 levels) in <module:Logging>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `instance_exec'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `block in make_lambda'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:285:in `block in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:447:in `block in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:101:in `__run_callbacks__'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:750:in `_run_perform_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:90:in `run_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:33:in `perform_now'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:22:in `block in execute'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:126:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/railtie.rb:26:in `block (4 levels) in <class:Railtie>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:85:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:68:in `block in wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:81:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:67:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/railtie.rb:25:in `block (3 levels) in <class:Railtie>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `instance_exec'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `block in make_lambda'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:285:in `block in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:447:in `block in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:101:in `__run_callbacks__'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:750:in `_run_execute_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:90:in `run_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:20:in `execute'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/queue_adapters/sidekiq_adapter.rb:40:in `perform'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:199:in `execute_job'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:170:in `block (2 levels) in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/middleware/chain.rb:128:in `block in invoke'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/middleware/chain.rb:133:in `invoke'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:169:in `block in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:141:in `block (6 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/job_retry.rb:97:in `local'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:140:in `block (5 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/rails.rb:42:in `block in call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:85:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:68:in `block in wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:85:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:67:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/rails.rb:41:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:136:in `block (4 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:215:in `stats'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:131:in `block (3 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/job_logger.rb:7:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:130:in `block (2 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/job_retry.rb:72:in `global'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:129:in `block in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/logging.rb:44:in `with_context'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/logging.rb:38:in `with_job_hash_context'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:128:in `dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:168:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:85:in `process_one'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:73:in `run'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/util.rb:16:in `watchdog'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/util.rb:25:in `block in safe_thread'
2018-08-22T13:30:56.458Z 14838 TID-gmufcvgx0 SendMailsJob JID-1108c0f97b3b45c176d631d2 INFO: start
2018-08-22T13:30:56.489Z 14838 TID-gmufcvgx0 SendMailsJob JID-1108c0f97b3b45c176d631d2 INFO: fail: 0.03 sec
2018-08-22T13:30:56.489Z 14838 TID-gmufcvgx0 WARN: {"context":"Job raised exception","job":{"class":"ActiveJob::QueueAdapters::SidekiqAdapter::JobWrapper","wrapped":"SendMailsJob","queue":"default","args":[{"job_class":"SendMailsJob","job_id":"bcfeae89-a1a4-4e57-87f8-28a199e3280c","queue_name":"default","priority":null,"arguments":[{"_aj_globalid":"gid://book-store/Book/9"}],"locale":"en"}],"retry":true,"jid":"1108c0f97b3b45c176d631d2","created_at":1534882382.715988,"enqueued_at":1534944656.4577634,"error_message":"Error while trying to deserialize arguments: Couldn't find Book with 'id'=9","error_class":"ActiveJob::DeserializationError","failed_at":1534882382.7708082,"retry_count":13,"retried_at":1534944656.486891},"jobstr":"{\"class\":\"ActiveJob::QueueAdapters::SidekiqAdapter::JobWrapper\",\"wrapped\":\"SendMailsJob\",\"queue\":\"default\",\"args\":[{\"job_class\":\"SendMailsJob\",\"job_id\":\"bcfeae89-a1a4-4e57-87f8-28a199e3280c\",\"queue_name\":\"default\",\"priority\":null,\"arguments\":[{\"_aj_globalid\":\"gid://book-store/Book/9\"}],\"locale\":\"en\"}],\"retry\":true,\"jid\":\"1108c0f97b3b45c176d631d2\",\"created_at\":1534882382.715988,\"enqueued_at\":1534944656.4577634,\"error_message\":\"Error while trying to deserialize arguments: Couldn't find Book with 'id'=9\",\"error_class\":\"ActiveJob::DeserializationError\",\"failed_at\":1534882382.7708082,\"retry_count\":12,\"retried_at\":1534923863.6393733}"}
2018-08-22T13:30:56.489Z 14838 TID-gmufcvgx0 WARN: ActiveJob::DeserializationError: Error while trying to deserialize arguments: Couldn't find Book with 'id'=9
2018-08-22T13:30:56.489Z 14838 TID-gmufcvgx0 WARN: /home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activerecord-5.0.1/lib/active_record/relation/finder_methods.rb:353:in `raise_record_not_found_exception!'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activerecord-5.0.1/lib/active_record/relation/finder_methods.rb:479:in `find_one'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activerecord-5.0.1/lib/active_record/relation/finder_methods.rb:458:in `find_with_ids'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activerecord-5.0.1/lib/active_record/relation/finder_methods.rb:66:in `find'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activerecord-5.0.1/lib/active_record/querying.rb:3:in `find'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activerecord-5.0.1/lib/active_record/core.rb:151:in `find'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/globalid-0.3.7/lib/global_id/locator.rb:130:in `locate'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/globalid-0.3.7/lib/global_id/locator.rb:155:in `block in locate'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/globalid-0.3.7/lib/global_id/locator.rb:165:in `block in unscoped'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activerecord-5.0.1/lib/active_record/scoping/default.rb:35:in `block in unscoped'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activerecord-5.0.1/lib/active_record/relation.rb:351:in `scoping'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activerecord-5.0.1/lib/active_record/scoping/default.rb:35:in `unscoped'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/globalid-0.3.7/lib/global_id/locator.rb:165:in `unscoped'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/globalid-0.3.7/lib/global_id/locator.rb:155:in `locate'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/globalid-0.3.7/lib/global_id/locator.rb:17:in `locate'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/arguments.rb:111:in `deserialize_global_id'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/arguments.rb:97:in `deserialize_argument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/arguments.rb:51:in `block in deserialize'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/arguments.rb:51:in `map'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/arguments.rb:51:in `deserialize'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/core.rb:128:in `deserialize_arguments'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/core.rb:118:in `deserialize_arguments_if_needed'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:32:in `perform_now'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:22:in `block in execute'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:126:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/railtie.rb:26:in `block (4 levels) in <class:Railtie>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:85:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:68:in `block in wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:81:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:67:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/railtie.rb:25:in `block (3 levels) in <class:Railtie>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `instance_exec'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `block in make_lambda'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:285:in `block in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:447:in `block in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:101:in `__run_callbacks__'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:750:in `_run_execute_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:90:in `run_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:20:in `execute'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/queue_adapters/sidekiq_adapter.rb:40:in `perform'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:199:in `execute_job'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:170:in `block (2 levels) in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/middleware/chain.rb:128:in `block in invoke'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/middleware/chain.rb:133:in `invoke'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:169:in `block in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:141:in `block (6 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/job_retry.rb:97:in `local'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:140:in `block (5 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/rails.rb:42:in `block in call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:85:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:68:in `block in wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:85:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:67:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/rails.rb:41:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:136:in `block (4 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:215:in `stats'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:131:in `block (3 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/job_logger.rb:7:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:130:in `block (2 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/job_retry.rb:72:in `global'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:129:in `block in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/logging.rb:44:in `with_context'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/logging.rb:38:in `with_job_hash_context'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:128:in `dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:168:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:85:in `process_one'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:73:in `run'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/util.rb:16:in `watchdog'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/util.rb:25:in `block in safe_thread'
2018-08-22T14:07:35.387Z 14838 TID-gmufbtqw4 SendMailsJob JID-2947776ded23e995a0d43472 INFO: start
2018-08-22T14:07:35.423Z 14838 TID-gmufbtqw4 SendMailsJob JID-2947776ded23e995a0d43472 INFO: fail: 0.035 sec
2018-08-22T14:07:35.423Z 14838 TID-gmufbtqw4 WARN: {"context":"Job raised exception","job":{"class":"ActiveJob::QueueAdapters::SidekiqAdapter::JobWrapper","wrapped":"SendMailsJob","queue":"default","args":[{"job_class":"SendMailsJob","job_id":"1e1bb720-fb43-4319-9945-0413f26d13b2","queue_name":"default","priority":null,"arguments":[{"_aj_globalid":"gid://book-store/Book/10"}],"locale":"en"}],"retry":true,"jid":"2947776ded23e995a0d43472","created_at":1534884394.6657887,"enqueued_at":1534946855.3798501,"error_message":"Error while trying to deserialize arguments: Couldn't find Book with 'id'=10","error_class":"ActiveJob::DeserializationError","failed_at":1534884394.782486,"retry_count":13,"retried_at":1534946855.4150445},"jobstr":"{\"class\":\"ActiveJob::QueueAdapters::SidekiqAdapter::JobWrapper\",\"wrapped\":\"SendMailsJob\",\"queue\":\"default\",\"args\":[{\"job_class\":\"SendMailsJob\",\"job_id\":\"1e1bb720-fb43-4319-9945-0413f26d13b2\",\"queue_name\":\"default\",\"priority\":null,\"arguments\":[{\"_aj_globalid\":\"gid://book-store/Book/10\"}],\"locale\":\"en\"}],\"retry\":true,\"jid\":\"2947776ded23e995a0d43472\",\"created_at\":1534884394.6657887,\"enqueued_at\":1534946855.3798501,\"error_message\":\"Error while trying to deserialize arguments: Couldn't find Book with 'id'=10\",\"error_class\":\"ActiveJob::DeserializationError\",\"failed_at\":1534884394.782486,\"retry_count\":12,\"retried_at\":1534925754.8630464}"}
2018-08-22T14:07:35.423Z 14838 TID-gmufbtqw4 WARN: ActiveJob::DeserializationError: Error while trying to deserialize arguments: Couldn't find Book with 'id'=10
2018-08-22T14:07:35.423Z 14838 TID-gmufbtqw4 WARN: /home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activerecord-5.0.1/lib/active_record/relation/finder_methods.rb:353:in `raise_record_not_found_exception!'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activerecord-5.0.1/lib/active_record/relation/finder_methods.rb:479:in `find_one'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activerecord-5.0.1/lib/active_record/relation/finder_methods.rb:458:in `find_with_ids'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activerecord-5.0.1/lib/active_record/relation/finder_methods.rb:66:in `find'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activerecord-5.0.1/lib/active_record/querying.rb:3:in `find'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activerecord-5.0.1/lib/active_record/core.rb:151:in `find'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/globalid-0.3.7/lib/global_id/locator.rb:130:in `locate'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/globalid-0.3.7/lib/global_id/locator.rb:155:in `block in locate'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/globalid-0.3.7/lib/global_id/locator.rb:165:in `block in unscoped'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activerecord-5.0.1/lib/active_record/scoping/default.rb:35:in `block in unscoped'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activerecord-5.0.1/lib/active_record/relation.rb:351:in `scoping'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activerecord-5.0.1/lib/active_record/scoping/default.rb:35:in `unscoped'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/globalid-0.3.7/lib/global_id/locator.rb:165:in `unscoped'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/globalid-0.3.7/lib/global_id/locator.rb:155:in `locate'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/globalid-0.3.7/lib/global_id/locator.rb:17:in `locate'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/arguments.rb:111:in `deserialize_global_id'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/arguments.rb:97:in `deserialize_argument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/arguments.rb:51:in `block in deserialize'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/arguments.rb:51:in `map'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/arguments.rb:51:in `deserialize'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/core.rb:128:in `deserialize_arguments'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/core.rb:118:in `deserialize_arguments_if_needed'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:32:in `perform_now'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:22:in `block in execute'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:126:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/railtie.rb:26:in `block (4 levels) in <class:Railtie>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:85:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:68:in `block in wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:81:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:67:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/railtie.rb:25:in `block (3 levels) in <class:Railtie>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `instance_exec'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `block in make_lambda'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:285:in `block in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:447:in `block in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:101:in `__run_callbacks__'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:750:in `_run_execute_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:90:in `run_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:20:in `execute'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/queue_adapters/sidekiq_adapter.rb:40:in `perform'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:199:in `execute_job'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:170:in `block (2 levels) in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/middleware/chain.rb:128:in `block in invoke'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/middleware/chain.rb:133:in `invoke'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:169:in `block in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:141:in `block (6 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/job_retry.rb:97:in `local'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:140:in `block (5 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/rails.rb:42:in `block in call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:85:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:68:in `block in wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:85:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:67:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/rails.rb:41:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:136:in `block (4 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:215:in `stats'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:131:in `block (3 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/job_logger.rb:7:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:130:in `block (2 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/job_retry.rb:72:in `global'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:129:in `block in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/logging.rb:44:in `with_context'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/logging.rb:38:in `with_job_hash_context'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:128:in `dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:168:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:85:in `process_one'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:73:in `run'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/util.rb:16:in `watchdog'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/util.rb:25:in `block in safe_thread'
2018-08-22T14:20:37.995Z 14838 TID-gmufrouyw SendMailsJob JID-95236a612130af4240e0fdad INFO: start
2018-08-22T14:20:38.026Z 14838 TID-gmufrouyw SendMailsJob JID-95236a612130af4240e0fdad INFO: fail: 0.031 sec
2018-08-22T14:20:38.027Z 14838 TID-gmufrouyw WARN: {"context":"Job raised exception","job":{"class":"ActiveJob::QueueAdapters::SidekiqAdapter::JobWrapper","wrapped":"SendMailsJob","queue":"default","args":[{"job_class":"SendMailsJob","job_id":"d036e0a2-07d4-4c37-9b26-3c981cc64b80","queue_name":"default","priority":null,"arguments":[{"_aj_globalid":"gid://book-store/Book/11"}],"locale":"en"}],"retry":true,"jid":"95236a612130af4240e0fdad","created_at":1534885162.1222718,"enqueued_at":1534947637.9941792,"error_message":"Error while trying to deserialize arguments: Couldn't find Book with 'id'=11","error_class":"ActiveJob::DeserializationError","failed_at":1534885162.1875215,"retry_count":13,"retried_at":1534947638.017997},"jobstr":"{\"class\":\"ActiveJob::QueueAdapters::SidekiqAdapter::JobWrapper\",\"wrapped\":\"SendMailsJob\",\"queue\":\"default\",\"args\":[{\"job_class\":\"SendMailsJob\",\"job_id\":\"d036e0a2-07d4-4c37-9b26-3c981cc64b80\",\"queue_name\":\"default\",\"priority\":null,\"arguments\":[{\"_aj_globalid\":\"gid://book-store/Book/11\"}],\"locale\":\"en\"}],\"retry\":true,\"jid\":\"95236a612130af4240e0fdad\",\"created_at\":1534885162.1222718,\"enqueued_at\":1534947637.9941792,\"error_message\":\"undefined method `url' for nil:NilClass\\nDid you mean?  URI\",\"error_class\":\"NoMethodError\",\"failed_at\":1534885162.1875215,\"retry_count\":12,\"retried_at\":1534926675.1507623}"}
2018-08-22T14:20:38.027Z 14838 TID-gmufrouyw WARN: ActiveJob::DeserializationError: Error while trying to deserialize arguments: Couldn't find Book with 'id'=11
2018-08-22T14:20:38.027Z 14838 TID-gmufrouyw WARN: /home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activerecord-5.0.1/lib/active_record/relation/finder_methods.rb:353:in `raise_record_not_found_exception!'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activerecord-5.0.1/lib/active_record/relation/finder_methods.rb:479:in `find_one'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activerecord-5.0.1/lib/active_record/relation/finder_methods.rb:458:in `find_with_ids'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activerecord-5.0.1/lib/active_record/relation/finder_methods.rb:66:in `find'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activerecord-5.0.1/lib/active_record/querying.rb:3:in `find'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activerecord-5.0.1/lib/active_record/core.rb:151:in `find'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/globalid-0.3.7/lib/global_id/locator.rb:130:in `locate'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/globalid-0.3.7/lib/global_id/locator.rb:155:in `block in locate'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/globalid-0.3.7/lib/global_id/locator.rb:165:in `block in unscoped'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activerecord-5.0.1/lib/active_record/scoping/default.rb:35:in `block in unscoped'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activerecord-5.0.1/lib/active_record/relation.rb:351:in `scoping'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activerecord-5.0.1/lib/active_record/scoping/default.rb:35:in `unscoped'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/globalid-0.3.7/lib/global_id/locator.rb:165:in `unscoped'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/globalid-0.3.7/lib/global_id/locator.rb:155:in `locate'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/globalid-0.3.7/lib/global_id/locator.rb:17:in `locate'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/arguments.rb:111:in `deserialize_global_id'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/arguments.rb:97:in `deserialize_argument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/arguments.rb:51:in `block in deserialize'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/arguments.rb:51:in `map'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/arguments.rb:51:in `deserialize'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/core.rb:128:in `deserialize_arguments'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/core.rb:118:in `deserialize_arguments_if_needed'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:32:in `perform_now'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:22:in `block in execute'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:126:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/railtie.rb:26:in `block (4 levels) in <class:Railtie>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:85:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:68:in `block in wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:81:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:67:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/railtie.rb:25:in `block (3 levels) in <class:Railtie>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `instance_exec'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `block in make_lambda'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:285:in `block in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:447:in `block in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:101:in `__run_callbacks__'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:750:in `_run_execute_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:90:in `run_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:20:in `execute'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/queue_adapters/sidekiq_adapter.rb:40:in `perform'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:199:in `execute_job'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:170:in `block (2 levels) in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/middleware/chain.rb:128:in `block in invoke'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/middleware/chain.rb:133:in `invoke'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:169:in `block in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:141:in `block (6 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/job_retry.rb:97:in `local'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:140:in `block (5 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/rails.rb:42:in `block in call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:85:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:68:in `block in wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:85:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:67:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/rails.rb:41:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:136:in `block (4 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:215:in `stats'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:131:in `block (3 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/job_logger.rb:7:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:130:in `block (2 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/job_retry.rb:72:in `global'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:129:in `block in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/logging.rb:44:in `with_context'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/logging.rb:38:in `with_job_hash_context'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:128:in `dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:168:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:85:in `process_one'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:73:in `run'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/util.rb:16:in `watchdog'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/util.rb:25:in `block in safe_thread'
2018-08-22T14:25:55.179Z 14838 TID-gmuflok8o SendMailsJob JID-3b3a9201cc692b9b207c584f INFO: start
2018-08-22T14:25:55.224Z 14838 TID-gmuflok8o SendMailsJob JID-3b3a9201cc692b9b207c584f INFO: fail: 0.045 sec
2018-08-22T14:25:55.224Z 14838 TID-gmuflok8o WARN: {"context":"Job raised exception","job":{"class":"ActiveJob::QueueAdapters::SidekiqAdapter::JobWrapper","wrapped":"SendMailsJob","queue":"default","args":[{"job_class":"SendMailsJob","job_id":"92f57ef4-74f2-42ed-908d-aa42c584e98c","queue_name":"default","priority":null,"arguments":[{"_aj_globalid":"gid://book-store/Book/8"}],"locale":"en"}],"retry":true,"jid":"3b3a9201cc692b9b207c584f","created_at":1534856265.6621265,"enqueued_at":1534947955.1779418,"error_message":"undefined method `url' for nil:NilClass\nDid you mean?  URI","error_class":"NoMethodError","failed_at":1534856266.2488687,"retry_count":14,"retried_at":1534947955.2224736},"jobstr":"{\"class\":\"ActiveJob::QueueAdapters::SidekiqAdapter::JobWrapper\",\"wrapped\":\"SendMailsJob\",\"queue\":\"default\",\"args\":[{\"job_class\":\"SendMailsJob\",\"job_id\":\"92f57ef4-74f2-42ed-908d-aa42c584e98c\",\"queue_name\":\"default\",\"priority\":null,\"arguments\":[{\"_aj_globalid\":\"gid://book-store/Book/8\"}],\"locale\":\"en\"}],\"retry\":true,\"jid\":\"3b3a9201cc692b9b207c584f\",\"created_at\":1534856265.6621265,\"enqueued_at\":1534947955.1779418,\"error_message\":\"undefined method `url' for nil:NilClass\\nDid you mean?  URI\",\"error_class\":\"NoMethodError\",\"failed_at\":1534856266.2488687,\"retry_count\":13,\"retried_at\":1534919031.7661507}"}
2018-08-22T14:25:55.224Z 14838 TID-gmuflok8o WARN: NoMethodError: undefined method `url' for nil:NilClass
Did you mean?  URI
2018-08-22T14:25:55.224Z 14838 TID-gmuflok8o WARN: /home/deploy/www/app/mailers/book_mailer.rb:8:in `send_book'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionpack-5.0.1/lib/abstract_controller/base.rb:188:in `process_action'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionpack-5.0.1/lib/abstract_controller/callbacks.rb:20:in `block in process_action'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:97:in `__run_callbacks__'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:90:in `run_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionpack-5.0.1/lib/abstract_controller/callbacks.rb:19:in `process_action'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionpack-5.0.1/lib/abstract_controller/base.rb:126:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/rescuable.rb:23:in `block in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/rescuable.rb:15:in `handle_exceptions'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/rescuable.rb:22:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionview-5.0.1/lib/action_view/rendering.rb:30:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/base.rb:595:in `block in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications.rb:164:in `block in instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications/instrumenter.rb:21:in `instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications.rb:164:in `instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/base.rb:594:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/message_delivery.rb:105:in `block in processed_mailer'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/message_delivery.rb:104:in `tap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/message_delivery.rb:104:in `processed_mailer'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionmailer-5.0.1/lib/action_mailer/message_delivery.rb:27:in `__getobj__'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/2.3.0/delegate.rb:80:in `method_missing'
/home/deploy/www/app/jobs/send_mails_job.rb:6:in `perform'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:34:in `block in perform_now'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:126:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/i18n-0.8.0/lib/i18n.rb:257:in `with_locale'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/translation.rb:7:in `block (2 levels) in <module:Translation>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `instance_exec'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `block in make_lambda'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:285:in `block in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:447:in `block in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:24:in `block (4 levels) in <module:Logging>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications.rb:164:in `block in instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications/instrumenter.rb:21:in `instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications.rb:164:in `instrument'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:23:in `block (3 levels) in <module:Logging>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:44:in `block in tag_logger'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/tagged_logging.rb:69:in `block in tagged'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/tagged_logging.rb:26:in `tagged'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/tagged_logging.rb:69:in `tagged'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:44:in `tag_logger'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/logging.rb:20:in `block (2 levels) in <module:Logging>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `instance_exec'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `block in make_lambda'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:285:in `block in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:447:in `block in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:101:in `__run_callbacks__'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:750:in `_run_perform_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:90:in `run_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:33:in `perform_now'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:22:in `block in execute'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:126:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/railtie.rb:26:in `block (4 levels) in <class:Railtie>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:85:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:68:in `block in wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:81:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:67:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/railtie.rb:25:in `block (3 levels) in <class:Railtie>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `instance_exec'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:391:in `block in make_lambda'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:285:in `block in halting'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:447:in `block in around'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:455:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:101:in `__run_callbacks__'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:750:in `_run_execute_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:90:in `run_callbacks'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/execution.rb:20:in `execute'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activejob-5.0.1/lib/active_job/queue_adapters/sidekiq_adapter.rb:40:in `perform'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:199:in `execute_job'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:170:in `block (2 levels) in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/middleware/chain.rb:128:in `block in invoke'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/middleware/chain.rb:133:in `invoke'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:169:in `block in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:141:in `block (6 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/job_retry.rb:97:in `local'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:140:in `block (5 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/rails.rb:42:in `block in call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:85:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:68:in `block in wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/execution_wrapper.rb:85:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/reloader.rb:67:in `wrap'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/rails.rb:41:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:136:in `block (4 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:215:in `stats'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:131:in `block (3 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/job_logger.rb:7:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:130:in `block (2 levels) in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/job_retry.rb:72:in `global'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:129:in `block in dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/logging.rb:44:in `with_context'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/logging.rb:38:in `with_job_hash_context'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:128:in `dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:168:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:85:in `process_one'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/processor.rb:73:in `run'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/util.rb:16:in `watchdog'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/util.rb:25:in `block in safe_thread'
2018-08-22T19:14:31.621Z 4985 TID-goschn38o INFO: Running in ruby 2.3.0p0 (2015-12-25 revision 53290) [x86_64-linux]
2018-08-22T19:14:31.629Z 4985 TID-goschn38o INFO: See LICENSE and the LGPL-3.0 for licensing details.
2018-08-22T19:14:31.629Z 4985 TID-goschn38o INFO: Upgrade to Sidekiq Pro for more features and support: http://sidekiq.org
2018-08-22T19:14:31.629Z 4985 TID-goschn38o INFO: Booting Sidekiq 5.0.4 with redis options {:id=>"Sidekiq-server-PID-4985", :url=>nil}
Error connecting to Redis on 127.0.0.1:6379 (Errno::ECONNREFUSED)
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/redis-3.3.3/lib/redis/client.rb:345:in `rescue in establish_connection'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/redis-3.3.3/lib/redis/client.rb:331:in `establish_connection'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/redis-3.3.3/lib/redis/client.rb:101:in `block in connect'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/redis-3.3.3/lib/redis/client.rb:293:in `with_reconnect'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/redis-3.3.3/lib/redis/client.rb:100:in `connect'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/redis-3.3.3/lib/redis/client.rb:364:in `ensure_connected'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/redis-3.3.3/lib/redis/client.rb:221:in `block in process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/redis-3.3.3/lib/redis/client.rb:306:in `logging'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/redis-3.3.3/lib/redis/client.rb:220:in `process'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/redis-3.3.3/lib/redis/client.rb:120:in `call'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/redis-3.3.3/lib/redis.rb:251:in `block in info'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/redis-3.3.3/lib/redis.rb:58:in `block in synchronize'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/2.3.0/monitor.rb:214:in `mon_synchronize'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/redis-3.3.3/lib/redis.rb:58:in `synchronize'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/redis-3.3.3/lib/redis.rb:250:in `info'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq.rb:113:in `block in redis_info'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq.rb:95:in `block in redis'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/connection_pool-2.2.1/lib/connection_pool.rb:64:in `block (2 levels) in with'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/connection_pool-2.2.1/lib/connection_pool.rb:63:in `handle_interrupt'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/connection_pool-2.2.1/lib/connection_pool.rb:63:in `block in with'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/connection_pool-2.2.1/lib/connection_pool.rb:60:in `handle_interrupt'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/connection_pool-2.2.1/lib/connection_pool.rb:60:in `with'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq.rb:92:in `redis'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq.rb:106:in `redis_info'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/lib/sidekiq/cli.rb:81:in `run'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/sidekiq-5.0.4/bin/sidekiq:12:in `<top (required)>'
/home/deploy/.rbenv/versions/2.3.0/bin/sidekiq:23:in `load'
/home/deploy/.rbenv/versions/2.3.0/bin/sidekiq:23:in `<top (required)>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/bundler-1.16.3/lib/bundler/cli/exec.rb:74:in `load'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/bundler-1.16.3/lib/bundler/cli/exec.rb:74:in `kernel_load'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/bundler-1.16.3/lib/bundler/cli/exec.rb:28:in `run'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/bundler-1.16.3/lib/bundler/cli.rb:424:in `exec'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/bundler-1.16.3/lib/bundler/vendor/thor/lib/thor/command.rb:27:in `run'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/bundler-1.16.3/lib/bundler/vendor/thor/lib/thor/invocation.rb:126:in `invoke_command'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/bundler-1.16.3/lib/bundler/vendor/thor/lib/thor.rb:387:in `dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/bundler-1.16.3/lib/bundler/cli.rb:27:in `dispatch'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/bundler-1.16.3/lib/bundler/vendor/thor/lib/thor/base.rb:466:in `start'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/bundler-1.16.3/lib/bundler/cli.rb:18:in `start'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/bundler-1.16.3/exe/bundle:30:in `block in <top (required)>'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/bundler-1.16.3/lib/bundler/friendly_errors.rb:124:in `with_friendly_errors'
/home/deploy/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/bundler-1.16.3/exe/bundle:22:in `<top (required)>'
/home/deploy/.rbenv/versions/2.3.0/bin/bundle:23:in `load'
/home/deploy/.rbenv/versions/2.3.0/bin/bundle:23:in `<main>'
